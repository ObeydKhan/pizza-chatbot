{"version":3,"sources":["resources/glutenfree.svg","resources/vegan.svg","resources/vegetarian.svg","resources/dairyfree.svg","resources/SliceLogo.png","components/chatbot/common/rgba.js","components/chatbot/common/animations.jsx","components/chatbot/steps_components/common/LoadingStep.jsx","components/chatbot/steps_components/common/Loading.jsx","components/chatbot/steps_components/custom/CustomStepContainer.jsx","components/chatbot/steps_components/custom/CustomStep.jsx","components/chatbot/steps_components/options/Option.jsx","components/chatbot/theme.js","components/chatbot/steps_components/options/OptionElement.jsx","components/chatbot/steps_components/options/Options.jsx","components/chatbot/steps_components/options/OptionsStepContainer.jsx","components/chatbot/steps_components/options/OptionsStep.jsx","components/chatbot/steps_components/text/Bubble.jsx","components/chatbot/steps_components/text/Image.jsx","components/chatbot/steps_components/text/ImageContainer.jsx","components/chatbot/steps_components/text/TextStepContainer.jsx","components/chatbot/steps_components/text/TextStep.jsx","components/chatbot/schemas/userSchema.js","components/chatbot/schemas/textSchema.js","components/chatbot/schemas/optionsSchema.js","components/chatbot/schemas/customSchema.js","components/chatbot/schemas/updateSchema.js","components/chatbot/schemas/schema.js","components/chatbot/components/ChatBotContainer.jsx","components/chatbot/components/Content.jsx","components/chatbot/components/Header.jsx","components/chatbot/components/HeaderTitle.jsx","components/chatbot/components/HeaderIcon.jsx","components/chatbot/components/FloatButton.jsx","components/chatbot/components/FloatingIcon.jsx","components/chatbot/components/Footer.jsx","components/chatbot/components/Input.jsx","components/chatbot/components/SubmitButton.jsx","components/chatbot/recognition.js","components/chatbot/icons/ChatIcon.jsx","components/chatbot/icons/CloseIcon.jsx","components/chatbot/icons/SubmitIcon.jsx","components/chatbot/icons/MicIcon.jsx","components/chatbot/utils.js","components/chatbot/speechSynthesis.js","components/chatbot/ChatBot.jsx","components/chatbot/storage.js","components/StepFactory.jsx","components/itemMenu.jsx","components/Summary.jsx","components/OrderStep.jsx","components/SimpleForm.js","components/StoreMenu.jsx","components/DisplayMainArea.js","components/Pizza.jsx","components/PizzaOrder.jsx","resources/GeoIcon.jsx","components/StoreLoc.jsx","components/App.js","serviceWorker.js","index.js","components/Location.jsx"],"names":["module","exports","hexToRgb","hex","replace","m","r","g","b","result","exec","parseInt","rgba","alpha","color","loading","keyframes","scale","invalidInput","LoadingStep","styled","span","props","delay","Loading","className","ChatStepContainer","div","CustomStep","state","renderComponent","step","steps","previousStep","triggerNextStep","component","React","cloneElement","this","speak","previousValue","waitAction","setTimeout","setState","rendered","style","CustomStepContainer","Component","defaultProps","Option","li","background","fontFamily","headerBgColor","headerFontColor","headerFontSize","botBubbleColor","botFontColor","userBubbleColor","userFontColor","OptionElement","button","theme","defaultTheme","Options","ul","OptionsStepContainer","OptionsStep","onOptionClick","value","renderOption","option","bubbleOptionStyle","user","label","key","onClick","options","Object","keys","map","Bubble","isFirst","isLast","showAvatar","Image","img","ImageContainer","TextStepContainer","TextStep","getMessage","message","renderMessage","isComponentWatingUser","avatarStyle","bubbleStyle","hideBotAvatar","hideUserAvatar","avatar","botName","imageAltText","src","alt","types","required","schema","parse","parser","userSchema","textSchema","optionsSchema","customSchema","update","Error","stringify","updateSchema","i","len","length","indexOf","join","p","console","error","id","checkInvalidIds","triggerId","trigger","optionsTriggerIds","filter","optionTriggerId","ChatBotContainer","floating","floatingStyle","bottom","top","right","left","width","height","opened","transformOrigin","Content","hideInput","Header","HeaderTitle","h2","HeaderIcon","a","FloatButton","FloatingIcon","Footer","Input","input","invalid","css","disabled","hasButton","SubmitButton","speaking","instance","noop","Recognition","onChange","onEnd","onStop","lang","inputValue","onResult","bind","setup","window","interimTranscript","finalTranscript","recognition","stop","force","event","resultIndex","results","isFinal","transcript","onFinal","nextState","assign","isSupported","webkitSpeechRecognition","continuous","interimResults","onresult","onend","start","ChatIcon","viewBox","xmlns","d","fill","CloseIcon","SubmitIcon","size","version","points","MicIcon","isMobile","test","navigator","userAgent","isString","speakFn","speechSynthesisOptions","voice","enable","SpeechSynthesisUtterance","speechSynthesis","text","metadata","getSpeakText","msg","ChatBot","onNodeInserted","target","currentTarget","enableSmoothScroll","supportsScrollBehavior","scroll","scrollHeight","behavior","scrollTop","onResize","content","onRecognitionChange","onRecognitionEnd","handleSubmitButton","onRecognitionStop","onValueChange","getTriggeredStep","generateRenderedStepsById","getStepMessage","previousSteps","lastStepIndex","data","enableMobileAutoFocus","defaultUserSettings","renderedSteps","currentStep","isEnd","end","hideExtraControl","handleEnd","o","pop","push","val","stepMsg","preserveMsg","defaultBotSettings","botAvatar","thisStepMsg","nextS","nextStep","updateStep","Random","focus","cache","cacheName","cachedData","localStorage","setItem","storage","values","isInputValueEmpty","isLastPosition","stepIndex","s","asMessage","isFirstPosition","lastStep","handleKeyPress","submitUserMessage","recognitionEnable","validator","checkInvalidInput","blur","toString","inputInvalid","toggleChatBot","toggleFloating","renderStep","index","customStyle","setContentRef","element","setInputRef","botDelay","customDelay","userAvatar","chatSteps","userDelay","defaultCustomSettings","settings","firstStep","recognitionLang","document","documentElement","addEventListener","params","callback","unParsedCache","getItem","renderedStep","removeItem","info","removeEventListener","customControl","contentStyle","extraControl","controlStyle","floatingIcon","footerStyle","headerComponent","headerTitle","hideHeader","hideSubmitButton","inputStyle","placeholder","inputAttributes","recognitionPlaceholder","submitButtonStyle","header","undefined","icon","inputPlaceholder","inputAttributesOverride","ref","type","onKeyPress","position","BtnArray","btns","sel","click","hasMulti","listKey","findIndex","capt","btnCapt","itemInfo","multi","eleClass","btnClass","ControlArray","stepControls","stepCtrls","btnCat","onTrigger","GetStepMsg","cancelCtrl","t","ctrls","concat","buildConfirmationCtrl","name","compCtrl","changeCtrl","removeCtrl","pType","owner","tarType","tarName","ctrlType","StepFactory","stepInfo","controls","current","prev","ctrlVals","vals","BuildSpecialStep","next","isRetRevO","hasRemoveSpecial","isFinalReview","revS","comp","chng","cancel","ctrlArry","buildCtrlObj","getCtrls","displayMsg","stepContents","contents","cName","retArray","ReviewMsgArray","elements","onSelect","selected","e","SimpleItemArray","rowName","rowClass","rClass","rowKey","halfBtns","btnType","qtyBtns","halfRow","qtyRow","MultiRowArray","BuildContents","controlArray","itemMenu","menu","Menu","menuSteps","obj","x","ret","arr","find","getHasMultipleSelect","single","substring","getHasQty","getHasHalf","buildMultRowStep","buildSimpleStep","getStep","hasHalf","hasQty","getItemsList","buildOptBtns","btnMsg","item","opt","itemID","getOptsList","class","short","sizes","qty","half","multiple","sum","sumCl","rows","table","items","rowCl","tr","str","pizzaMsg","colSpan","specInst","Summary","hasOwnProperty","cnt","tables","msg1","msg2","finalO","OrderStep","pizzaMenu","PizzaMenu","selectedOptions","triggerNext","checkRequiredInput","alert","order","isPrev","stepKey","ProcessStep","genericStep","pizzabuilder","selc","SelectionArray","getPrev","newPizza","HandelEdit","SetStep","CreateStep","CreateItemMsg","HandleSpecialActions","getUserMsg","currrentlySelected","SelectPizzaItems","chkPrev","prevStep","prevType","chkNxt","getNext","MenuSteps","PizzaList","isReturnFromReviewOrder","fromReviewOrder","CreateReview","GetPizzaString","getContentType","getStepElements","GetOrderSummary","orderName","pizzaCnt","pizzaInfo","CreateSummaryTable","pizza","itemTypeArray","spcinst","specinst","td","getItemString","itemName","GetItemName","GetOptMsg","GetPizzaItems","cur","MakeNewPizza","addNewPizza","isNaN","EditSelections","ChangeCurrentPizza","SpecialActions","SavePizzaToOrder","CreateNewPizza","OrderIsStarted","specialInstructions","specialinstentry","specialinstmsg","specialinstques","ordername","StartNewOrder","GetStep","SimpleForm","marginTop","StoreMenu","veggie","gf","vegan","df","DisplayMainArea","showSum","showEdit","orderEnd","appState","showPage","Pizza","templist","multiItemSelect","singleItemSelect","PizzaItems","curItemArry","getSelectedItems","select","arrayReduce","arrayBuild","array","shift","z","curItem","updItem","updateItem","splice","curitem","itemValues","PizzaOrder","pizzas","lastID","currentPizza","stepsProcessed","currentStepInfo","botKeys","bot","CancelOrder","PizzaID","RemovePizza","hasCurrent","CancelPizza","PizzaInfo","infoMap","SpecialInstructions","GeoIcon","preserveAspectRatio","transform","StoreSearchMenu","locObj","MakeGeoDialog","search","MakeUserDialog","forwardedRef","MakePrevDialog","hasErr","geoErr","capStr","geoErrMsg","geoZip","clsStr","searchObj","method","userErr","userErrMsg","onKeyDown","storeSearch","preventDefault","curStoreID","storeInfo","curStoreInfo","hours","StoreSelectMenu","searchLoc","storeList","storeID","store","selLoc","dist","reset","StoreLoc","isSearch","isSelect","searchMeth","storeSelect","resetSearch","updateProps","page","usrStr","searchErr","selectObj","storeLoc","set","show","buildSearchMenu","buildStoreSelectMenu","App","updateLoc","setStore","mainPage","Order","createRef","banner","StoreBanner","logo","resetOrder","cancelOrder","complete","completeOrder","Boolean","location","hostname","match","initLoc","resolveGeoLoc","isResolved","entryErr","errMsg","zip","cityState","previous","didChange","stores","then","c","city","locOpt","timeout","maximumAge","Promise","resolve","reject","geolocation","getCurrentPosition","lat","coords","latitude","long","longitude","tZip","lookupByCoords","log","code","trim","cs","l","lookup","loc","res","err","userZip","userCityState","geoCityState","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.486765e4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/glutenfree.15f41c40.svg\";","module.exports = __webpack_public_path__ + \"static/media/vegan.2349a56b.svg\";","module.exports = __webpack_public_path__ + \"static/media/vegetarian.db83e29d.svg\";","module.exports = __webpack_public_path__ + \"static/media/dairyfree.b1948e3f.svg\";","module.exports = \"data:image/png;base64,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\"","const hexToRgb = hex => {\r\n  // http://stackoverflow.com/a/5624139\r\n  const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n  hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);\r\n\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return result\r\n    ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16)\r\n      }\r\n    : null;\r\n};\r\n\r\n/**\r\n * Transform hex+alpha to rgba\r\n * @param {string} hex hex color code\r\n * @param {number} [alpha=1]\r\n * @returns {string} the rgba as string\r\n */\r\nconst rgba = (hex, alpha = 1) => {\r\n  const color = hexToRgb(hex);\r\n  return `rgba(${color.r}, ${color.g}, ${color.b}, ${alpha})`;\r\n};\r\n\r\nexport default rgba;\r\n","import { keyframes } from 'styled-components';\r\nimport rgba from './rgba';\r\n\r\nconst loading = keyframes`\r\n  0% { opacity: .2; }\r\n  20% { opacity: 1; }\r\n  100% { opacity: .2; }\r\n`;\r\n\r\nconst scale = keyframes`\r\n  100% { transform: scale(1); }\r\n`;\r\n\r\nconst invalidInput = keyframes`\r\n  25% { transform: rotate(-1deg); }\r\n  100% { transform: rotate(1deg); }\r\n`;\r\n\r\nconst pulse = color => keyframes`\r\n  0% { box-shadow: 0 0 0 0 ${rgba(color, 0.4)}; }\r\n  70% { box-shadow: 0 0 0 10px ${rgba(color, 0)}; }\r\n  100% { box-shadow: 0 0 0 0 ${rgba(color, 0)}; }\r\n`;\r\n\r\nexport { loading, scale, invalidInput, pulse };\r\n","import styled from 'styled-components';\r\nimport { loading } from '../../common/animations';\r\n\r\nconst LoadingStep = styled.span`\r\n  animation: ${loading} 1.4s infinite both;\r\n  animation-delay: ${props => props.delay};\r\n`;\r\n\r\nexport default LoadingStep;\r\n","import React from 'react';\r\nimport LoadingStep from './LoadingStep';\r\n\r\nconst Loading = () => (\r\n  <span className=\"rsc-loading\">\r\n    <LoadingStep delay=\"0s\">.</LoadingStep>\r\n    <LoadingStep delay=\".2s\">.</LoadingStep>\r\n    <LoadingStep delay=\".4s\">.</LoadingStep>\r\n  </span>\r\n);\r\n\r\nexport default Loading;\r\n","import styled from 'styled-components';\r\n\r\nconst ChatStepContainer = styled.div`\r\n  background: #fff;\r\n  border-radius: 5px;\r\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 0 6px 10px 6px;\r\n  padding: 16px;\r\n`;\r\n\r\nexport default ChatStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loading from '../common/Loading';\r\nimport CustomStepContainer from './CustomStepContainer';\r\n\r\nclass CustomStep extends Component {\r\n  state = {\r\n    loading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { speak, step, previousValue, triggerNextStep } = this.props;\r\n    const { delay, waitAction } = step;\r\n\r\n    setTimeout(() => {\r\n      this.setState({ loading: false }, () => {\r\n        if (!waitAction && !step.rendered) {\r\n          triggerNextStep();\r\n        }\r\n        speak(step, previousValue);\r\n      });\r\n    }, delay);\r\n  }\r\n\r\n  renderComponent = () => {\r\n    const { step, steps, previousStep, triggerNextStep } = this.props;\r\n    const { component } = step;\r\n\r\n    return React.cloneElement(component, {\r\n      step,\r\n      steps,\r\n      previousStep,\r\n      triggerNextStep\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { loading } = this.state;\r\n    const { style } = this.props;\r\n\r\n    return (\r\n      <CustomStepContainer className=\"rsc-cs\" style={style}>\r\n        {loading ? <Loading /> : this.renderComponent()}\r\n      </CustomStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nCustomStep.propTypes = {\r\n  previousStep: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  previousValue: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.bool,\r\n    PropTypes.number,\r\n    PropTypes.object,\r\n    PropTypes.array\r\n  ]),\r\n  speak: PropTypes.func,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  steps: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  style: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\nCustomStep.defaultProps = {\r\n  previousValue: '',\r\n  speak: () => {}\r\n};\r\n\r\nexport default CustomStep;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\n\r\nconst Option = styled.li`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  margin: 2px;\r\n  transform: scale(0);\r\n`;\r\n\r\nexport default Option;\r\n","export default {\r\n  background: '#f5f8fb',\r\n  fontFamily: 'monospace',\r\n  headerBgColor: '#6e48aa',\r\n  headerFontColor: '#fff',\r\n  headerFontSize: '16px',\r\n  botBubbleColor: '#6E48AA',\r\n  botFontColor: '#fff',\r\n  userBubbleColor: '#fff',\r\n  userFontColor: '#4a4a4a'\r\n};\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../../theme';\r\n\r\nconst OptionElement = styled.button`\r\n  background: ${({ theme }) => theme.botBubbleColor};\r\n  border: 0;\r\n  border-radius: 22px;\r\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\r\n  color: ${({ theme }) => theme.botFontColor};\r\n  display: inline-block;\r\n  font-size: 14px;\r\n  padding: 12px;\r\n\r\n  &:hover {\r\n    opacity: 0.7;\r\n  }\r\n  &:active,\r\n  &:hover:focus {\r\n    outline:none;\r\n  }\r\n`;\r\n\r\nOptionElement.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default OptionElement;\r\n","import styled from 'styled-components';\r\n\r\nconst Options = styled.ul`\r\n  margin: 2px 0 12px 0;\r\n  padding: 0 6px;\r\n`;\r\n\r\nexport default Options;\r\n","import styled from 'styled-components';\r\n\r\nconst OptionsStepContainer = styled.div``;\r\n\r\nexport default OptionsStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Option from './Option';\r\nimport OptionElement from './OptionElement';\r\nimport Options from './Options';\r\nimport OptionsStepContainer from './OptionsStepContainer';\r\n\r\nclass OptionsStep extends Component {\r\n  onOptionClick = ({ value }) => {\r\n    const { triggerNextStep } = this.props;\r\n\r\n    triggerNextStep({ value });\r\n  };\r\n\r\n  renderOption = option => {\r\n    const { bubbleOptionStyle, step } = this.props;\r\n    const { user } = step;\r\n    const { value, label } = option;\r\n\r\n    return (\r\n      <Option key={value} className=\"rsc-os-option\">\r\n        <OptionElement\r\n          className=\"rsc-os-option-element\"\r\n          style={bubbleOptionStyle}\r\n          user={user}\r\n          onClick={() => this.onOptionClick({ value })}\r\n        >\r\n          {label}\r\n        </OptionElement>\r\n      </Option>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { step } = this.props;\r\n    const { options } = step;\r\n\r\n    return (\r\n      <OptionsStepContainer className=\"rsc-os\">\r\n        <Options className=\"rsc-os-options\">\r\n          {Object.keys(options).map(key => options[key]).map(this.renderOption)}\r\n        </Options>\r\n      </OptionsStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nOptionsStep.propTypes = {\r\n  bubbleOptionStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\n\r\nexport default OptionsStep;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\nimport defaultTheme from '../../theme';\r\n\r\nconst Bubble = styled.div`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  background: ${props => (props.user ? props.theme.userBubbleColor : props.theme.botBubbleColor)};\r\n  border-radius: ${props => {\r\n    const { isFirst, isLast, user } = props;\r\n\r\n    if (!isFirst && !isLast) {\r\n      return user ? '18px 0 0 18px' : '0 18px 18px 0px';\r\n    }\r\n\r\n    if (!isFirst && isLast) {\r\n      return user ? '18px 0 18px 18px' : '0 18px 18px 18px';\r\n    }\r\n\r\n    return props.user ? '18px 18px 0 18px' : '18px 18px 18px 0';\r\n  }};\r\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\r\n  color: ${props => (props.user ? props.theme.userFontColor : props.theme.botFontColor)};\r\n  display: inline-block;\r\n  font-size: 14px;\r\n  max-width: 50%;\r\n  margin: ${props => {\r\n    const { isFirst, showAvatar, user } = props;\r\n\r\n    if (!isFirst && showAvatar) {\r\n      return user ? '-8px 46px 10px 0' : '-8px 0 10px 46px';\r\n    }\r\n\r\n    if (!isFirst && !showAvatar) {\r\n      return user ? '-8px 0px 10px 0' : '-8px 0 10px 0px';\r\n    }\r\n\r\n    return '0 0 10px 0';\r\n  }};\r\n  overflow: hidden;\r\n  position: relative;\r\n  padding: 12px;\r\n  transform: scale(0);\r\n  transform-origin: ${props => {\r\n    const { isFirst, user } = props;\r\n\r\n    if (isFirst) {\r\n      return user ? 'bottom right' : 'bottom left';\r\n    }\r\n\r\n    return user ? 'top right' : 'top left';\r\n  }};\r\n`;\r\n\r\nBubble.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default Bubble;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\n\r\nconst Image = styled.img`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  border-radius: ${props => (props.user ? '50% 50% 50% 0' : '50% 50% 0 50%')};\r\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\r\n  height: 40px;\r\n  min-width: 40px;\r\n  padding: 3px;\r\n  transform: scale(0);\r\n  transform-origin: ${props => (props.user ? 'bottom left' : 'bottom right')};\r\n  width: 40;\r\n`;\r\n\r\nexport default Image;\r\n","import styled from 'styled-components';\r\n\r\nconst ImageContainer = styled.div`\r\n  display: inline-block;\r\n  order: ${props => (props.user ? '1' : '0')};\r\n  padding: 6px;\r\n`;\r\n\r\nexport default ImageContainer;\r\n","import styled from 'styled-components';\r\n\r\nconst TextStepContainer = styled.div`\r\n  align-items: flex-end;\r\n  display: flex;\r\n  justify-content: ${props => (props.user ? 'flex-end' : 'flex-start')};\r\n`;\r\n\r\nexport default TextStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Bubble from './Bubble';\r\nimport Image from './Image';\r\nimport ImageContainer from './ImageContainer';\r\nimport Loading from '../common/Loading';\r\nimport TextStepContainer from './TextStepContainer';\r\n\r\nclass TextStep extends Component {\r\n  /* istanbul ignore next */\r\n  state = {\r\n    loading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { step, speak, previousValue, triggerNextStep } = this.props;\r\n    const { component, delay, waitAction } = step;\r\n    const isComponentWatingUser = component && waitAction;\r\n\r\n    setTimeout(() => {\r\n      this.setState({ loading: false }, () => {\r\n        if (!isComponentWatingUser && !step.rendered) {\r\n          triggerNextStep();\r\n        }\r\n        speak(step, previousValue);\r\n      });\r\n    }, delay);\r\n  }\r\n\r\n  getMessage = () => {\r\n    const { previousValue, step } = this.props;    \r\n    const { message } = step;      \r\n    return message ? message.replace(/{previousValue}/g, previousValue) : '';\r\n  };\r\n\r\n  renderMessage = () => {\r\n    const { step, steps, previousStep, triggerNextStep } = this.props;\r\n    const { component } = step;\r\n\r\n    if (component) {      \r\n      return React.cloneElement(component, {\r\n        step,\r\n        steps,\r\n        previousStep,\r\n        triggerNextStep\r\n      });\r\n    }    \r\n    return this.getMessage();\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      step,\r\n      isFirst,\r\n      isLast,\r\n      avatarStyle,\r\n      bubbleStyle,\r\n      hideBotAvatar,\r\n      hideUserAvatar\r\n    } = this.props;\r\n    const { loading } = this.state;\r\n    const { avatar, user, botName } = step;\r\n\r\n    const showAvatar = user ? !hideUserAvatar : !hideBotAvatar;\r\n\r\n    const imageAltText = user ? \"Your avatar\" : `${botName}'s avatar`;\r\n    return (\r\n      <TextStepContainer className={`rsc-ts ${user ? 'rsc-ts-user' : 'rsc-ts-bot'}`} user={user}>\r\n        <ImageContainer className=\"rsc-ts-image-container\" user={user}>\r\n          {isFirst && showAvatar && (\r\n            <Image\r\n              className=\"rsc-ts-image\"\r\n              style={avatarStyle}\r\n              showAvatar={showAvatar}\r\n              user={user}\r\n              src={avatar}\r\n              alt={imageAltText}\r\n            />\r\n          )}\r\n        </ImageContainer>\r\n        <Bubble\r\n          className=\"rsc-ts-bubble\"\r\n          style={bubbleStyle}\r\n          user={user}\r\n          showAvatar={showAvatar}\r\n          isFirst={isFirst}\r\n          isLast={isLast}\r\n        >\r\n          {loading ? <Loading /> : this.renderMessage()}\r\n        </Bubble>\r\n      </TextStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nTextStep.propTypes = {\r\n  avatarStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  isFirst: PropTypes.bool.isRequired,\r\n  isLast: PropTypes.bool.isRequired,\r\n  bubbleStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  hideBotAvatar: PropTypes.bool.isRequired,\r\n  hideUserAvatar: PropTypes.bool.isRequired,\r\n  previousStep: PropTypes.objectOf(PropTypes.any),\r\n  previousValue: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.bool,\r\n    PropTypes.number,\r\n    PropTypes.object,\r\n    PropTypes.array\r\n  ]),\r\n  speak: PropTypes.func,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  steps: PropTypes.objectOf(PropTypes.any),\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\n\r\nTextStep.defaultProps = {\r\n  previousStep: {},\r\n  previousValue: '',\r\n  speak: () => {},\r\n  steps: {}\r\n};\r\n\r\nexport default TextStep;\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'user',\r\n    types: ['boolean'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'validator',\r\n    types: ['function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'message',\r\n    types: ['string', 'function'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'avatar',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'delay',\r\n    types: ['number'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'options',\r\n    types: ['object'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'component',\r\n    types: ['any'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'avatar',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'replace',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'waitAction',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'asMessage',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'delay',\r\n    types: ['number'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'update',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","import userSchema from './userSchema';\r\nimport textSchema from './textSchema';\r\nimport optionsSchema from './optionsSchema';\r\nimport customSchema from './customSchema';\r\nimport updateSchema from './updateSchema';\r\nimport { stringify } from 'flatted/cjs';\r\n\r\nconst schema = {\r\n  parse(step) {\r\n    let parser = [];\r\n\r\n    if (step.user) {\r\n      parser = userSchema;\r\n    } else if (step.message) {\r\n      parser = textSchema;\r\n    } else if (step.options) {\r\n      parser = optionsSchema;\r\n    } else if (step.component) {\r\n      parser = customSchema;\r\n    } else if (step.update) {\r\n      parser = updateSchema;\r\n    } else {\r\n      throw new Error(`The step ${stringify(step)} is invalid`);\r\n    }\r\n\r\n    for (let i = 0, len = parser.length; i < len; i += 1) {\r\n      const { key, types, required } = parser[i];\r\n\r\n      if (!step[key] && required) {\r\n        throw new Error(`Key '${key}' is required in step ${stringify(step)}`);\r\n      } else if (step[key]) {\r\n        if (types[0] !== 'any' && types.indexOf(typeof step[key]) < 0) {\r\n          throw new Error(\r\n            `The type of '${key}' value must be ${types.join(' or ')} instead of ${typeof step[\r\n              key\r\n            ]}`\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    const keys = parser.map(p => p.key);\r\n\r\n    for (const key in step) {\r\n      if (keys.indexOf(key) < 0) {\r\n        console.error(`Invalid key '${key}' in step '${step.id}'`);\r\n        delete step[key];\r\n      }\r\n    }\r\n\r\n    return step;\r\n  },\r\n\r\n  checkInvalidIds(steps) {\r\n    for (const key in steps) {\r\n      const step = steps[key];\r\n      const triggerId = steps[key].trigger;\r\n\r\n      if (typeof triggerId !== 'function') {\r\n        if (step.options) {\r\n          const triggers = step.options.filter(option => typeof option.trigger !== 'function');\r\n          const optionsTriggerIds = triggers.map(option => option.trigger);\r\n\r\n          for (let i = 0, len = optionsTriggerIds.length; i < len; i += 1) {\r\n            const optionTriggerId = optionsTriggerIds[i];\r\n            if (optionTriggerId && !steps[optionTriggerId]) {\r\n              throw new Error(\r\n                `The id '${optionTriggerId}' triggered by option ${i + 1} in step '${\r\n                  steps[key].id\r\n                }' does not exist`\r\n              );\r\n            }\r\n          }\r\n        } else if (triggerId && !steps[triggerId]) {\r\n          throw new Error(\r\n            `The id '${triggerId}' triggered by step '${steps[key].id}' does not exist`\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default schema;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst ChatBotContainer = styled.div`\r\n  background: ${({ theme }) => theme.background};\r\n  border-radius: 10px;\r\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\r\n  font-family: ${({ theme }) => theme.fontFamily};\r\n  overflow: hidden;\r\n  position: ${({ floating }) => (floating ? 'fixed' : 'relative')};\r\n  bottom: ${({ floating, floatingStyle }) =>\r\n    floating ? floatingStyle.bottom || '32px' : 'initial'};\r\n  top: ${({ floating, floatingStyle }) => (floating ? floatingStyle.top || 'initial' : 'initial')};\r\n  right: ${({ floating, floatingStyle }) => (floating ? floatingStyle.right || '32px' : 'initial')};\r\n  left: ${({ floating, floatingStyle }) =>\r\n    floating ? floatingStyle.left || 'initial' : 'initial'};\r\n  width: ${({ width }) => width};\r\n  height: ${({ height }) => height};\r\n  z-index: 999;\r\n  transform: ${({ opened }) => (opened ? 'scale(1)' : 'scale(0)')};\r\n  transform-origin: ${({ floatingStyle }) => floatingStyle.transformOrigin || 'bottom right'};\r\n  transition: transform 0.3s ease;\r\n\r\n  @media screen and (max-width: 568px) {\r\n    border-radius: ${({ floating }) => (floating ? '0' : '')};\r\n    bottom: 0 !important;\r\n    left: initial !important;\r\n    height: 100%;\r\n    right: 0 !important;\r\n    top: initial !important;\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nChatBotContainer.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default ChatBotContainer;\r\n","import styled from 'styled-components';\r\n\r\nconst Content = styled.div`\r\n  height: calc(${props => props.height} - ${props => (props.hideInput ? '56px' : '112px')});\r\n  overflow-y: scroll;\r\n  margin-top: 2px;\r\n  padding-top: 6px;\r\n\r\n  @media screen and (max-width: 568px) {\r\n    height: ${props => (props.floating ? 'calc(100% - 112px)' : '')};\r\n  }\r\n`;\r\n\r\nexport default Content;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst Header = styled.div`\r\n  align-items: center;\r\n  background: ${({ theme }) => theme.headerBgColor};\r\n  color: ${({ theme }) => theme.headerFontColor};\r\n  display: flex;\r\n  fill: ${({ theme }) => theme.headerFontColor};\r\n  height: 56px;\r\n  justify-content: space-between;\r\n  padding: 0 10px;\r\n`;\r\n\r\nHeader.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default Header;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst HeaderTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: ${({ theme }) => theme.headerFontSize};\r\n`;\r\n\r\nHeaderTitle.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default HeaderTitle;\r\n","import styled from 'styled-components';\r\n\r\nconst HeaderIcon = styled.a`\r\n  cursor: pointer;\r\n`;\r\n\r\nexport default HeaderIcon;\r\n","import styled from 'styled-components';\r\n\r\nconst FloatButton = styled.a`\r\n  align-items: center;\r\n  cursor: pointer;\r\n  background: ${({ theme }) => theme.headerBgColor};\r\n  bottom: 32px;\r\n  border-radius: 100%;\r\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\r\n  display: flex;\r\n  fill: ${({ theme }) => theme.headerFontColor};\r\n  height: 56px;\r\n  justify-content: center;\r\n  position: fixed;\r\n  right: 32px;\r\n  transform: ${props => (props.opened ? 'scale(0)' : 'scale(1)')};\r\n  transition: transform 0.3s ease;\r\n  width: 56px;\r\n  z-index: 999;\r\n`;\r\n\r\nFloatButton.defaultProps = {\r\n  theme: {\r\n    headerBgColor: '#6e48aa',\r\n    headerFontColor: '#fff'\r\n  }\r\n};\r\n\r\nexport default FloatButton;\r\n","import styled from 'styled-components';\r\n\r\nconst FloatingIcon = styled.img`\r\n  height: 24px;\r\n  width: 24px;\r\n`;\r\n\r\nexport default FloatingIcon;\r\n","import styled from 'styled-components';\r\n\r\nconst Footer = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nexport default Footer;\r\n","import { invalidInput } from '../common/animations';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst Input = styled.input`\r\n  animation: ${props =>\r\n    props.invalid\r\n      ? css`\r\n          ${invalidInput} .2s ease\r\n        `\r\n      : ''};\r\n  border: 0;\r\n  border-radius: 0;\r\n  border-bottom-left-radius: 10px;\r\n  border-bottom-right-radius: 10px;\r\n  border-top: ${props => (props.invalid ? '0' : '1px solid #eee')};\r\n  box-shadow: ${props => (props.invalid ? 'inset 0 0 2px #E53935' : 'none')};\r\n  box-sizing: border-box;\r\n  color: ${props => (props.invalid ? '#E53935' : '')};\r\n  font-size: 16px;\r\n  opacity: ${props => (props.disabled && !props.invalid ? '.5' : '1')};\r\n  outline: none;\r\n  padding: ${props => (props.hasButton ? '16px 52px 16px 10px' : '16px 10px')};\r\n  width: 100%;\r\n  -webkit-appearance: none;\r\n\r\n  &:disabled {\r\n    background: #fff;\r\n  }\r\n\r\n  @media screen and (max-width: 568px) {\r\n    border-bottom-left-radius: ${props => (props.floating ? '0' : '10px')};\r\n    border-bottom-right-radius: ${props => (props.floating ? '0' : '10px')};\r\n  }\r\n`;\r\n\r\nexport default Input;\r\n","import styled, { css } from 'styled-components';\r\nimport defaultTheme from '../theme';\r\nimport { pulse } from '../common/animations';\r\n\r\nconst fillFunc = props => {\r\n  const { speaking, invalid, theme } = props;\r\n\r\n  if (speaking) {\r\n    return theme.headerBgColor;\r\n  }\r\n  return invalid ? '#E53935' : '#4a4a4a';\r\n};\r\n\r\nconst SubmitButton = styled.button`\r\n  background-color: transparent;\r\n  border: 0;\r\n  border-bottom-right-radius: 10px;\r\n  box-shadow: none;\r\n  cursor: ${props => (props.disabled ? 'default' : 'pointer')};\r\n  fill: ${fillFunc};\r\n  opacity: ${props => (props.disabled && !props.invalid ? '.5' : '1')};\r\n  outline: none;\r\n  padding: 14px 16px 12px 16px;\r\n  &:before {\r\n    content: '';\r\n    position: absolute;\r\n    width: 23px;\r\n    height: 23px;\r\n    border-radius: 50%;\r\n    animation: ${({ theme, speaking }) =>\r\n      speaking\r\n        ? css`\r\n            ${pulse(theme.headerBgColor)} 2s ease infinite\r\n          `\r\n        : ''};\r\n  }\r\n  &:not(:disabled):hover {\r\n    opacity: 0.7;\r\n  }\r\n`;\r\n\r\nSubmitButton.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default SubmitButton;\r\n","let instance = null;\r\n\r\nconst noop = () => {};\r\n\r\nexport default class Recognition {\r\n  static isSupported() {\r\n    return 'webkitSpeechRecognition' in window;\r\n  }\r\n\r\n  /**\r\n   * Creates an instance of Recognition.\r\n   * @param {function} [onChange] callback on change\r\n   * @param {function} [onEnd]  callback on and\r\n   * @param {function} [onStop]  callback on stop\r\n   * @param {string} [lang='en'] recognition lang\r\n   * @memberof Recognition\r\n   * @constructor\r\n   */\r\n  constructor(onChange = noop, onEnd = noop, onStop = noop, lang = 'en') {\r\n    if (!instance) {\r\n      instance = this;\r\n    }\r\n    this.state = {\r\n      inputValue: '',\r\n      lang,\r\n      onChange,\r\n      onEnd,\r\n      onStop\r\n    };\r\n\r\n    this.onResult = this.onResult.bind(this);\r\n    this.onEnd = this.onEnd.bind(this);\r\n\r\n    this.setup();\r\n\r\n    return instance;\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition change event\r\n   * @param {string} interimTranscript\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onChange(interimTranscript) {\r\n    const { onChange } = this.state;\r\n    this.setState({\r\n      inputValue: interimTranscript\r\n    });\r\n    onChange(interimTranscript);\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition change event when its final\r\n   * @param {string} finalTranscript\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onFinal(finalTranscript) {\r\n    this.setState({\r\n      inputValue: finalTranscript\r\n    });\r\n    this.recognition.stop();\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition end event\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onEnd() {\r\n    const { onStop, onEnd, force } = this.state;\r\n    this.setState({ speaking: false });\r\n    if (force) {\r\n      onStop();\r\n    } else {\r\n      onEnd();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition result event\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onResult(event) {\r\n    let interimTranscript = '';\r\n    let finalTranscript = '';\r\n\r\n    for (let i = event.resultIndex; i < event.results.length; i += 1) {\r\n      if (event.results[i].isFinal) {\r\n        finalTranscript += event.results[i][0].transcript;\r\n        this.onFinal(finalTranscript);\r\n      } else {\r\n        interimTranscript += event.results[i][0].transcript;\r\n        this.onChange(interimTranscript);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * method for updating the instance state\r\n   * @param {object} nextState\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  setState(nextState) {\r\n    this.state = Object.assign({}, this.state, nextState);\r\n  }\r\n\r\n  /**\r\n   * setup the browser recognition\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  setup() {\r\n    if (!Recognition.isSupported()) {\r\n      return this;\r\n    }\r\n\r\n    const { webkitSpeechRecognition } = window;\r\n\r\n    this.recognition = new webkitSpeechRecognition();\r\n    this.recognition.continuous = true;\r\n    this.recognition.interimResults = true;\r\n    this.recognition.lang = this.state.lang;\r\n    this.recognition.onresult = this.onResult;\r\n    this.recognition.onend = this.onEnd;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * change the recognition lang and resetup\r\n   * @param {string} lang the new lang\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  setLang(lang) {\r\n    this.setState({ lang });\r\n    this.setup();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * toggle the recognition\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  speak() {\r\n    if (!Recognition.isSupported()) {\r\n      return this;\r\n    }\r\n    const { speaking } = this.state;\r\n    if (!speaking) {\r\n      this.recognition.start();\r\n      this.setState({\r\n        speaking: true,\r\n        inputValue: ''\r\n      });\r\n    } else {\r\n      this.setState({\r\n        force: true\r\n      });\r\n      this.recognition.stop();\r\n    }\r\n    return this;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst ChatIcon = () => (\r\n  <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z\" />\r\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n  </svg>\r\n);\r\n\r\nexport default ChatIcon;\r\n","import React from 'react';\r\n\r\nconst CloseIcon = () => (\r\n  <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path\r\n      d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12\r\n      13.41 17.59 19 19 17.59 13.41 12z\"\r\n    />\r\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n  </svg>\r\n);\r\n\r\nexport default CloseIcon;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst SubmitIcon = ({ size }) => (\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width={size}\r\n    height={size}\r\n    viewBox=\"0 0 500 500\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <polygon points=\"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75\" />\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nSubmitIcon.propTypes = {\r\n  size: PropTypes.number\r\n};\r\n\r\nSubmitIcon.defaultProps = {\r\n  size: 20\r\n};\r\n\r\nexport default SubmitIcon;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst MicIcon = ({ size }) => (\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width={size}\r\n    height={size}\r\n    viewBox=\"0 0 400 400\"\r\n  >\r\n    <g>\r\n      <path d=\"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z\" />\r\n      <path d=\"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z\" />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nMicIcon.propTypes = {\r\n  size: PropTypes.number\r\n};\r\n\r\nMicIcon.defaultProps = {\r\n  size: 20\r\n};\r\n\r\nexport default MicIcon;\r\n","export const isMobile = () => /iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent);\r\n\r\nexport const isString = value => typeof value === 'string';\r\n","import { isString } from './utils';\r\n\r\nexport const getSpeakText = step => {\r\n  const { message, metadata = {} } = step;\r\n  if (isString(metadata.speak)) {\r\n    return metadata.speak;\r\n  }\r\n  if (isString(message)) {\r\n    return message;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const speakFn = speechSynthesisOptions => (step, previousValue) => {\r\n  const { lang, voice, enable } = speechSynthesisOptions;\r\n  const { user } = step;\r\n\r\n  if (!window.SpeechSynthesisUtterance || !window.speechSynthesis) {\r\n    return;\r\n  }\r\n  if (user) {\r\n    return;\r\n  }\r\n  if (!enable) {\r\n    return;\r\n  }\r\n  const text = getSpeakText(step);\r\n  const msg = new window.SpeechSynthesisUtterance();\r\n  msg.text = text.replace(/{previousValue}/g, previousValue);\r\n  msg.lang = lang;\r\n  msg.voice = voice;\r\n  window.speechSynthesis.speak(msg);\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Random from 'random-id';\r\nimport { CustomStep, OptionsStep, TextStep } from './steps_components';\r\nimport schema from './schemas/schema';\r\nimport * as storage from './storage';\r\nimport {\r\n  ChatBotContainer,\r\n  Content,\r\n  Header,\r\n  HeaderTitle,\r\n  HeaderIcon,\r\n  FloatButton,\r\n  FloatingIcon,\r\n  Footer,\r\n  Input,\r\n  SubmitButton\r\n} from './components';\r\nimport Recognition from './recognition';\r\nimport { ChatIcon, CloseIcon, SubmitIcon, MicIcon } from './icons';\r\nimport { isMobile } from './utils';\r\nimport { speakFn } from './speechSynthesis';\r\n\r\nclass ChatBot extends Component {\r\n  /* istanbul ignore next */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.content = null;\r\n    this.input = null;\r\n\r\n    this.supportsScrollBehavior = false;\r\n\r\n    this.setContentRef = element => {\r\n      this.content = element;\r\n    };\r\n\r\n    this.setInputRef = element => {\r\n      this.input = element;\r\n    };\r\n\r\n    this.state = {\r\n      renderedSteps: [],\r\n      previousSteps: [],\r\n      currentStep: {},\r\n      previousStep: {},\r\n      steps: {},\r\n      disabled: true,\r\n      opened: props.opened || !props.floating,\r\n      inputValue: '',\r\n      inputInvalid: false,\r\n      speaking: false,\r\n      recognitionEnable: props.recognitionEnable && Recognition.isSupported(),\r\n      defaultUserSettings: {}\r\n    };\r\n\r\n    this.speak = speakFn(props.speechSynthesis);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { steps } = this.props;\r\n    const {\r\n      botDelay,\r\n      botAvatar,\r\n      botName,\r\n      cache,\r\n      cacheName,\r\n      customDelay,\r\n      enableMobileAutoFocus,\r\n      userAvatar,\r\n      userDelay\r\n    } = this.props;\r\n    const chatSteps = {};\r\n\r\n    const defaultBotSettings = { delay: botDelay, avatar: botAvatar, botName };\r\n    const defaultUserSettings = {\r\n      delay: userDelay,\r\n      avatar: userAvatar,\r\n      hideInput: false,\r\n      hideExtraControl: false\r\n    };\r\n    const defaultCustomSettings = { delay: customDelay };\r\n\r\n    for (let i = 0, len = steps.length; i < len; i += 1) {\r\n      const step = steps[i];\r\n      let settings = {};\r\n\r\n      if (step.user) {\r\n        settings = defaultUserSettings;\r\n      } else if (step.message || step.asMessage) {\r\n        settings = defaultBotSettings;\r\n      } else if (step.component) {\r\n        settings = defaultCustomSettings;\r\n      }\r\n\r\n      chatSteps[step.id] = Object.assign({}, settings, schema.parse(step));\r\n    }\r\n\r\n    schema.checkInvalidIds(chatSteps);\r\n\r\n    const firstStep = steps[0];\r\n\r\n    if (firstStep.message) {\r\n      const { message } = firstStep;\r\n      firstStep.message = typeof message === 'function' ? message() : message;\r\n      chatSteps[firstStep.id].message = firstStep.message;\r\n    }\r\n\r\n    const { recognitionEnable } = this.state;\r\n    const { recognitionLang } = this.props;\r\n\r\n    if (recognitionEnable) {\r\n      this.recognition = new Recognition(\r\n        this.onRecognitionChange,\r\n        this.onRecognitionEnd,\r\n        this.onRecognitionStop,\r\n        recognitionLang\r\n      );\r\n    }\r\n\r\n    this.supportsScrollBehavior = 'scrollBehavior' in document.documentElement.style;\r\n\r\n    if (this.content) {\r\n      this.content.addEventListener('DOMNodeInserted', this.onNodeInserted);\r\n      window.addEventListener('resize', this.onResize);\r\n    }\r\n\r\n    const { currentStep, previousStep, previousSteps, renderedSteps } = storage.getData(\r\n      {\r\n        cacheName,\r\n        cache,\r\n        firstStep,\r\n        steps: chatSteps\r\n      },\r\n      () => {\r\n        // focus input if last step cached is a user step\r\n        this.setState({ disabled: false }, () => {\r\n          if (enableMobileAutoFocus || !isMobile()) {\r\n            if (this.input) {\r\n              this.input.focus();\r\n            }\r\n          }\r\n        });\r\n      }\r\n    );\r\n\r\n    this.setState({\r\n      currentStep,\r\n      defaultUserSettings,\r\n      previousStep,\r\n      previousSteps,\r\n      renderedSteps,\r\n      steps: chatSteps\r\n    });\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { opened, toggleFloating } = props;\r\n    if (toggleFloating !== undefined && opened !== undefined && opened !== state.opened) {\r\n      return {\r\n        ...state,\r\n        opened\r\n      };\r\n    }\r\n    return state;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.content) {\r\n      this.content.removeEventListener('DOMNodeInserted', this.onNodeInserted);\r\n      window.removeEventListener('resize', this.onResize);\r\n    }\r\n  }\r\n\r\n  onNodeInserted = event => {\r\n    const { currentTarget: target } = event;\r\n    const { enableSmoothScroll } = this.props;\r\n\r\n    if (enableSmoothScroll && this.supportsScrollBehavior) {\r\n      target.scroll({\r\n        top: target.scrollHeight,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    } else {\r\n      target.scrollTop = target.scrollHeight;\r\n    }\r\n  };\r\n\r\n  onResize = () => {\r\n    this.content.scrollTop = this.content.scrollHeight;\r\n  };\r\n\r\n  onRecognitionChange = value => {\r\n    this.setState({ inputValue: value });\r\n  };\r\n\r\n  onRecognitionEnd = () => {\r\n    this.setState({ speaking: false });\r\n    this.handleSubmitButton();\r\n  };\r\n\r\n  onRecognitionStop = () => {\r\n    this.setState({ speaking: false });\r\n  };\r\n\r\n  onValueChange = event => {\r\n    this.setState({ inputValue: event.target.value });\r\n  };\r\n\r\n  getTriggeredStep = (trigger, value) => {\r\n    const steps = this.generateRenderedStepsById();\r\n    return typeof trigger === 'function' ? trigger({ value, steps }) : trigger;\r\n  };\r\n\r\n  getStepMessage = message => {\r\n    const { previousSteps } = this.state;\r\n    const lastStepIndex = previousSteps.length > 0 ? previousSteps.length - 1 : 0;\r\n    const steps = this.generateRenderedStepsById();\r\n    const previousValue = previousSteps[lastStepIndex].value;\r\n    return typeof message === 'function' ? message({ previousValue, steps }) : message;\r\n  };\r\n\r\n  generateRenderedStepsById = () => {\r\n    const { previousSteps } = this.state;\r\n    const steps = {};\r\n\r\n    for (let i = 0, len = previousSteps.length; i < len; i += 1) {\r\n      const { id, message, value, metadata } = previousSteps[i];\r\n\r\n      steps[id] = {\r\n        id,\r\n        message,\r\n        value,\r\n        metadata\r\n      };\r\n    }\r\n\r\n    return steps;\r\n  };\r\n\r\n  triggerNextStep = data => {\r\n    const { enableMobileAutoFocus } = this.props;\r\n    const { defaultUserSettings, previousSteps, renderedSteps, steps } = this.state;\r\n\r\n    let { currentStep, previousStep } = this.state;\r\n    const isEnd = currentStep.end;\r\n\r\n    if (data && data.value) {\r\n      currentStep.value = data.value;\r\n    }\r\n    if (data && data.hideInput) {\r\n      currentStep.hideInput = data.hideInput;\r\n    }\r\n    if (data && data.hideExtraControl) {\r\n      currentStep.hideExtraControl = data.hideExtraControl;\r\n    }\r\n    if (data && data.trigger) {\r\n      currentStep.trigger = this.getTriggeredStep(data.trigger, data.value);\r\n    }\r\n\r\n    if (isEnd) {\r\n      this.handleEnd();\r\n    } else if (currentStep.options && data) {\r\n      const option = currentStep.options.filter(o => o.value === data.value)[0];\r\n      const trigger = this.getTriggeredStep(option.trigger, currentStep.value);\r\n      delete currentStep.options;\r\n      \r\n      // replace choose option for user message\r\n      currentStep = Object.assign({}, currentStep, option, defaultUserSettings, {\r\n        user: true,\r\n        message: option.label,\r\n        trigger\r\n      });     \r\n      renderedSteps.pop();\r\n      previousSteps.pop();\r\n      renderedSteps.push(currentStep);\r\n      previousSteps.push(currentStep);\r\n\r\n      this.setState({\r\n        currentStep,\r\n        renderedSteps,\r\n        previousSteps\r\n      });\r\n    } else if (currentStep.trigger && currentStep.replace && data) {\r\n        const trigger = this.getTriggeredStep(currentStep.trigger, currentStep.value);      \r\n        const val = currentStep.value;\r\n        const msg = data.msg;\r\n        const stepMsg = data.stepMsg;\r\n\r\n        delete currentStep.component;  \r\n        if(data.preserveMsg){\r\n          const defaultBotSettings = { delay: 0, avatar: this.props.botAvatar, botName: this.props.botName };\r\n         \r\n          const thisStepMsg = {id:currentStep.id, key: currentStep.key, msg: stepMsg, trigger: ''};\r\n          const nextS = Object.assign({}, thisStepMsg, 0, defaultBotSettings, {\r\n            user: false,\r\n            message: stepMsg,\r\n            rendered:true,\r\n            \r\n          }); \r\n          delete currentStep.component;\r\n          delete currentStep.trigger;\r\n\r\n          currentStep = Object.assign({}, currentStep, val, defaultUserSettings, {\r\n            user: true,\r\n            message: msg,\r\n            trigger: trigger,            \r\n          });\r\n          renderedSteps.pop();\r\n          previousSteps.pop();\r\n          renderedSteps.push(nextS);\r\n          previousSteps.push(nextS);\r\n          renderedSteps.push(currentStep);\r\n          previousSteps.push(currentStep);\r\n          this.setState({\r\n            currentStep,\r\n            renderedSteps,\r\n            previousSteps\r\n          });\r\n        } else {\r\n          delete currentStep.component;    \r\n          currentStep = Object.assign({}, currentStep, val, defaultUserSettings, {\r\n            user: true,\r\n            message: msg,\r\n            trigger\r\n          }); \r\n          \r\n          renderedSteps.pop();\r\n          previousSteps.pop();\r\n          renderedSteps.push(currentStep);\r\n          previousSteps.push(currentStep);\r\n          \r\n          this.setState({\r\n            currentStep,\r\n            renderedSteps,\r\n            previousSteps\r\n          });\r\n        }\r\n      } else if (currentStep.trigger) {      \r\n      \r\n       const trigger = this.getTriggeredStep(currentStep.trigger, currentStep.value);  \r\n        let nextStep = Object.assign({}, steps[trigger]);\r\n     \r\n      if (nextStep.message) {\r\n        nextStep.message = this.getStepMessage(nextStep.message);\r\n      } else if (nextStep.update) {\r\n        const updateStep = nextStep;\r\n        nextStep = Object.assign({}, steps[updateStep.update]);\r\n\r\n        if (nextStep.options) {\r\n          for (let i = 0, len = nextStep.options.length; i < len; i += 1) {\r\n            nextStep.options[i].trigger = updateStep.trigger;\r\n          }\r\n        } else {\r\n          nextStep.trigger = updateStep.trigger;\r\n        }\r\n      }\r\n\r\n      nextStep.key = Random(24);\r\n\r\n      previousStep = currentStep;\r\n      currentStep = nextStep;\r\n\r\n      this.setState({ renderedSteps, currentStep, previousStep }, () => {\r\n        if (nextStep.user) {\r\n          this.setState({ disabled: false }, () => {\r\n            if (enableMobileAutoFocus || !isMobile()) {\r\n              if (this.input) {\r\n                this.input.focus();\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          renderedSteps.push(nextStep);\r\n          previousSteps.push(nextStep);\r\n\r\n          this.setState({ renderedSteps, previousSteps });\r\n        }\r\n      });\r\n    }\r\n\r\n    const { cache, cacheName } = this.props;\r\n    if (cache) {\r\n      setTimeout(() => {\r\n        storage.setData(cacheName, {\r\n          currentStep,\r\n          previousStep,\r\n          previousSteps,\r\n          renderedSteps\r\n        });\r\n      }, 300);\r\n    }\r\n  };\r\n\r\n  handleEnd = () => {\r\n    const { handleEnd } = this.props;\r\n\r\n    if (handleEnd) {\r\n      const { previousSteps } = this.state;\r\n\r\n      const renderedSteps = previousSteps.map(step => {\r\n        const { id, message, value, metadata } = step;\r\n\r\n        return {\r\n          id,\r\n          message,\r\n          value,\r\n          metadata\r\n        };\r\n      });\r\n\r\n      const steps = [];\r\n\r\n      for (let i = 0, len = previousSteps.length; i < len; i += 1) {\r\n        const { id, message, value, metadata } = previousSteps[i];\r\n\r\n        steps[id] = {\r\n          id,\r\n          message,\r\n          value,\r\n          metadata\r\n        };\r\n      }\r\n\r\n      const values = previousSteps.filter(step => step.value).map(step => step.value);\r\n\r\n      handleEnd({ renderedSteps, steps, values });\r\n    }\r\n  };\r\n\r\n  isInputValueEmpty = () => {\r\n    const { inputValue } = this.state;\r\n    return !inputValue || inputValue.length === 0;\r\n  };\r\n\r\n  isLastPosition = step => {\r\n    const { renderedSteps } = this.state;\r\n    const { length } = renderedSteps;\r\n    const stepIndex = renderedSteps.map(s => s.key).indexOf(step.key);\r\n\r\n    if (length <= 1 || stepIndex + 1 === length) {\r\n      return true;\r\n    }\r\n\r\n    const nextStep = renderedSteps[stepIndex + 1];\r\n    const hasMessage = nextStep.message || nextStep.asMessage;\r\n\r\n    if (!hasMessage) {\r\n      return true;\r\n    }\r\n\r\n    const isLast = step.user !== nextStep.user;\r\n    return isLast;\r\n  };\r\n\r\n  isFirstPosition = step => {\r\n    const { renderedSteps } = this.state;\r\n    const stepIndex = renderedSteps.map(s => s.key).indexOf(step.key);\r\n\r\n    if (stepIndex === 0) {\r\n      return true;\r\n    }\r\n\r\n    const lastStep = renderedSteps[stepIndex - 1];\r\n    const hasMessage = lastStep.message || lastStep.asMessage;\r\n\r\n    if (!hasMessage) {\r\n      return true;\r\n    }\r\n\r\n    const isFirst = step.user !== lastStep.user;\r\n    return isFirst;\r\n  };\r\n\r\n  handleKeyPress = event => {\r\n    if (event.key === 'Enter') {\r\n      this.submitUserMessage();\r\n    }\r\n  };\r\n\r\n  handleSubmitButton = () => {\r\n    const { speaking, recognitionEnable } = this.state;\r\n\r\n    if ((this.isInputValueEmpty() || speaking) && recognitionEnable) {\r\n      this.recognition.speak();\r\n      if (!speaking) {\r\n        this.setState({ speaking: true });\r\n      }\r\n      return;\r\n    }\r\n\r\n    this.submitUserMessage();\r\n  };\r\n\r\n  submitUserMessage = () => {\r\n    const { defaultUserSettings, inputValue, previousSteps, renderedSteps } = this.state;\r\n    let { currentStep } = this.state;\r\n\r\n    const isInvalid = currentStep.validator && this.checkInvalidInput();\r\n\r\n    if (!isInvalid) {\r\n      const step = {\r\n        message: inputValue,\r\n        value: inputValue\r\n      };\r\n\r\n      currentStep = Object.assign({}, defaultUserSettings, currentStep, step);\r\n\r\n      renderedSteps.push(currentStep);\r\n      previousSteps.push(currentStep);\r\n\r\n      this.setState(\r\n        {\r\n          currentStep,\r\n          renderedSteps,\r\n          previousSteps,\r\n          disabled: true,\r\n          inputValue: ''\r\n        },\r\n        () => {\r\n          if (this.input) {\r\n            this.input.blur();\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  checkInvalidInput = () => {\r\n    const { enableMobileAutoFocus } = this.props;\r\n    const { currentStep, inputValue } = this.state;\r\n    const result = currentStep.validator(inputValue);\r\n    const value = inputValue;\r\n\r\n    if (typeof result !== 'boolean' || !result) {\r\n      this.setState(\r\n        {\r\n          inputValue: result.toString(),\r\n          inputInvalid: true,\r\n          disabled: true\r\n        },\r\n        () => {\r\n          setTimeout(() => {\r\n            this.setState(\r\n              {\r\n                inputValue: value,\r\n                inputInvalid: false,\r\n                disabled: false\r\n              },\r\n              () => {\r\n                if (enableMobileAutoFocus || !isMobile()) {\r\n                  if (this.input) {\r\n                    this.input.focus();\r\n                  }\r\n                }\r\n              }\r\n            );\r\n          }, 2000);\r\n        }\r\n      );\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  toggleChatBot = opened => {\r\n    const { toggleFloating } = this.props;\r\n\r\n    if (toggleFloating) {\r\n      toggleFloating({ opened });\r\n    } else {\r\n      this.setState({ opened });\r\n    }\r\n  };\r\n\r\n  renderStep = (step, index) => {\r\n    const { renderedSteps } = this.state;\r\n    const {\r\n      avatarStyle,\r\n      bubbleStyle,\r\n      bubbleOptionStyle,\r\n      customStyle,\r\n      hideBotAvatar,\r\n      hideUserAvatar,\r\n      speechSynthesis\r\n    } = this.props;\r\n    const { options, component, asMessage } = step;\r\n    const steps = this.generateRenderedStepsById();\r\n    const previousStep = index > 0 ? renderedSteps[index - 1] : {};\r\n\r\n    if (component && !asMessage) {\r\n      return (\r\n        <CustomStep\r\n          key={index}\r\n          speak={this.speak}\r\n          step={step}\r\n          steps={steps}\r\n          style={customStyle}\r\n          previousStep={previousStep}\r\n          previousValue={previousStep.value}\r\n          triggerNextStep={this.triggerNextStep}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (options) {\r\n      return (\r\n        <OptionsStep\r\n          key={index}\r\n          step={step}\r\n          previousValue={previousStep.value}\r\n          triggerNextStep={this.triggerNextStep}\r\n          bubbleOptionStyle={bubbleOptionStyle}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <TextStep\r\n        key={index}\r\n        step={step}\r\n        steps={steps}\r\n        speak={this.speak}\r\n        previousStep={previousStep}\r\n        previousValue={previousStep.value}\r\n        triggerNextStep={this.triggerNextStep}\r\n        avatarStyle={avatarStyle}\r\n        bubbleStyle={bubbleStyle}\r\n        hideBotAvatar={hideBotAvatar}\r\n        hideUserAvatar={hideUserAvatar}\r\n        speechSynthesis={speechSynthesis}\r\n        isFirst={this.isFirstPosition(step)}\r\n        isLast={this.isLastPosition(step)}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      currentStep,\r\n      disabled,\r\n      inputInvalid,\r\n      inputValue,\r\n      opened,\r\n      renderedSteps,\r\n      speaking,\r\n      recognitionEnable\r\n    } = this.state;\r\n    const {\r\n      className,\r\n      contentStyle,\r\n      extraControl,\r\n      controlStyle,\r\n      floating,\r\n      floatingIcon,\r\n      floatingStyle,\r\n      footerStyle,\r\n      headerComponent,\r\n      headerTitle,\r\n      hideHeader,\r\n      hideSubmitButton,\r\n      inputStyle,\r\n      placeholder,\r\n      inputAttributes,\r\n      recognitionPlaceholder,\r\n      style,\r\n      submitButtonStyle,\r\n      width,\r\n      height\r\n    } = this.props;\r\n\r\n    const header = headerComponent || (\r\n      <Header className=\"rsc-header\">\r\n        <HeaderTitle className=\"rsc-header-title\">{headerTitle}</HeaderTitle>\r\n        {floating && (\r\n          <HeaderIcon className=\"rsc-header-close-button\" onClick={() => this.toggleChatBot(false)}>\r\n            <CloseIcon />\r\n          </HeaderIcon>\r\n        )}\r\n      </Header>\r\n    );\r\n\r\n    let customControl;\r\n    if (extraControl !== undefined) {\r\n      customControl = React.cloneElement(extraControl, {\r\n        disabled,\r\n        speaking,\r\n        invalid: inputInvalid\r\n      });\r\n    }\r\n\r\n    const icon =\r\n      (this.isInputValueEmpty() || speaking) && recognitionEnable ? <MicIcon /> : <SubmitIcon />;\r\n\r\n    const inputPlaceholder = speaking\r\n      ? recognitionPlaceholder\r\n      : currentStep.placeholder || placeholder;\r\n\r\n    const inputAttributesOverride = currentStep.inputAttributes || inputAttributes;\r\n\r\n    return (\r\n      <div className={`rsc ${className}`}>\r\n        {floating && (\r\n          <FloatButton\r\n            className=\"rsc-float-button\"\r\n            style={floatingStyle}\r\n            opened={opened}\r\n            onClick={() => this.toggleChatBot(true)}\r\n          >\r\n            {typeof floatingIcon === 'string' ? <FloatingIcon src={floatingIcon} /> : floatingIcon}\r\n          </FloatButton>\r\n        )}\r\n        <ChatBotContainer\r\n          className=\"rsc-container\"\r\n          floating={floating}\r\n          floatingStyle={floatingStyle}\r\n          opened={opened}\r\n          style={style}\r\n          width={width}\r\n          height={height}\r\n        >\r\n          {!hideHeader && header}\r\n          <Content\r\n            className=\"rsc-content\"\r\n            ref={this.setContentRef}\r\n            floating={floating}\r\n            style={contentStyle}\r\n            height={height}\r\n            hideInput={currentStep.hideInput}\r\n          >\r\n            {renderedSteps.map(this.renderStep)}\r\n          </Content>\r\n          <Footer className=\"rsc-footer\" style={footerStyle}>\r\n            {!currentStep.hideInput && (\r\n              <Input\r\n                type=\"textarea\"\r\n                style={inputStyle}\r\n                ref={this.setInputRef}\r\n                className=\"rsc-input\"\r\n                placeholder={inputInvalid ? '' : inputPlaceholder}\r\n                onKeyPress={this.handleKeyPress}\r\n                onChange={this.onValueChange}\r\n                value={inputValue}\r\n                floating={floating}\r\n                invalid={inputInvalid}\r\n                disabled={disabled}\r\n                hasButton={!hideSubmitButton}\r\n                {...inputAttributesOverride}\r\n              />\r\n            )}\r\n            <div style={controlStyle} className=\"rsc-controls\">\r\n              {!currentStep.hideInput && !currentStep.hideExtraControl && customControl}\r\n              {!currentStep.hideInput && !hideSubmitButton && (\r\n                <SubmitButton\r\n                  className=\"rsc-submit-button\"\r\n                  style={submitButtonStyle}\r\n                  onClick={this.handleSubmitButton}\r\n                  invalid={inputInvalid}\r\n                  disabled={disabled}\r\n                  speaking={speaking}\r\n                >\r\n                  {icon}\r\n                </SubmitButton>\r\n              )}\r\n            </div>\r\n          </Footer>\r\n        </ChatBotContainer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChatBot.propTypes = {\r\n  avatarStyle: PropTypes.objectOf(PropTypes.any),\r\n  botAvatar: PropTypes.string,\r\n  botName: PropTypes.string,\r\n  botDelay: PropTypes.number,\r\n  bubbleOptionStyle: PropTypes.objectOf(PropTypes.any),\r\n  bubbleStyle: PropTypes.objectOf(PropTypes.any),\r\n  cache: PropTypes.bool,\r\n  cacheName: PropTypes.string,\r\n  className: PropTypes.string,\r\n  contentStyle: PropTypes.objectOf(PropTypes.any),\r\n  customDelay: PropTypes.number,\r\n  customStyle: PropTypes.objectOf(PropTypes.any),\r\n  controlStyle: PropTypes.objectOf(PropTypes.any),\r\n  enableMobileAutoFocus: PropTypes.bool,\r\n  enableSmoothScroll: PropTypes.bool,\r\n  extraControl: PropTypes.objectOf(PropTypes.element),\r\n  floating: PropTypes.bool,\r\n  floatingIcon: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\r\n  floatingStyle: PropTypes.objectOf(PropTypes.any),\r\n  footerStyle: PropTypes.objectOf(PropTypes.any),\r\n  handleEnd: PropTypes.func,\r\n  headerComponent: PropTypes.element,\r\n  headerTitle: PropTypes.string,\r\n  height: PropTypes.string,\r\n  hideBotAvatar: PropTypes.bool,\r\n  hideHeader: PropTypes.bool,\r\n  hideSubmitButton: PropTypes.bool,\r\n  hideUserAvatar: PropTypes.bool,\r\n  inputAttributes: PropTypes.objectOf(PropTypes.any),\r\n  inputStyle: PropTypes.objectOf(PropTypes.any),\r\n  opened: PropTypes.bool,\r\n  toggleFloating: PropTypes.func,\r\n  placeholder: PropTypes.string,\r\n  recognitionEnable: PropTypes.bool,\r\n  recognitionLang: PropTypes.string,\r\n  recognitionPlaceholder: PropTypes.string,\r\n  speechSynthesis: PropTypes.shape({\r\n    enable: PropTypes.bool,\r\n    lang: PropTypes.string,\r\n    voice:\r\n      typeof window !== 'undefined'\r\n        ? PropTypes.instanceOf(window.SpeechSynthesisVoice)\r\n        : PropTypes.any\r\n  }),\r\n  steps: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  style: PropTypes.objectOf(PropTypes.any),\r\n  submitButtonStyle: PropTypes.objectOf(PropTypes.any),\r\n  userAvatar: PropTypes.string,\r\n  userDelay: PropTypes.number,\r\n  width: PropTypes.string\r\n};\r\n\r\nChatBot.defaultProps = {\r\n  avatarStyle: {},\r\n  botDelay: 1000,\r\n  botName: 'The bot',\r\n  bubbleOptionStyle: {},\r\n  bubbleStyle: {},\r\n  cache: false,\r\n  cacheName: 'rsc_cache',\r\n  className: '',\r\n  contentStyle: {},\r\n  customStyle: {},\r\n  controlStyle: { position: 'absolute', right: '0', top: '0' },\r\n  customDelay: 1000,\r\n  enableMobileAutoFocus: false,\r\n  enableSmoothScroll: false,\r\n  extraControl: undefined,\r\n  floating: false,\r\n  floatingIcon: <ChatIcon />,\r\n  floatingStyle: {},\r\n  footerStyle: {},\r\n  handleEnd: undefined,\r\n  headerComponent: undefined,\r\n  headerTitle: 'Chat',\r\n  height: '520px',\r\n  hideBotAvatar: false,\r\n  hideHeader: false,\r\n  hideSubmitButton: false,\r\n  hideUserAvatar: false,\r\n  inputStyle: {},\r\n  opened: undefined,\r\n  placeholder: 'Type the message ...',\r\n  inputAttributes: {},\r\n  recognitionEnable: false,\r\n  recognitionLang: 'en',\r\n  recognitionPlaceholder: 'Listening ...',\r\n  speechSynthesis: {\r\n    enable: false,\r\n    lang: 'en',\r\n    voice: null\r\n  },\r\n  style: {},\r\n  submitButtonStyle: {},\r\n  toggleFloating: undefined,\r\n  userDelay: 1000,\r\n  width: '350px',\r\n  botAvatar:\r\n    \"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e\",\r\n  userAvatar:\r\n    \"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e\"\r\n};\r\n\r\nexport default ChatBot;\r\n","import { stringify, parse } from 'flatted/cjs'\r\n\r\n/* istanbul ignore next */\r\nconst getData = (params, callback) => {\r\n  const { cacheName, cache, firstStep, steps } = params;\r\n  const currentStep = firstStep;\r\n  const renderedSteps = [steps[currentStep.id]];\r\n  const previousSteps = [steps[currentStep.id]];\r\n  const previousStep = {};\r\n  const unParsedCache = localStorage.getItem(cacheName);\r\n\r\n  if (cache && unParsedCache) {\r\n    try {\r\n      const data = parse(unParsedCache);\r\n      const lastStep = data.renderedSteps[data.renderedSteps.length - 1];\r\n\r\n      if (lastStep && lastStep.end) {\r\n        localStorage.removeItem(cacheName);\r\n      } else {\r\n        for (let i = 0, len = data.renderedSteps.length; i < len; i += 1) {\r\n          const renderedStep = data.renderedSteps[i];\r\n          // remove delay of cached rendered steps\r\n          data.renderedSteps[i].delay = 0;\r\n          // flag used to avoid call triggerNextStep in cached rendered steps\r\n          data.renderedSteps[i].rendered = true;\r\n\r\n          // an error is thrown when render a component from localStorage.\r\n          // So it's necessary reassing the component\r\n          if (renderedStep.component) {\r\n            const { id } = renderedStep;\r\n            data.renderedSteps[i].component = steps[id].component;\r\n          }\r\n        }\r\n\r\n        const { trigger, end, options } = data.currentStep;\r\n        const { id } = data.currentStep;\r\n\r\n        if (options) {\r\n          delete data.currentStep.rendered;\r\n        }\r\n\r\n        // add trigger function to current step\r\n        if (!trigger && !end) {\r\n          if (options) {\r\n            for (let i = 0; i < options.length; i += 1) {\r\n              data.currentStep.options[i].trigger = steps[id].options[i].trigger;\r\n            }\r\n          } else {\r\n            data.currentStep.trigger = steps[id].trigger;\r\n          }\r\n        }\r\n\r\n        // execute callback function to enable input if last step is\r\n        // waiting user type\r\n        if (data.currentStep.user) {\r\n          callback();\r\n        }\r\n\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.info(`Unable to parse cache named:${cacheName}. \\nThe cache where probably created with an older version of react-simple-chatbot.\\n`, error);\r\n    }\r\n  }\r\n\r\n  return {\r\n    currentStep,\r\n    previousStep,\r\n    previousSteps,\r\n    renderedSteps\r\n  };\r\n};\r\n\r\n/* istanbul ignore next */\r\nconst setData = (cacheName, cachedData) => {\r\n  const data = parse(stringify(cachedData));\r\n  // clean components\r\n  for (const key in data) {\r\n    for (let i = 0, len = data[key].length; i < len; i += 1) {\r\n      if (data[key][i].component) {\r\n        data[key][i].component = data[key][i].id;\r\n      }\r\n    }\r\n  }\r\n\r\n  localStorage.setItem(cacheName, stringify(data));\r\n};\r\n\r\nexport { getData, setData };\r\n","import React from 'react';\r\nfunction StepFactory(props) {\r\n  const stepInfo = props.stepInfo;\r\n  const curType = stepInfo.current.type;\r\n  const isSpecial = curType==='special';\r\n  const controls = isSpecial?BuildSpecialStep(stepInfo.current,stepInfo.prev):getCtrls(stepInfo);\r\n  const stepMsg = controls.stepMsg.replace(\"{0}\",stepInfo.stepMsg)\r\n  const displayMsg = <div className=\"orderStepMsg\">{stepMsg}</div>;\r\n  const stepContents = props.stepContents!==''?BuildContents(props):<div></div>;\r\n  const controlArray = <ControlArray stepMsg={stepMsg} stepCtrls={controls.stepCtrls} onTrigger={props.onTrigger}/>\r\n  const stepClassName = `orderStep`;\r\n  return (\r\n    <div className={stepClassName}>\r\n      {displayMsg}\r\n      {stepContents}\r\n      {controlArray}\r\n    </div>\r\n  ) \r\n}\r\nfunction BuildContents(props){\r\n  const contents = {cName:'', retArray:[]}\r\n  switch(props.stepInfo.stepContents.type){\r\n    case 'review':\r\n      contents.cName = 'reviewList'\r\n      contents.retArray = ReviewMsgArray(props)\r\n      break;\r\n    case 'simple':\r\n      contents.cName = 'simpleList'\r\n      contents.retArray = SimpleItemArray(props)\r\n      break;    \r\n    case 'multi':\r\n      contents.cName = 'multiList'\r\n      contents.retArray = MultiRowArray(props)\r\n      break;    \r\n    default:\r\n  }\r\n  return (<div className={contents.cName}>{contents.retArray}</div>)\r\n}\r\nfunction ReviewMsgArray(props){\r\n  const msgs = [].concat(props.stepInfo.stepContents.contents);\r\n  return (\r\n    msgs.map((m)=>{\r\n      return (<div className=\"reviewItem\">{m}</div>)\r\n    })\r\n  )\r\n}\r\n\r\nfunction SimpleItemArray(props){\r\n  const contents = props.stepInfo.stepContents.contents;\r\n  const elements = contents.elements;  \r\n  const hasMulti = contents.hasMulti;  \r\n  const click = props.onSelect;\r\n  const sel = props.selected;\r\n  const retArray = elements.map((e)=>{ \r\n    const capt = e.btnCapt;\r\n    const key = e.listKey;\r\n    const val = {itemInfo:e.itemInfo, multi:hasMulti};\r\n    const i = sel.findIndex(p=>p===key)\r\n    const eleClass = i===-1?(capt===''?'btn-hide':key):'btn-select';          \r\n    return (\r\n      <li key={key} className={eleClass}>\r\n        <button className=\"menuBtn\" onClick={()=> {return click(val)}}>{capt}</button>\r\n      </li>\r\n    )\r\n  })\r\n  return (\r\n    <ul className=\"simpleMenu\">\r\n      {retArray}\r\n    </ul>\r\n  )\r\n}\r\nfunction MultiRowArray(props){\r\n  const contents = props.stepInfo.stepContents.contents;\r\n  const elements = contents.elements;  \r\n  const hasMulti = contents.hasMulti; ;  \r\n  const click = props.onSelect;\r\n  const sel = props.selected;\r\n  const retArray = elements.map((e)=>{\r\n    const rowName = e.name;\r\n    const rowClass = e.rClass;\r\n    const rowKey = `${rowClass}-${rowName}`;\r\n    const halfBtns = e.btns.filter((b)=> b.btnType==='half');\r\n    const qtyBtns = e.btns.filter((b)=> b.btnType==='qty');\r\n    const halfRow = halfBtns.length===0?null:<ul className=\"halfBtns\">{BtnArray(halfBtns, sel, click, hasMulti)}</ul>\r\n    const qtyRow = qtyBtns.length===0?null:<ul className=\"qtyBtns\">{BtnArray(qtyBtns, sel, click, hasMulti)}</ul>\r\n    return (\r\n      <div className=\"menuEleRow\" key={rowKey}>                  \r\n        <ul className=\"rowBtns\">\r\n          <div className=\"rowTitle\">{rowName}</div>            \r\n          {halfRow}\r\n          {qtyRow}\r\n        </ul>        \r\n      </div>\r\n    )\r\n  })\r\n  return (\r\n    <ul className=\"multiRowMenu\">\r\n      {retArray}\r\n    </ul>\r\n  )\r\n}\r\nfunction BtnArray(btns, sel, click, hasMulti){  \r\n  const rowBtns = btns.map((b)=>{       \r\n    const key = b.listKey;\r\n    const i = sel.findIndex(p=>p===key)\r\n    const capt =b.btnCapt;        \r\n    const val = {itemInfo:b.itemInfo, multi:hasMulti};\r\n    const eleClass =  i===-1?b.btnClass:`btn-select`;            \r\n    return (\r\n      <li key={key} className={eleClass}>\r\n        <button className=\"menuBtn\" onClick={()=> {return click(val)}}>{capt}</button>\r\n      </li>\r\n    )\r\n  });\r\n  return rowBtns\r\n}\r\nfunction ControlArray(props){\r\n  const stepControls = props.stepCtrls.map((s)=>{\r\n    if(s===null) return null;\r\n    const capt = s.btnCapt;\r\n    //const listClass = s.btnClass;\r\n    const btnClass = `${s.btnCat}`\r\n    const key = s.listKey;    \r\n    s.stepMsg = props.stepMsg;\r\n    return (\r\n      <li key={key}>\r\n        <button className={btnClass} onClick={()=> {return props.onTrigger(s)}}>{capt}</button>\r\n      </li>\r\n    )\r\n  })\r\n  return(\r\n    <div className=\"btnNavigationArray\">\r\n      <ul className=\"btnCtrlList\">\r\n        {stepControls}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\nfunction GetStepMsg(step){\r\n  switch(step){\r\n    case 'edit':\r\n      return '{0}';\r\n    case 'review':\r\n      return 'Please {0} and select an option below:'\r\n    default:\r\n      return '{0}'\r\n  }\r\n}\r\nfunction getCtrls(stepInfo){\r\n  const owner = stepInfo.current;\r\n  const next = stepInfo.next;\r\n  const prev = stepInfo.prev;\r\n  const isRetRevO = stepInfo.isRetRevO;\r\n  const hasRemoveSpecial = (owner.type==='menu'||((owner.type==='edit'||owner.type==='review')&&owner.name==='pizza'))?true:false;  \r\n  const isFinalReview = (owner.type==='review'&&owner.name==='order')?true:false;  \r\n  const revS = [[owner.type==='menu'?'Discard pizza':'Remove this pizza', owner,{type:'special', name:'remove'}]];\r\n  const comp = [['Complete Order', owner, {type:'special', name:'complete'}]];\r\n  const chng = [[\"Change Name\", owner, {type:'change', name:'name'}]];\r\n  const cancel = [['Cancel order', owner, {type:'special', name:'cancel'}]];\r\n  let ctrlArry =[];\r\n  if(owner.type==='menu'){\r\n    const a = next.type==='menu'?next:{type:'inst', name:'specialinstmsg'}\r\n    ctrlArry = ctrlArry.concat([[next.type==='menu'?`Next Step(${next.name})`:'Next Step(Special Instructions)', owner, a]]);\r\n    ctrlArry = ctrlArry.concat([[prev.type==='menu'?`Prev Step(${prev.name})`:'Prev Step(Order Name)', owner, prev]]);\r\n  } else if(owner.type==='edit'){\r\n    if(owner.name==='pizza'){      \r\n      const a = next.map((i)=>{\r\n        return [[`Edit ${i}`, owner, {name:i, type:'edit'}]]\r\n      })\r\n      ctrlArry = ctrlArry.concat(a);\r\n      ctrlArry = ctrlArry.concat(['Edit Special Instructions', owner, {type:'inst', name:'specialinstmsg'}]);\r\n      ctrlArry = ctrlArry.concat([['Finished Editing', owner, isRetRevO?{name:'order',type:'review'}:{name:'pizza',type:'review'}]]);\r\n    } else {\r\n      ctrlArry = ctrlArry.concat([['Save Changes', owner, {name:'save', type:'edit'}]]);\r\n      ctrlArry = ctrlArry.concat([['Discard Changes', owner, {name:'drop', type:'edit'}]]);\r\n    }\r\n  } else if(owner.type==='review'){\r\n    if(owner.name==='pizza'){\r\n      ctrlArry = ctrlArry.concat([['Edit this Pizza', owner, {name:'pizza', type:'edit'}]]);\r\n      ctrlArry = ctrlArry.concat([['Add a Pizza', owner, {name:'new', type:'new'}]]);\r\n      ctrlArry = ctrlArry.concat([['Go to Final Review', owner, {name:'order', type:'review'}]]);\r\n    } else {\r\n      const a = next.map((i)=>{\r\n        return [`Edit Pizza ${i}`, owner, {name:i, type:'edit'}, 'goto']\r\n      })\r\n      ctrlArry = ctrlArry.concat(a);\r\n      ctrlArry = ctrlArry.concat([['Add another Pizza', owner, {name:'new', type:'new'}]]);\r\n    }  \r\n  }\r\n  ctrlArry =hasRemoveSpecial?ctrlArry.concat(revS):ctrlArry;\r\n  ctrlArry =isFinalReview?ctrlArry.concat(comp,chng):ctrlArry;\r\n  ctrlArry = ctrlArry.concat(cancel);\r\n  const ctrlVals = ctrlArry.map((i)=>{\r\n      return buildCtrlObj(i[0],i[1],i[2]);\r\n    });  \r\n  return({\r\n    stepMsg:GetStepMsg(owner.name),    \r\n    stepCtrls:ctrlVals,\r\n  })\r\n}\r\nfunction buildCtrlObj(btnCapt, owner, target){      \r\n  const ctrlType = target.type==='special'?'warn':'ctrl'\r\n  return ({\r\n    btnClass: `btn-${ctrlType}`,\r\n    btnCat: `btn-${ctrlType}`,\r\n    btnCapt: btnCapt,\r\n    listKey: `(${owner.type}:${owner.name})=>(${target.type}:${target.name})`,\r\n    owner: owner,\r\n    target: target,          \r\n  }) \r\n}\r\nfunction BuildSpecialStep(step, prev){ \r\n  const vals = (t,p)=> {\r\n    switch(t.type){\r\n      case 'remove':\r\n        return removeCtrl(t,p);\r\n      case 'cancel':\r\n        return cancelCtrl(t,p);\r\n      case 'complete':\r\n        return compCtrl(t,p);\r\n      case 'change':\r\n        return changeCtrl(t,p)\r\n      default:\r\n        return ''\r\n    }\r\n  }\r\n  const ctrlVals = vals(step,prev);\r\n  return({\r\n    stepMsg:ctrlVals.msg,    \r\n    stepCtrls:ctrlVals.ctrls,\r\n  })\r\n}\r\nconst cancelCtrl = (t,p)=>{\r\n  const msg ='Do you really want to cancel this order?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, go to main page',t,'cancel','mainpage'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, go to the store selection page',t,'cancel','storeselect'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, restart this order',t,'cancel','restart'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst compCtrl = (t,p)=>{\r\n  const msg ='Complete this order and go to payment & confirmation?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'complete','order'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst changeCtrl = (t,p)=>{\r\n  const msg ='Do you really want to change the name for this order?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'change','name'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst removeCtrl = (t,p) =>{\r\n  const pType = p.type;\r\n  const msg = pType==='menu'?'Are you sure you want to discard this pizza?':'Do you really want to remove this pizza?';\r\n  let ctrls = [];\r\n  if(pType==='menu'){\r\n    ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes-start over',t,'remove','restart'));\r\n  }\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'remove','revieworder'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nfunction buildConfirmationCtrl(type, label, owner, tarType, tarName){\r\n  const ctrlType = type==='yes'?'warn':'ctrl';   \r\n  return ({\r\n    btnClass: `btn-${ctrlType}`,\r\n    btnCapt: label,\r\n    btnCat: `btn-${ctrlType}`,\r\n    listKey: `(${owner})=>(${tarType}:${tarName})`,\r\n    owner: owner,\r\n    target: {type:tarType, name:tarName},      \r\n  })\r\n}\r\nexport default StepFactory;","import Menu from './pizzaMenu.json';\r\nclass itemMenu{\r\n  constructor(){\r\n    this.menu = Menu;\r\n    \r\n    const arr = function(obj) {      \r\n      let x;\r\n      let ret = [];\r\n      for (x in obj){\r\n        ret = ret.concat(x); \r\n      }\r\n      return ret;\r\n    };    \r\n    this.menuSteps = arr(this.menu.menuSteps);         \r\n  }\r\n\r\n  get MenuSteps(){\r\n    return this.menuSteps;\r\n  }\r\n  GetItemName(type,id){\r\n    const items = this.menu.menuSteps[type];\r\n    const val = items.values.find((i)=>i.id===id);\r\n    return val.name;\r\n  }\r\n  GetItemID(type,name){\r\n    const items = this.menu.menuSteps[type];\r\n    const val = items.values.find((i)=>i.name===name)\r\n    return val.id;\r\n  }\r\n  GetOptMsg(type, id){\r\n    //if(id==='0') return '';\r\n    const items = this.menu.options[type];\r\n    const val = items.find((i)=>i.id===id)\r\n    return val.name;\r\n  }\r\n  getStepMessage(step){\r\n    if(this.getHasMultipleSelect(step)){\r\n     return `Please select the combination of ${step} you would like on the pizza`;\r\n    } else {\r\n      let single = step.substring(0,step.length-1);\r\n      return `Please select a ${single} for the pizza`;\r\n    }\r\n  }\r\n  getContentType(step){\r\n    if( this.getHasQty(step)|| this.getHasHalf(step)){\r\n      return 'multi';\r\n    } else {\r\n      return 'simple';\r\n    }\r\n  }\r\n  getStepElements(step){    \r\n    if(this.menuSteps.findIndex(s => s === step)===-1) return null;    \r\n    if( this.getHasQty(step)|| this.getHasHalf(step)){\r\n     return this.buildMultRowStep(step,this.getHasHalf(step),this.getHasQty(step));\r\n    } else {\r\n      return this.buildSimpleStep(step);\r\n    }\r\n  }\r\n  getNext(step){\r\n    const i = this.menuSteps.findIndex(s => s === step)\r\n    return this.getStep(i+1);\r\n  }\r\n  getPrev(step){\r\n    const i = this.menuSteps.findIndex(s => s === step)\r\n    return this.getStep(i-1);\r\n  }\r\n  getStep(i){\r\n    if(i>=this.menuSteps.length){      \r\n      return 'EOM';\r\n    } else if(i<0){\r\n      return 'BOM';\r\n    } else {     \r\n      return this.menuSteps[i];      \r\n    }   \r\n  } \r\n  buildMultRowStep(step, hasHalf, hasQty){\r\n    const items = this.getItemsList(step);\r\n    const itemArry = items.map((i)=> {\r\n      const id = i.id;\r\n      const name = i.name;\r\n      let btns = [];\r\n      if(hasHalf){\r\n        const b = this.buildOptBtns(step, 'half', id);\r\n        btns = btns.concat(b);\r\n      }\r\n      if(hasQty){\r\n        const b = this.buildOptBtns(step, 'qty', id);\r\n        btns = btns.concat(b);\r\n      }\r\n      const itemRow = {\r\n        name:name,\r\n        rClass: `row-item`,\r\n        btns: btns,\r\n      };\r\n      return itemRow;\r\n    })\r\n    return itemArry;\r\n  }\r\n  buildSimpleStep(step){\r\n    const items = this.getItemsList(step);\r\n    const itemArry = items.map((i)=> {   \r\n      const btn = {\r\n        btnClass:'btn-item',\r\n        btnCapt:i.name,\r\n        listKey:`${step}-${i.id}`,\r\n        btnMsg:i.name,\r\n        itemInfo: {\r\n          item:step,\r\n          id:i.id,          \r\n        },        \r\n      };\r\n      return btn;\r\n    })\r\n    return itemArry;\r\n  }\r\n  buildOptBtns(step, opt, itemID){ \r\n    const optList = this.getOptsList(opt);    \r\n    const btnArry = optList.map((o)=> {\r\n      const itemInfo= {\r\n        item:step,\r\n        id:itemID,\r\n        [opt]:o.id,\r\n      };\r\n      const btn = {\r\n        btnClass:`btn-${opt}-${o.class}`,\r\n        btnCapt: o.short,\r\n        listKey:`${step}-${itemID}-${opt}-${o.id}`,\r\n        btnMsg:o.name,\r\n        btnType: opt,\r\n        itemInfo: itemInfo,\r\n      };\r\n      return btn;\r\n    })\r\n    return btnArry;\r\n  }\r\n  getItemsList(step){\r\n    const obj = this.menu.menuSteps[step];\r\n    const ret = obj.values;\r\n    return ret;\r\n  }  \r\n  getHasSizes(step){\r\n    const obj = this.menu.menuSteps[step];\r\n    const ret = obj.sizes;\r\n    return ret;\r\n  }\r\n  getHasQty(step){\r\n    const obj = this.menu.menuSteps[step];\r\n    const ret = obj.qty;\r\n    return ret;\r\n  }\r\n  getHasHalf(step){\r\n    const obj = this.menu.menuSteps[step];\r\n    const ret = obj.half;\r\n    return ret;\r\n  }\r\n  getHasMultipleSelect(step){\r\n    const obj = this.menu.menuSteps[step];\r\n    const ret = obj.multiple;\r\n    return ret;\r\n  }\r\n  getOptsList(opt){\r\n    const obj = this.menu.options[opt];    \r\n    return obj;\r\n  }\r\n}\r\n\r\n\r\nexport default itemMenu;","import React from 'react';\r\n\r\nfunction Summary(props){\r\n  const isFinal = props.hasOwnProperty('name');\r\n  if(isFinal){\r\n    return finalO(props)\r\n  } else{\r\n    return single(props)\r\n  }\r\n}\r\n\r\nfunction single(props){  \r\n  const sum = `Pizza #${props.id} Summary`\r\n  const sumCl =`summary-${props.id}`;\r\n  let x = 0\r\n  const rows = props.table.map((i)=>{x++; return pizzaMsg(i,x)})\r\n  return(\r\n    <table>\r\n      <thead className={sumCl}><tr><th colSpan=\"2\">{sum}</th></tr></thead>\r\n      <tbody>\r\n        {rows}\r\n        <tr><td colSpan=\"2\">Special Instructions:</td></tr>\r\n        <tr><td colSpan=\"2\">{props.specInst}</td></tr>\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\nfunction finalO(props){\r\n  const name = props.name;\r\n  const cnt = props.cnt;\r\n  const tables = props.tables.map((p)=>{return single(p)});\r\n  const msg1 = <div className=\"reviewH\">{`Order summary for ${name}`}</div>;\r\n  const msg2 = <div className=\"reviewH\">{`There are ${cnt} pizzas in this order`}</div>;\r\n  return ([].concat(msg1,msg2,tables))\r\n}\r\nfunction pizzaMsg(i, x){\r\n  const items = [].concat(i);\r\n  const rowCl = `${i.tr}-row-pizza-${x}`;\r\n  const ret = items.map((i)=> {\r\n    return(<tr className={rowCl}><td>{i.tr}</td><td>{i.str}</td></tr>)\r\n  })\r\n  return ret;\r\n}\r\nexport default Summary;","import React from 'react';\r\nimport '../css/OrderStyle.css';\r\nimport StepFactory from './StepFactory';\r\nimport PizzaMenu from './itemMenu';\r\nimport Summary from './Summary';\r\n\r\nclass OrderStep extends React.Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state={       \r\n      pizzaMenu: new PizzaMenu(),      \r\n      selectedOptions:[],     \r\n      trigger: false,      \r\n    }    \r\n    this.triggerNext = this.triggerNext.bind(this);\r\n    this.onSelect = this.onSelect.bind(this);    \r\n  }\r\n  checkRequiredInput(props){\r\n    if((props.owner.name==='crusts'||props.owner.name==='sizes')&&this.state.selectedOptions.length===0){\r\n      const trig = (props.target.name==='remove'||props.target.name==='cancel'||(props.hasOwnProperty('btnCapt')&&(props.btnCapt.indexOf('Prev')!==-1)))?true:false;      \r\n      return trig;\r\n    }\r\n    return true;\r\n  }\r\n  triggerNext(props){   \r\n    if(!this.checkRequiredInput(props)){\r\n      alert(`You must select one of the available ${props.owner.name}`);\r\n      return null;\r\n    }\r\n    const order = this.props.step.metadata;\r\n    const isPrev = (props.hasOwnProperty('btnCapt')&&(props.btnCapt.indexOf('Prev')!==-1));\r\n    const getUserMsg = (props) =>{\r\n      switch(props.target.type){\r\n      case 'new':\r\n        //add new pizza\r\n        order.newPizza = true;        \r\n        return 'Adding a new pizza to the order';     \r\n      case 'edit':\r\n        //handle edits\r\n        return this.HandelEdit(props);      \r\n      case 'menu' || 'review':\r\n        order.SetStep(this.CreateStep(props));\r\n        return isPrev?`Going back to ${this.state.pizzaMenu.getPrev(props.owner.name)}`:this.CreateItemMsg(props.owner.name);       \r\n      case 'special':\r\n        order.SetStep(this.CreateStep(props));\r\n        return props.stepMsg;      \r\n      default:\r\n        return this.HandleSpecialActions(props);\r\n      }\r\n    }\r\n    //change current step info to with new 'key'\r\n    const stepKey = order.ProcessStep(this.props.step.key);    \r\n    const genericStep = this.props.steps.pizzabuilder;\r\n    this.props.step.id = stepKey;\r\n    genericStep.id = stepKey;\r\n    this.props.steps[stepKey] = genericStep;\r\n    \r\n \r\n    \r\n    //trigger next step in chatbot\r\n    const type = `(${props.owner.type}:${props.owner.name})=>(${props.target.type}:${props.target.name})`\r\n    const selc = isPrev?this.props.step.metadata.SelectionArray(this.state.pizzaMenu.getPrev(props.owner.name)):[];\r\n    const data = {\r\n      preserveMsg:true,\r\n      stepMsg: props.stepMsg,      \r\n      type:type,\r\n      msg:getUserMsg(props),\r\n    }\r\n    this.props.step.metadata = order;\r\n    this.setState({selectedOptions:selc,trigger: true}, () => {\r\n      this.props.triggerNextStep(data);\r\n    });\r\n  }\r\n  onSelect(val){\r\n    if(val===null||val===undefined) return null;\r\n    const order = this.props.step.metadata\r\n    const currrentlySelected = order.SelectPizzaItems(val);\r\n    this.props.step.metadata = order;\r\n    this.setState({selectedOptions:currrentlySelected});      \r\n  }\r\n  CreateStep(props){       \r\n    const next = (step)=>{\r\n      switch(step.type){\r\n        case 'menu':         \r\n          const chkNxt = this.state.pizzaMenu.getNext(step.name);\r\n          const next = chkNxt==='EOM'?'Special Instructions':chkNxt;\r\n          const type = chkNxt==='EOM'?'special':step.type;   \r\n          return {type:type, name:next};         \r\n        case 'edit':          \r\n          if(step.name==='save'||step.name==='drop') return {type:'review', name:'pizza'}\r\n          const name = step.name.length<3?'pizza':step.name;\r\n          return {type:step.type, name:name==='pizza'?this.state.pizzaMenu.MenuSteps.concat(['inst']):'item'};         \r\n        case 'review':\r\n          return {type:step.type, name:step.name==='order'?this.props.step.metadata.PizzaList:'pizza'};\r\n        default:\r\n          return {type:'', name:''};\r\n      }\r\n    }\r\n    const stepContents = (step)=>{\r\n      switch(step.type){\r\n        case 'menu'||'edit':         \r\n          if(step.type==='edit'&&step.name.length<3) return {type:'review', \r\n          contents:this.CreateReview(this.props.step.metadata.GetPizzaString(step.name))}//pizza summary\r\n          return {type:this.state.pizzaMenu.getContentType(step.name), \r\n            contents:{hasMulti:this.state.pizzaMenu.getHasMultipleSelect(step.name),\r\n              elements:this.state.pizzaMenu.getStepElements(step.name),\r\n              onSelect: this.onSelect,\r\n              selected:this.props.step.metadata.SelectionArray(step.name),}}        \r\n        case 'review':\r\n          const str = step.name==='pizza'?this.props.step.metadata.GetPizzaString(step.name):this.props.step.metadata.GetOrderSummary();\r\n          return {type:'review', contents:this.CreateReview(str)}\r\n        default:          \r\n          return ''\r\n      }\r\n    };    \r\n    const stepMsg = (step) => {\r\n      switch(step.type){\r\n        case 'menu':\r\n          return this.state.pizzaMenu.getStepMessage(step.name);         \r\n        case 'edit':         \r\n          return step.name==='pizza'?'Please select an option below:':this.state.pizzaMenu.getStepMessage(step.name);         \r\n        case 'review':\r\n          return step.name==='order'?'review your order':'review this pizza';\r\n        default:\r\n          return '';\r\n      }\r\n    };\r\n    const fromReviewOrder = (props)=> {\r\n      switch(props.owner.type){\r\n        case 'review':\r\n          return props.owner.name==='order';\r\n        case 'edit':\r\n          return props.isReturnFromReviewOrder;\r\n        case 'menu':\r\n          return false;\r\n        default:\r\n          return false;\r\n      }\r\n    }\r\n    const isPrev = (props.hasOwnProperty('btnCapt')&&(props.btnCapt.indexOf('Prev')!==-1));\r\n    const chkPrev = isPrev?this.state.pizzaMenu.getPrev(props.target.name):props.owner.name;\r\n    const prevStep = chkPrev==='BOM'?'Enter Name':chkPrev\r\n    const prevType  =chkPrev==='BOM'?'special':props.target.type;\r\n    if(props.owner.type!=='special'){\r\n      const returnStep = {\r\n        current:props.target, \r\n        prev:{type:prevType, name:prevStep}, \r\n        next:next(props.target),\r\n        isReturnFromReviewOrder:fromReviewOrder(props),\r\n        stepMsg:stepMsg(props.target), \r\n        stepContents:stepContents(props.target)\r\n      };    \r\n      return returnStep;\r\n    } else {\r\n      //handle special step\r\n      return ({\r\n        current:props.target, \r\n        prev:props.owner,\r\n        stepMsg:'',\r\n      })\r\n    }    \r\n  }\r\n  CreateReview(props){\r\n    const isFinal = props.hasOwnProperty('orderName');\r\n    if(isFinal){\r\n      return({\r\n        name:props.orderName,\r\n        cnt:props.pizzaCnt,\r\n        tables:props.pizzaInfo.map((i)=> {return this.CreateSummaryTable(i)})\r\n      })\r\n    } else {\r\n      return Summary(this.CreateSummaryTable(props))\r\n    }\r\n  }\r\n  CreateSummaryTable(pizza){\r\n    const id = pizza.id;\r\n    const items = pizza.items;\r\n    const itemTypeArray = this.state.pizzaMenu.MenuSteps;\r\n    const spcinst = pizza.specinst;\r\n    const stringArray = itemTypeArray.map((i)=> {\r\n      if(!items.hasOwnProperty(i)){return `No ${i} added`}\r\n      const item = items[i];     \r\n      const str = this.getItemString(i,item);\r\n      return ({\r\n        tr:i,\r\n        td:str,\r\n      })\r\n    })\r\n    return({\r\n      id: id,\r\n      table:stringArray,\r\n      specInst:spcinst,\r\n    })\r\n  }\r\n  getItemString(type,items){\r\n    \r\n    const retArray = items.map((item)=>{      \r\n      if(item.id==='0'||item.id==='') return `No ${type} added`;\r\n      const itemName = this.state.pizzaMenu.GetItemName(type,item.id);\r\n      const qty = item.qty!=='0'?`${this.state.pizzaMenu.GetOptMsg('qty',item.qty)} `:'';\r\n      const half = item.half!=='0'?` ${this.state.pizzaMenu.GetOptMsg('half',item.half)}`:'';\r\n      return `${qty}${itemName}${half}`;\r\n    })\r\n    return retArray.join(', ')\r\n  }\r\n  CreateItemMsg(type){\r\n    const items = [].concat(this.props.step.metadata.GetPizzaItems(type));\r\n    if(items.length===0||(items.length===1&&items[0].id==='')){\r\n      return `No ${type} added`;\r\n    }    \r\n    return this.getItemString(type,items);\r\n  }   \r\n  CreateNewPizza(prev){\r\n    const cur = {type:'menu', name:this.state.pizzaMenu.getStep(0)};\r\n    this.props.step.metadata.MakeNewPizza()\r\n    this.props.step.metadata.SetStep(this.CreateStep({owner:prev, target:cur}));\r\n    this.setState({addNewPizza:false});    \r\n  }\r\n  HandelEdit(props){\r\n    const altTrigger = props.target.name==='specialinstmsg'||props.target.name==='name';\r\n    let step= {};    \r\n    if(altTrigger){\r\n      this.props.steps.trigger = props.target.name;\r\n      const next = props.target.name==='name'?{type:'review', name:'order'}:{type:'edit', name:'pizza'};\r\n      step = {current:props.prev, prev:props.prev, next:next, \r\n        isReturnFromReviewOrder:props.isReturnFromReviewOrder}\r\n    } else if(isNaN(props.target.name)) {\r\n      this.props.step.metadata.EditSelections(props.target.name);\r\n      step = this.CreateStep(props);\r\n    } else {\r\n      if(this.props.step.metadata.ChangeCurrentPizza(props.target.name)){\r\n        step = this.CreateStep(props);\r\n      }\r\n    }\r\n    this.props.step.metadata.SetStep(step)\r\n    return props.stepMsg;\r\n  }\r\n  HandleSpecialActions(props){\r\n    switch(props.target.type){\r\n      case 'complete':\r\n        this.props.step.trigger = 'endmsg1';      \r\n        break;\r\n      case 'inst':\r\n        const prev=props.owner;\r\n        const next = {type:'review', name:'pizza'};\r\n        const cur = props.target;\r\n        this.props.step.metadata.SetStep({current:cur, next:next, prev:prev});\r\n        this.props.step.trigger = props.target.name;\r\n        return this.CreateItemMsg(props.owner.name);        \r\n      default:\r\n        this.props.step.metadata.SpecialActions(props.target);\r\n    }\r\n    return props.stepMsg;\r\n  }\r\n  componentDidMount(){\r\n    const order = this.props.step.metadata;\r\n    if(order.newPizza){\r\n      order.SavePizzaToOrder();\r\n      this.CreateNewPizza({type:'review',name:'pizza'})\r\n      order.newPizza = false\r\n      this.props.step.metadata = order;\r\n    }\r\n    \r\n  }  \r\n  render(){\r\n    const order = this.props.step.metadata;\r\n    if(!order.OrderIsStarted()){\r\n      const name = this.props.steps.ordername.value;\r\n      order.StartNewOrder(name);\r\n      this.CreateNewPizza({type:'menu',name:'Enter Name'});\r\n    } else if(this.props.steps.hasOwnProperty('specialinstmsg')){\r\n        if(this.props.steps.hasOwnProperty('specialinstentry')){\r\n          order.specialInstructions = this.props.steps.specialinstentry.value;\r\n          delete this.props.steps.specialinstentry\r\n        }\r\n        const owner = {type:'inst', name:'specialinstmsg'};\r\n        const target = {type:'review', name:'pizza'};        \r\n        order.SetStep(this.CreateStep({owner:owner, target:target}));\r\n      delete this.props.steps.specialinstmsg;\r\n      delete this.props.steps.specialinstques;\r\n    }   \r\n    const currentStep = order.GetStep();\r\n    if (currentStep.current.type==='inst') return null;    \r\n    return <StepFactory stepInfo={currentStep} selected={this.state.selectedOptions}  onTrigger={this.triggerNext} onSelect={this.onSelect}/>;\r\n  }  \r\n}\r\nexport default OrderStep;","import React, { Component } from 'react';\r\nimport ChatBot from './chatbot/ChatBot';\r\nimport { ThemeProvider } from 'styled-components';\r\nimport OrderStep from './OrderStep';\r\n\r\n\r\nclass SimpleForm extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.handleEnd = this.handleEnd.bind(this);\r\n  }\r\n  handleEnd(){\r\n    //load order summary page\r\n    const order = this.props.order;\r\n    this.props.end(order)\r\n  }\r\n  render() {\r\n    const order = this.props.order;          \r\n    return (\r\n      <ThemeProvider theme={{\r\n              background: '#f5f5f5',\r\n              fontFamily: 'Montserrat',\r\n              headerBgColor: '#DD841F',\r\n              headerFontColor: '#fff',\r\n              headerFontSize: '15px',\r\n              botBubbleColor: '#DD841F',\r\n              botFontColor: '#fff',\r\n              userBubbleColor: '#fff',\r\n              userFontColor: '#4a4a4a',\r\n              marginTop: '60px',\r\n          }}>\r\n      <ChatBot headerTitle=\"Slice Bot\"\r\n        handleEnd = {this.handleEnd}\r\n        steps={[\r\n          {\r\n            id: '1',\r\n            message: 'Welcome to Slice!',\r\n            trigger: '2',            \r\n          },\r\n          {\r\n            id: '2',\r\n            message: 'Please enter a name for the order',\r\n            trigger: 'ordername',            \r\n          },\r\n          {\r\n            id: 'ordername',\r\n            user:true,\r\n            placeholder: 'Please enter a name...',\r\n            trigger: 'pizzabuilder',   \r\n          },\r\n          {\r\n            id: 'pizzabuilder',\r\n            placeholder: 'Choose an option',\r\n            component: <OrderStep/>,              \r\n            waitAction: true, \r\n            replace: true,\r\n            metadata: order,\r\n            trigger: 'pizzabuilder',           \r\n          },\r\n          {\r\n            id:'specialinstmsg',\r\n            message:'Would you like to add any special instructions?',\r\n            trigger: 'specialinstques',\r\n          },\r\n          {\r\n            id:'specialinstques',\r\n            options: [\r\n              {value: 'yes', label:'Yes', trigger:'specialinstentry'},\r\n              {value: 'no', label:'No, Lets review this pizza', trigger:'pizzabuilder'},\r\n              ],\r\n          },\r\n          {\r\n            id:'specialinstentry',\r\n            user:true,\r\n            trigger: 'pizzabuilder',\r\n          },\r\n          {\r\n            id: 'endmsg1',         \r\n            message: 'Thank you for using Slice!',\r\n            trigger: 'endmsg2',            \r\n          },\r\n          {\r\n            id: 'endmsg2',         \r\n            message: 'Your order is confirmed. Please click OK to continue.',\r\n            trigger: 'endmsg3',            \r\n          },\r\n          {\r\n            id: 'endmsg3',         \r\n            options: [{value: 'endbot', label:'OK', trigger:'endbot'}],                        \r\n          },\r\n          {\r\n            id: 'endbot',         \r\n            message: 'Good bye',\r\n            end: true,            \r\n          },\r\n          ]}\r\n        />\r\n          </ThemeProvider>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default SimpleForm;","import React from 'react';\r\nimport df from \"../resources/dairyfree.svg\";\r\nimport gf from \"../resources/glutenfree.svg\";\r\nimport veggie from \"../resources/vegetarian.svg\";\r\nimport vegan from \"../resources/vegan.svg\";\r\nimport '../css/DisplayMainArea.css';\r\n\r\nclass StoreMenu extends React.Component {\r\nrender(){\r\n  return(\r\n    <div className=\"displayArea\">\r\n        <div className=\"menuSummary\">\r\n            <h2>Menu</h2>\r\n            <div className=\"leftPanel\">\r\n            <h3>Sizes</h3>\r\n            <hr/>\r\n            <div className=\"menuItem\">\r\n            <p>Small 10\"</p>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Medium 12\"</p>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Large 14\"</p>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>X-Large 16\"</p>\r\n            </div>\r\n            <h3>Crust</h3>\r\n            <hr/>\r\n            <div className=\"menuItem\">\r\n                <p>Original</p>\r\n                <img className=\"allergyInfo\" src={veggie} alt=\"Vegetarian\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Thin Crust</p>\r\n                <img className=\"allergyInfo\" src={veggie} alt=\"Vegetarian\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Gluten Free</p>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>\r\n            </div>\r\n            <h3>Cheese</h3>\r\n            <hr/>\r\n            <div className=\"menuItem\">\r\n                <p>None</p>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Light</p>\r\n                <img className=\"allergyInfo\" src={veggie} alt=\"Vegetarian\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Normal</p>\r\n                <img className=\"allergyInfo\" src={veggie} alt=\"Vegetarian\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Double</p>\r\n                <img className=\"allergyInfo\" src={veggie} alt=\"Vegetarian\"></img>\r\n            </div>\r\n            <h3>Sauce</h3>\r\n            <hr/>\r\n            <div className=\"menuItem\">\r\n                <p>Tomato</p>\r\n                <img className=\"allergyInfo\" src={vegan} alt=\"Vegan\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Marinara</p>\r\n                <img className=\"allergyInfo\" src={vegan} alt=\"Vegan\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Honey BBQ</p>\r\n                <img className=\"allergyInfo\" src={veggie} alt=\"Vegetarian\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Alfredo</p>\r\n                <img className=\"allergyInfo\" src={veggie} alt=\"Vegetarian\"></img>\r\n            </div>\r\n            </div>\r\n            <div className=\"rightPanel\">\r\n            <h3>Meats</h3>\r\n            <hr/>\r\n            <div className=\"menuItem\">\r\n                <p>Pepperoni</p>\r\n                <img className=\"allergyInfo\" src={df} alt=\"Dairy Free\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Beef</p>\r\n                <img className=\"allergyInfo\" src={df} alt=\"Dairy Free\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Philly Cheese Steak</p></div>\r\n            <div className=\"menuItem\">\r\n                <p>Italian Sausage</p>\r\n                <img className=\"allergyInfo\" src={df} alt=\"Dairy Free\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Grilled Chicken</p>\r\n                <img className=\"allergyInfo\" src={df} alt=\"Dairy Free\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>\r\n            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Bacon</p>\r\n                <img className=\"allergyInfo\" src={df} alt=\"Dairy Free\"></img>\r\n            </div>\r\n            <h3>Toppings</h3>\r\n            <hr/>\r\n            <div className=\"menuItem\">\r\n                <p>Tomatoes</p>\r\n                <img className=\"allergyInfo\" src={vegan} alt=\"Vegan\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>            </div>\r\n            <div className=\"menuItem\">\r\n                <p>Mushrooms</p>\r\n                <img className=\"allergyInfo\" src={vegan} alt=\"Vegan\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>               </div>\r\n            <div className=\"menuItem\">\r\n                <p>Jalapeño Peppers</p>\r\n                <img className=\"allergyInfo\" src={vegan} alt=\"Vegan\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>               </div>\r\n            <div className=\"menuItem\">\r\n                <p>Onions</p>\r\n                <img className=\"allergyInfo\" src={vegan} alt=\"Vegan\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>               </div>\r\n            <div className=\"menuItem\">\r\n                <p>Pineapple</p>\r\n                <img className=\"allergyInfo\" src={vegan} alt=\"Vegan\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>               </div>\r\n            <div className=\"menuItem\">\r\n                <p>Green Peppers</p>\r\n                <img className=\"allergyInfo\" src={vegan} alt=\"Vegan\"></img>\r\n                <img className=\"allergyInfo\" src={gf} alt=\"Gluten Free\"></img>               </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n  )\r\n}\r\n}\r\nexport default StoreMenu;","import React from 'react';\r\nimport SimpleForm from './SimpleForm';\r\nimport '../css/DisplayMainArea.css';\r\nimport StoreMenu from './StoreMenu';\r\n\r\nclass DisplayMainArea extends React.Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {      \r\n      showSum: false,\r\n      showEdit: false,\r\n    };\r\n    this.orderEnd = this.orderEnd.bind(this); \r\n  } \r\n  orderEnd(val){\r\n    const o = val;\r\n    const t = true;\r\n    this.setState({\r\n      order: o,\r\n      showSum: t,\r\n    })\r\n  }  \r\n  render() {\r\n    const appState= this.props.appState;\r\n    const showPage = appState.showPage;\r\n    const order = appState.order;\r\n    if (showPage!=='Main') {\r\n      return null;\r\n    } \r\n    return (\r\n      <>\r\n      <StoreMenu />\r\n      <div className=\"chatBot\">\r\n          <SimpleForm order={order} showPage={showPage} end={(val)=>this.orderEnd(val)}/>\r\n      </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default DisplayMainArea;","\r\nclass Pizza {\r\n  constructor(id){\r\n    this.id = id;\r\n    this.items = {};    \r\n    this.specinst='';\r\n    this.templist = {};\r\n  }\r\n  EditSelections(type){\r\n    switch(type){\r\n    case 'save':\r\n      //do nothing\r\n      break;\r\n    case 'drop':\r\n      //reverse changes\r\n      if(this.items.hasOwnProperty(type)){\r\n        this.items[type] = this.templist[type];\r\n      }\r\n      break;\r\n    default:\r\n      //create temp list to save existing items\r\n      if(this.items.hasOwnProperty(type)){\r\n        this.templist[type] =this.items[type];\r\n      }\r\n    }             \r\n  }\r\n  set PizzaItems(props) {\r\n    const t = props.type;\r\n    const values = props.values    \r\n    if(values.length===0&&this.items.hasOwnProperty(t)) {\r\n      delete this.items[t];\r\n    } else {\r\n      this.items[t]=values;\r\n    }\r\n        \r\n  }\r\n  GetPizzaItems(type){\r\n    if(this.items===null||!this.items.hasOwnProperty(type)) {\r\n      return {id: '',qty:'',half:'',};\r\n    }\r\n    return this.items[type];\r\n  }\r\n  SelectPizzaItems(values){\r\n    const hasMulti = values.multi;\r\n    const itemInfo = values.itemInfo;    \r\n    const items = hasMulti?this.multiItemSelect(itemInfo):this.singleItemSelect(itemInfo);\r\n    this.PizzaItems = {type:itemInfo.item, values:items}    \r\n    //returns selection array\r\n    return this.SelectionArray(itemInfo.item);\r\n  }\r\n  SelectionArray(type){\r\n    const curItemArry = [].concat(this.getSelectedItems(type));\r\n    const select = this.arrayReduce(curItemArry);    \r\n    return this.arrayBuild(type, select);\r\n  }\r\n  arrayBuild(type,array){\r\n    if(array.length===0||array===null||array===undefined){\r\n      return [];\r\n    }\r\n    const str = array.shift();\r\n    const z = str.indexOf('-0');\r\n    if(str===''||str==='0'||z!==-1){\r\n      return [].concat(this.arrayBuild(type,array));\r\n    }\r\n    const out = `${type}-${str}`;\r\n    return [out].concat(this.arrayBuild(type,array))\r\n  }\r\n  arrayReduce(array){\r\n    if(array.length===0||array[0].id===''){\r\n      return [];\r\n    }\r\n    const item = array.shift();\r\n    const init=`${item.id}`;\r\n    const q =`${item.id}-qty-${item.qty}`;\r\n    const h = `${item.id}-half-${item.half}`;\r\n    const arr = [init, q, h];\r\n    return arr.concat(this.arrayReduce(array))\r\n  }\r\n  singleItemSelect(itemInfo){\r\n    const type = itemInfo.item;\r\n    const curItem = this.getSelectedItems(type);\r\n    const updItem = this.updateItem(itemInfo, curItem[0]);\r\n    if (updItem.id==='') return [];\r\n    return [].concat(updItem);\r\n  }\r\n  multiItemSelect(itemInfo){\r\n    const type = itemInfo.item;\r\n    const curItemArry = [].concat(this.getSelectedItems(type));\r\n    if(curItemArry.length===1&&curItemArry[0].id===''){\r\n      return [].concat(this.updateItem(itemInfo,curItemArry[0]))\r\n    }\r\n    const index = curItemArry.findIndex((i)=>i.id===itemInfo.id);\r\n    if(index===-1){\r\n      return curItemArry.concat(this.updateItem(itemInfo,index))\r\n    }\r\n    const curItem = curItemArry[index];\r\n    const updItem = this.updateItem(itemInfo, curItem);\r\n    if(updItem.id===''){\r\n      curItemArry.splice(index,1);\r\n    } else {\r\n      curItemArry.splice(index,1,updItem);\r\n    }\r\n    return curItemArry;\r\n  }\r\n  updateItem(itemInfo, curitem){        \r\n    const hasQty = itemInfo.hasOwnProperty('qty');\r\n    const hasHalf = itemInfo.hasOwnProperty('half');\r\n    const updItem = {id: '',qty:'',half:'',};\r\n    const itemValues = {\r\n      id:itemInfo.id,\r\n      qty:hasQty?itemInfo.qty:'0',\r\n      half:hasHalf?itemInfo.half:'0',\r\n    };\r\n    if(curitem===-1||curitem.id===''||itemInfo.id!==curitem.id){\r\n      //no current item or change to current item\r\n      updItem.id = itemValues.id;\r\n      updItem.half = itemValues.half;\r\n      updItem.qty = itemValues.qty;      \r\n    } else {\r\n      //same item: if changing half or qty, update and return\r\n      //else remove selected item\r\n      if(hasHalf){\r\n        //change the selected half\r\n        updItem.half = itemValues.half;\r\n      } else if(hasQty&&itemValues.qty!==curitem.qty){\r\n        //change selected qty\r\n        updItem.qty = itemValues.qty\r\n      } else {\r\n        //items are identical - remove\r\n        updItem.id = '';\r\n        updItem.half = '';\r\n        updItem.qty = '';\r\n      }      \r\n    }\r\n    return updItem;   \r\n  }\r\n  getSelectedItems(type){\r\n    if(this.items===null||!this.items.hasOwnProperty(type)) {\r\n      return [].concat({id: '',qty:'',half:'',});\r\n    }\r\n    return [].concat(this.items[type]);\r\n  }   \r\n  get Pizza(){\r\n    return this;\r\n  }\r\n  set SpecialInstructions(value){\r\n    this.specinst=value;\r\n  }\r\n  get SpecialInstructions(){\r\n    return this.specinst;\r\n  }\r\n  get PizzaID(){\r\n    return this.id;\r\n  }\r\n  get PizzaInfo(){    \r\n    return ({\r\n      id: this.id,\r\n      items: this.items,\r\n      specinst: this.specinst,      \r\n    });\r\n  } \r\n} \r\n\r\nexport default Pizza;","import Pizza from './Pizza';\r\nclass PizzaOrder {\r\n  constructor() {\r\n    this.orderName= '';\r\n    this.pizzas= [];    \r\n    this.lastID = 0;\r\n    this.currentPizza = null;\r\n    this.stepsProcessed = 0;   \r\n    this.currentStepInfo = null;\r\n    this.botKeys = [];\r\n    this.addNewPizza = false;            \r\n  }\r\n  set newPizza(val){\r\n    this.addNewPizza = val;\r\n  }\r\n  get newPizza(){\r\n    return this.addNewPizza;\r\n  }\r\n  SetStep(step){\r\n    this.currentStepInfo = step;\r\n  }\r\n  GetStep(){\r\n    return this.currentStepInfo;\r\n  }\r\n  get hasCurrent(){\r\n    return this.currentPizza!==null;\r\n  }\r\n  ProcessStep(stepKey){\r\n    this.stepsProcessed++;\r\n    const bot = `Step-${this.stepsProcessed}: ${stepKey.substring(0,5)}`;\r\n    this.botKeys.push(bot)\r\n    return bot;\r\n  }\r\n  set Name(value){    \r\n    this.orderName= value;\r\n  }  \r\n  get Name(){\r\n    return this.orderName;  \r\n  }  \r\n  get PizzaList(){    \r\n    return this.pizzas.map((p)=>{\r\n      return p.PizzaID;\r\n    });\r\n  }\r\n  get CurrentPizzaID(){\r\n    if(this.currentPizza!==null){\r\n      return this.currentPizza.PizzaID;\r\n    }\r\n    return 0;\r\n  }\r\n  OrderIsStarted(){\r\n    return this.orderName!=='';\r\n  }\r\n  StartNewOrder(name){\r\n    this.CancelOrder();\r\n    if(name===''){\r\n      this.orderName= ' ';\r\n    } else {\r\n      this.orderName= name;\r\n    }    \r\n  }\r\n  CancelOrder(){\r\n    this.orderName= '';\r\n    this.pizzas= [];    \r\n    this.lastID = 0;\r\n    this.currentPizza = null;\r\n    this.stepsProcessed = 0;   \r\n    this.currentStepInfo = null;\r\n    this.botKeys = [];\r\n  }\r\n  SpecialActions(props){\r\n    switch(props.type){\r\n      case 'cancel':\r\n        switch(props.name){\r\n          case 'mainpage':            \r\n            break;\r\n          case 'storeselect':\r\n            break;\r\n          default:\r\n            this.CancelOrder();\r\n        }  \r\n        break;\r\n      case 'remove':\r\n        switch(props.name){\r\n          case 'restart':\r\n            this.currentPizza = null;\r\n            this.MakeNewPizza({type:'', name:'2'})\r\n            break;\r\n          case 'remove':\r\n            const id = this.currentPizza.PizzaID;            \r\n            this.RemovePizza(id);\r\n            break;\r\n          default:\r\n        }\r\n      break;\r\n      default:\r\n    }\r\n  }\r\n  CancelPizza(){\r\n    this.currentPizza = null;    \r\n  }\r\n  MakeNewPizza(prev){    \r\n    this.currentPizza = new Pizza(this.lastID+1);\r\n    this.addNewPizza = false;\r\n  }\r\n  SavePizzaToOrder(){    \r\n    if(!this.hasCurrent) return null;\r\n    const pizza = this.currentPizza;    \r\n    const id = pizza.PizzaID;\r\n    const i = this.pizzas.findIndex(p => p.PizzaID === id);\r\n    if(i!==-1){\r\n      //Override existing pizza\r\n      this.pizzas.splice(i,1,pizza);\r\n    }\r\n    else {\r\n      this.lastID = pizza.PizzaID;\r\n      this.pizzas = this.pizzas.concat(pizza);\r\n    }\r\n  }\r\n  EditSelections(type){\r\n    if(!this.hasCurrent) return null;\r\n    const p = this.currentPizza;\r\n    p.EditSelections(type);\r\n    this.currentPizza = p;\r\n    \r\n  }\r\n  get SpecialInstructions(){\r\n    if(!this.hasCurrent) return null;\r\n    const p = this.currentPizza;\r\n    const ret = p.SpecialInstructions;\r\n    this.currentPizza = p;\r\n    return ret\r\n  } \r\n  set SpecialInstructions(val){\r\n    if(!this.hasCurrent) return null;\r\n    const p = this.currentPizza;\r\n    p.SpecialInstructions = val;\r\n    this.currentPizza = p;\r\n    \r\n  }\r\n  SelectPizzaItems(values){\r\n    if(!this.hasCurrent) return null;\r\n    const p = this.currentPizza;\r\n    const ret = p.SelectPizzaItems(values);\r\n    this.currentPizza = p;\r\n    return ret;    \r\n  }\r\n  SelectionArray(type){\r\n    if(!this.hasCurrent) return null;\r\n    const p = this.currentPizza;\r\n    const ret = p.SelectionArray(type);\r\n    this.currentPizza = p;\r\n    return ret;    \r\n  }\r\n  ChangeCurrentPizza(id){\r\n    const i = this.pizzas.findIndex(p => p.PizzaID === id);\r\n    if(i!==-1){\r\n      this.currentPizza =this.pizzas[i];\r\n      return true\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  RemovePizza(id){    \r\n    const i = this.pizzas.findIndex(p => p.PizzaID === id);\r\n    if(i!==-1){\r\n      this.pizzas.splice(i,1);\r\n      this.pizzaCnt = this.pizzas.length();\r\n    }\r\n    if(this.hasCurrent&&this.currentPizza.PizzaID===id){\r\n      this.CancelPizza();\r\n    }\r\n    const step = {type:'review', name:'order'};\r\n    this.SetStep({current:step, prev:step, next:step})\r\n  }\r\n  GetPizzaItems(type){\r\n    if(!this.hasCurrent) return null;\r\n    const p = this.currentPizza;\r\n    const ret = p.getSelectedItems(type);\r\n    this.currentPizza = p;\r\n    return ret;\r\n  }\r\n  GetPizzaString(id){\r\n    if(isNaN(id)) return this.currentPizza.PizzaInfo;\r\n    const i = this.pizzas.findIndex(p => p.PizzaID === id);\r\n    if(i===-1){\r\n      return `No pizza ${id}`;\r\n    }\r\n    const pizza = this.pizzas[i];\r\n    return pizza.PizzaInfo;\r\n  }\r\n  GetOrderSummary(){\r\n    const infoMap= this.pizzas.map((p)=> {return p.PizzaInfo});\r\n    const cnt = infoMap.length;\r\n    return ({\r\n      orderName:this.orderName,\r\n      pizzaCnt: cnt,\r\n      pizzaInfo:infoMap,\r\n    })\r\n  }  \r\n}\r\n\r\nexport default PizzaOrder;\r\n","\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction GeoIcon({className, fill, viewBox}) {\r\n  return (\r\n    <svg width=\"15%\" height=\"15%\" viewBox={viewBox} className={className} preserveAspectRatio=\"xMidYMid meet\" version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <g fill={fill} transform=\"translate(0.000000,670.000000) scale(0.100000,-0.100000)\">\r\n      <path d=\"M2847 6654 c-931 -135 -1617 -925 -1617 -1862 0 -583 266 -1292 776 -2069 283 -432 655 -901 1014 -1280 l88 -92 84 87 c409 422 845 984 1150 1482 378 617 586 1166 638 1679 100 1004 -599 1904 -1595 2052 -155 23 -391 24 -538 3z m506 -898 c170 -44 321 -132 452 -265 118 -120 204 -269 246 -428 32 -119 37 -320 11 -445 -33 -160 -105 -306 -211 -431 -297 -350 -799 -447 -1199 -230 -234 126 -399 330 -479 590 -25 81 -27 102 -27 263 -1 154 2 184 22 255 111 383 416 653 808 715 97 15 267 4 377 -24z\"/>\r\n      <path d=\"M1699 2095 c-888 -178 -1471 -496 -1574 -859 -13 -42 -16 -84 -13 -147 4 -78 9 -97 46 -172 121 -244 442 -456 947 -623 412 -136 861 -220 1430 -266 242 -20 979 -17 1215 5 561 52 974 131 1365 261 516 172 838 387 957 642 43 92 50 219 18 314 -114 340 -639 639 -1426 814 -183 40 -343 70 -348 65 -11 -14 -186 -261 -186 -264 0 -1 24 -5 53 -9 92 -12 389 -75 494 -105 302 -87 526 -204 598 -313 38 -58 45 -130 17 -184 -147 -285 -1046 -484 -2187 -484 -1017 0 -1877 167 -2124 412 -56 56 -73 90 -73 149 1 84 48 146 175 229 162 107 430 197 789 265 106 20 203 39 215 41 20 4 14 15 -70 134 -84 118 -95 130 -122 129 -16 0 -105 -15 -196 -34z\"/>\r\n    </g>\r\n    </svg>\r\n  );\r\n}\r\nGeoIcon.propTypes= {\r\n  className: PropTypes.string,\r\n  fill: PropTypes.string,\r\n  viewBox: PropTypes.string,\r\n};\r\nGeoIcon.defaultProps = {\r\n  className: undefined,\r\n  fill: \"#000000\",\r\n  viewBox: \"0 0 620.000000 670.000000\",\r\n};\r\nexport default GeoIcon","import React from 'react';\r\nimport GeoIcon from '../resources/GeoIcon.jsx';\r\nimport '../css/StoreLoc.css';\r\n\r\n\r\nclass StoreLoc extends React.Component {\r\n  constructor(props){\r\n    super(props);    \r\n    this.state = {\r\n      isSearch:true,\r\n      isSelect:false,\r\n      searchMeth: '',\r\n      searchLoc: '',      \r\n    };\r\n    this.storeSearch = this.storeSearch.bind(this);    \r\n    this.storeSelect = this.storeSelect.bind(this);\r\n    this.resetSearch = this.resetSearch.bind(this); \r\n    \r\n  }\r\n  buildSearchMenu(locObj, forwardedRef){\r\n    const showSearch = this.state.isSearch;\r\n    if(showSearch){\r\n      return <StoreSearchMenu locObj={locObj} forwardedRef={forwardedRef} search={this.storeSearch} select={this.storeSelect}/>\r\n    }\r\n    return null;\r\n  }\r\n  resetSearch(locObj){\r\n    const updateProps={      \r\n      locObj:locObj,\r\n      page:'Location',\r\n      resetSearch: true,\r\n    };\r\n    this.props.update(updateProps);\r\n  }\r\n  storeSearch(searchObj){    \r\n    const locObj = searchObj.locObj;\r\n    const method = searchObj.method;\r\n    \r\n    const obj = {\r\n      method: method,\r\n      usrStr: method==='User Entry'?this.props.forwardedRef.current.value:'',\r\n    };\r\n    locObj.storeSearch = obj;\r\n    this.setState({     \r\n      isSearch: locObj.searchErr,\r\n      isSelect: !locObj.searchErr,\r\n      searchMeth: locObj.searchMeth,\r\n      searchLoc: locObj.searchLoc,      \r\n    });\r\n    const updateProps={\r\n      locObj: locObj,\r\n      page:'Location'\r\n    };\r\n    this.props.update(updateProps);\r\n  }\r\n  buildStoreSelectMenu(locObj){\r\n    const showSelect = this.state.isSelect;\r\n    if(showSelect){\r\n      return <StoreSelectMenu locObj={locObj} reset={this.resetSearch} select={this.storeSelect}/>\r\n    }\r\n    return null;\r\n  }\r\n  storeSelect(selectObj){\r\n    const locObj = selectObj.locObj;\r\n    const selLoc = selectObj.selLoc;    \r\n    locObj.storeLoc = selLoc;    \r\n    this.setState({\r\n      isSearch: false,\r\n      isSelect: false,     \r\n    });    \r\n    this.props.set(locObj); \r\n  }  \r\n  render(){    \r\n    const {locObj, showPage} = this.props.appState;\r\n    const show= showPage==='Location'?true:false;   \r\n    const {forwardedRef}=this.props;\r\n    return(\r\n      <>\r\n      {show && this.buildSearchMenu(locObj, forwardedRef)}\r\n      {show && this.buildStoreSelectMenu(locObj)}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nfunction StoreSearchMenu(props) {\r\n  const locObj = props.locObj;\r\n  return (\r\n    <>\r\n    <div className=\"searchPage\">\r\n    <div className=\"searchGreeting\">Find your Slice</div>\r\n    <div className=\"srchGrtCaption\">Available Menu Items, Special Offers, and Pricing can vary by location.</div>\r\n    <div className=\"searchContentWrapper\">\r\n    <div className=\"searchBox\">\r\n      <div className=\"searchBoxBanner\">Find Locations</div>\r\n      <div className=\"searchOptions\">\r\n        <MakeGeoDialog locObj={locObj} search={props.search}/>\r\n        <MakeUserDialog locObj={locObj} search={props.search} forwardedRef={props.forwardedRef} />\r\n      </div>\r\n    </div>              \r\n      <MakePrevDialog locObj={locObj} select={props.select}/>\r\n    </div>\r\n    </div> \r\n    </>\r\n  );\r\n}\r\nfunction MakeGeoDialog(props) {\r\n  const locObj = props.locObj;\r\n  const hasErr = locObj.geoErr;\r\n  const capStr = hasErr?locObj.geoErrMsg:'Locations near ' + locObj.geoZip;    \r\n  const clsStr = hasErr?\"geoSearchFail\": \"geoSearchBtn\";       \r\n  const searchObj = {\r\n    method: 'Geo Locate',\r\n    locObj: locObj,\r\n  };   \r\n  return (\r\n    <div className=\"geoSearchArea\">\r\n      <button className={clsStr} onClick={() => props.search(searchObj)}>\r\n        <GeoIcon fill=\"#000000\" className=\"geoSearchIcon\"/>\r\n        <div className=\"geoSearchBtnCapt\">{capStr}</div>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\nfunction MakeUserDialog(props) {\r\n  const locObj = props.locObj;\r\n  const hasErr = locObj.userErr;\r\n  const capStr = hasErr?locObj.userErrMsg:null;    \r\n  const searchObj = {\r\n    method: 'User Entry',\r\n    locObj: locObj,\r\n    ref: props.forwardedRef,\r\n  };    \r\n  return (\r\n    <>\r\n    <div className=\"userSearchArea\">\r\n    <div className=\"userSearchLabel\">Enter a Zip Code</div>\r\n    <form className=\"searchForm\" onKeyDown={(event, i) => {\r\n      if(event.key === 'Enter') {\r\n        this.storeSearch(searchObj); \r\n        event.preventDefault();}}}>\r\n      <input className=\"userInputString\" type=\"text\" ref={props.forwardedRef}/>\r\n      {capStr}\r\n    </form>\r\n      <button className=\"userSearchBtn\" type=\"button\" onClick={() => props.search(searchObj)}>\r\n      Submit</button>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\nfunction MakePrevDialog(props) {\r\n  const locObj = props.locObj;\r\n  const cur = locObj.curStoreID;              \r\n  if (cur==='0'){\r\n    return null;\r\n  }\r\n  const storeInfo = locObj.curStoreInfo;    \r\n  return(\r\n    <>\r\n    <div className=\"searchOrPrev\">Or</div>\r\n    <div className=\"prevLocBox\">    \r\n      <div className=\"prevLocBanner\">Keep this location</div>        \r\n      <div className=\"prevLocName\">{storeInfo.name}</div>\r\n      <div className=\"prevLocHours\">{storeInfo.hours}</div>\r\n      <button className=\"prevLocConfirm\" onClick={() => props.select(cur)}>Select</button>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\nfunction StoreSelectMenu(props){\r\n  const locObj = props.locObj;  \r\n  const searchLoc = locObj.searchLoc;    \r\n  const storeIDs = ['1','2','3'];\r\n  const storeList = storeIDs.map((storeID) => {\r\n    const store = locObj.storeInfo(storeID);   \r\n    const ret = {\r\n      locObj: locObj,\r\n      selLoc: storeID,\r\n    };\r\n    return (\r\n      <li key={storeID} className=\"resultElement\"> \r\n        <div className=\"store\">\r\n        <div className=\"storeAddress\">{store.name}</div>\r\n        <div className=\"storeDetails\">Store is {store.hours}, and is located {store.dist} miles away</div>\r\n        </div>\r\n        <div>\r\n        <button className=\"selectBtn\" onClick={() => {\r\n          props.select(ret)\r\n          }}>Select</button> \r\n        </div>\r\n      </li> \r\n      );\r\n    });\r\n  return (\r\n    <>\r\n    <div className=\"storeSelect\">\r\n    <div className=\"storeSelectBanner\">\r\n      <h2>Results</h2>\r\n      <div className=\"resultsCapt\">Showing results near: {searchLoc}</div>\r\n      <div className=\"resultsChange\" onClick={() => props.reset(locObj)}>Change Location</div>\r\n      </div>\r\n      <ul className=\"resultsList\">\r\n        {storeList}\r\n      </ul>\r\n    </div>\r\n    </>\r\n  );  \r\n}\r\nexport default StoreLoc;","import React from 'react';\r\nimport '../css/App.css';\r\nimport DisplayMainArea from './DisplayMainArea';\r\nimport logo from '../resources/SliceLogo.png';\r\nimport Order from './PizzaOrder';\r\n\r\nimport StoreLoc from './StoreLoc';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);    \r\n    this.updateLoc = this.updateLoc.bind(this);\r\n    this.setStore = this.setStore.bind(this);\r\n    this.mainPage = this.mainPage.bind(this);\r\n    \r\n    this.state = {\r\n      showPage: 'Location',       \r\n      locObj: this.props.locObj,      \r\n      order: new Order(),\r\n    };\r\n    this.input = React.createRef();        \r\n  }\r\n  setStore(locObj){\r\n    const page = 'Main';    \r\n    this.setState({\r\n      showPage: page,\r\n      locObj: locObj,           \r\n    });    \r\n  }\r\n  updateLoc(props){\r\n    const locObj = props.locObj;\r\n    const page = props.page;    \r\n    this.setState({\r\n      locObj:locObj,\r\n      showPage: page,             \r\n    });\r\n  }\r\n  mainPage(){\r\n\r\n  }\r\n  cancelOrder(){\r\n\r\n  }\r\n  completeOrder(){\r\n\r\n  }\r\n  get StoreBanner(){\r\n    const {locObj} = this.state;\r\n    const selectedStore = locObj.curStoreID;\r\n    if(selectedStore==='0'){ return null;}          \r\n    const storeInfo = locObj.curStoreInfo;\r\n    const banner = (\r\n      <div className=\"bannerHead\">\r\n        <div className=\"bannerName\">{storeInfo.name}</div>\r\n        <div className=\"bannerHours\">{storeInfo.hours}</div>\r\n        <div className=\"bannerChange\" onClick={() => this.updateLoc('Search')}>Change Location</div>\r\n      </div>\r\n    );\r\n    return banner;\r\n  }\r\n  render(){                 \r\n    const banner = this.StoreBanner;\r\n    return (\r\n      <>\r\n      <div className=\"mainPageArea\">\r\n      <header>\r\n        <img src={logo} alt=\"Logo\" onClick={() => this.resetOrder()}></img>\r\n        <h1>Slice</h1>\r\n        {banner}\r\n      </header>      \r\n      <StoreLoc appState={this.state} \r\n        set={this.setStore} update={this.updateLoc} forwardedRef={this.input}/>      \r\n      <DisplayMainArea appState={this.state} \r\n        reset={this.resetOrder} cancel={this.cancelOrder} complete={this.completeOrder}/>\r\n      </div>\r\n      </>     \r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './css/index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'jquery/dist/jquery.js';\r\nimport 'popper.js/dist/umd/popper.js';\r\nimport 'bootstrap/dist/js/bootstrap.js';\r\nimport Location from './components/Location'\r\n\r\nLocationFactory().then(obj => {  \r\n /* const obj = LocationFactory();*/\r\n  ReactDOM.render(\r\n  <React.StrictMode>\r\n    <App locObj={obj}/>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n  );\r\n})\r\nfunction LocationFactory(){\r\n  let x = new Location();\r\n  return x.initLoc();\r\n}\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import {lookup,lookupByCoords} from 'zipcodes';\r\nimport stores from './stores.json';\r\n\r\nclass Location {\r\n  #geo = null;\r\n  #user = null;\r\n  #store = null;\r\n  #search = null;\r\n  constructor(){\r\n    this.storeInfo = this.storeInfo.bind(this);\r\n    this.initLoc = this.initLoc.bind(this);\r\n    this.resolveGeoLoc = this.resolveGeoLoc.bind(this);    \r\n    this.#geo = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};     \r\n    this.#user = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};  \r\n    this.#store = {\r\n      current: '0',\r\n      previous: '0',      \r\n      didChange: false};\r\n    this.#search = {\r\n      method: '',\r\n      searchLoc: '',\r\n      isResolved: false,\r\n      hasErr: false,\r\n      errMsg: '',\r\n    }\r\n  }  \r\n  get geoZip() {\r\n    if(this.#geo.isResolved && !this.#geo.entryErr) {\r\n      return this.#geo.zip;\r\n    } else {\r\n      return 'NoGeo';\r\n    }\r\n  } \r\n  get geoCityState(){\r\n    if(this.#geo.isResolved && !this.geoErr) {\r\n      return this.#geo.cityState;\r\n    } else {\r\n      return 'Geo Location Error';\r\n    }   \r\n  }\r\n  get geoErr(){\r\n    return this.#geo.entryErr;\r\n  }\r\n  get geoErrMsg(){\r\n    return this.geoErr?this.#geo.errMsg:'';\r\n  }\r\n  set userZip(val){\r\n    let z = val.trim();    \r\n    let r = false;\r\n    let e = false;\r\n    let m = '';\r\n    let cs = '';\r\n    const l = lookup(z);\r\n    if(typeof l !==\"undefined\"){\r\n      const c = l.city;\r\n      const s = l.state;        \r\n      r = true;        \r\n      cs = c + ', ' + s;\r\n    } else {\r\n      //invalid zip code\r\n      z = '';  \r\n      r = false;\r\n      e = true;\r\n      m = 'Enter a Valid US Zip Code';        \r\n    }   \r\n    this.#user = {\r\n      isResolved: r,\r\n      entryErr: e,\r\n      errMsg: m,\r\n      zip: z,\r\n      cityState: cs,\r\n    };\r\n  }\r\n  get userZip() {\r\n    if(this.#user.isResolved && !this.#user.entryErr) {\r\n      return this.#user.zip;\r\n    } else {\r\n      return 'NoUser';\r\n    }\r\n  } \r\n  get userCityState(){\r\n    if(this.#user.isResolved && !this.userErr) {\r\n      return this.#user.cityState;\r\n    } else {\r\n      return 'User Entry Error';\r\n    }   \r\n  }\r\n  get userErr(){\r\n    return this.#user.entryErr;\r\n  }\r\n  get userErrMsg(){\r\n    return this.userErr?this.#user.errMsg:'';\r\n  }\r\n  set storeLoc(val){\r\n    const c = this.#store.current;\r\n    if(c!==val){\r\n      this.#store.didChange = true;\r\n      this.#store.previous = c;\r\n      this.#store.current = val;\r\n    } else {\r\n      this.#store.didChange = false;\r\n    }    \r\n  }\r\n  get changed(){\r\n    return this.#store.didChange;  \r\n  }\r\n  get curStoreID(){\r\n    return this.#store.current;\r\n  }\r\n  get prevStoreID(){\r\n    return this.#store.previous;\r\n  }\r\n  get curStoreInfo(){\r\n    const i = this.#store.current; \r\n    return this.storeInfo(i);\r\n  }\r\n  get prevStoreInfo(){\r\n    const i = this.#store.previous; \r\n    return this.storeInfo(i);\r\n  }\r\n  get searchErr(){\r\n    return this.#search.hasErr;    \r\n  }\r\n  get searchErrMsg(){\r\n      return this.searchErr?this.#search.errMsg:'';\r\n  }\r\n  get searchMeth(){\r\n    if(this.#search.isResolved){\r\n      return this.#search.method;\r\n    }\r\n    return 'No Search'\r\n  }\r\n  get searchLoc(){\r\n    if(this.#search.isResolved){\r\n      return this.#search.searchLoc;\r\n    }\r\n    return 'No Search'\r\n  }\r\n  set search(values){\r\n    this.#search.method = values.method;\r\n    this.#search.searchLoc = values.loc;\r\n    this.#search.isResolved = values.res;\r\n    this.#search.hasErr= values.err;\r\n    this.#search.errMsg= values.errMsg;\r\n  }\r\n  set storeSearch(method){        \r\n    let values ={\r\n      method: method.method,\r\n      loc: '',\r\n      res: false,\r\n      err: false,\r\n      errMsg: '',\r\n    };\r\n    if(values.method==='User Entry'){\r\n      this.userZip = method.usrStr;\r\n      if(this.userErr){\r\n        values.method = '';\r\n        values.err= true;\r\n        values.errMsg= 'Invalid Zip Entry';\r\n      } else {\r\n        values.loc = this.userCityState;\r\n        values.res = true;\r\n      }\r\n    } else if(values.method==='Geo Locate'){\r\n      if(this.geoErr){\r\n        values.method = '';\r\n        values.err= true;\r\n        values.errMsg= 'Invalid Geo Location';\r\n      } else {\r\n        values.loc = this.geoCityState;\r\n        values.res = true;\r\n      }\r\n    } else {\r\n      values.method = '';\r\n      values.err= true;\r\n      values.errMsg= 'Invalid Search Method';\r\n    }\r\n    this.search = values;    \r\n  }\r\n  storeInfo(i){\r\n    const s = stores.stores.find(\r\n      (r) => {return r.id === i;}\r\n    );\r\n    return s;\r\n  }\r\n  initLoc() {\r\n    return (this.resolveGeoLoc()\r\n      .then(data => {\r\n        if (data!=='GeoFail' && (data!==null||data!=='')) {\r\n          const c = data.city;\r\n          const s = data.state;\r\n          this.#geo = {\r\n            zip: data.zip,\r\n            cityState: c + ', ' + s,\r\n            isResolved: true,\r\n            entryErr: false,\r\n            errMsg: '',\r\n          };      \r\n        } else if (data==='GeoFail') {\r\n          this.#geo = {\r\n            zip: '',\r\n            cityState: '',\r\n            isResolved: true,\r\n            entryErr: true,\r\n            errMsg: 'Geo Location is Disabled',\r\n          };\r\n        } else {\r\n          this.#geo = {\r\n            zip: '',\r\n            cityState: '',\r\n            isResolved: false,\r\n            entryErr: true,\r\n            errMsg: 'Geo Location not resolved',\r\n          };\r\n        }\r\n        return this;\r\n      })\r\n    )\r\n  }  \r\n  resolveGeoLoc(){ \r\n    const locOpt = {\r\n      timeout: 5000,\r\n      maximumAge: 0\r\n    };    \r\n    return (new Promise((resolve, reject) => {\r\n      if(\"geolocation\" in navigator) {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n          let lat = position.coords.latitude;\r\n          let long = position.coords.longitude;\r\n          const tZip = lookupByCoords(lat,long);                  \r\n          resolve(tZip);\r\n        },(error) => {\r\n          console.log('Error getting location');\r\n          console.error(\"Error Code = \" + error.code + \" - \" + error.message);\r\n          const response = 'GeoFail';\r\n\r\n          resolve(response);  \r\n        },locOpt);\r\n      }\r\n    }, ()=>{\r\n      console.log(\"Promise reject\");   \r\n      }\r\n    ))        \r\n  }\r\n}\r\n\r\nexport default Location;"],"sourceRoot":""}