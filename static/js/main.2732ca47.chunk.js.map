{"version":3,"sources":["components/Pizza.jsx","components/PizzaOrder.jsx","components/itemMenu.jsx","components/ProgressBar.jsx","components/PizzaCartIcon.jsx","components/Header.jsx","resources/SliceLogo.png","resources/GeoIcon.jsx","components/StoreLoc.jsx","resources/pizza-main-area.jpg","components/Summary.jsx","components/ConfirmationPage.jsx","components/MainArea.jsx","components/chatbot/common/rgba.js","components/chatbot/common/animations.jsx","components/chatbot/steps_components/common/LoadingStep.jsx","components/chatbot/steps_components/common/Loading.jsx","components/chatbot/steps_components/custom/CustomStepContainer.jsx","components/chatbot/steps_components/custom/CustomStep.jsx","components/chatbot/steps_components/options/Option.jsx","components/chatbot/theme.js","components/chatbot/steps_components/options/OptionElement.jsx","components/chatbot/steps_components/options/Options.jsx","components/chatbot/steps_components/options/OptionsStepContainer.jsx","components/chatbot/steps_components/options/OptionsStep.jsx","components/chatbot/steps_components/text/Bubble.jsx","components/chatbot/steps_components/text/Image.jsx","components/chatbot/steps_components/text/ImageContainer.jsx","components/chatbot/steps_components/text/TextStepContainer.jsx","components/chatbot/steps_components/text/TextStep.jsx","components/chatbot/schemas/userSchema.js","components/chatbot/schemas/textSchema.js","components/chatbot/schemas/optionsSchema.js","components/chatbot/schemas/customSchema.js","components/chatbot/schemas/updateSchema.js","components/chatbot/schemas/schema.js","components/chatbot/components/ChatBotContainer.jsx","components/chatbot/components/Content.jsx","components/chatbot/components/Header.jsx","components/chatbot/components/HeaderTitle.jsx","components/chatbot/components/HeaderIcon.jsx","components/chatbot/components/FloatButton.jsx","components/chatbot/components/FloatingIcon.jsx","components/chatbot/components/Footer.jsx","components/chatbot/components/Input.jsx","components/chatbot/components/SubmitButton.jsx","components/chatbot/recognition.js","components/chatbot/icons/ChatIcon.jsx","components/chatbot/icons/CloseIcon.jsx","components/chatbot/icons/SubmitIcon.jsx","components/chatbot/icons/MicIcon.jsx","components/chatbot/utils.js","components/chatbot/speechSynthesis.js","components/chatbot/ChatBot.jsx","components/chatbot/storage.js","components/MenuComponent.jsx","resources/dairyfree.svg","resources/glutenfree.svg","resources/vegetarian.svg","resources/vegan.svg","components/MenuArray.jsx","components/StepFactory.jsx","components/ItemSelect.jsx","components/OrderStep.jsx","components/BotTrigger.jsx","components/SliceBot.jsx","components/AppState.jsx","components/BotAlertMsg.jsx","components/App.js","serviceWorker.js","components/Location.jsx","index.js"],"names":["Pizza","id","this","items","specinst","type","hasOwnProperty","props","t","values","length","value","isNull","PizzaOrder","orderName","pizzas","lastID","currentPizza","saved","pizza","PizzaID","i","findIndex","p","splice","concat","GetPizzaItems","chk","val","SpecialInstructions","PizzaItems","map","name","cnt","ItemMenu","arr","obj","x","ret","Items","optList","Options","stepNum","outOfScope","src","m","f","sauces","cheeses","meats","nonmeats","find","undefined","caption","a","crusts","sizes","qty","half","allergy","o","item","description","step","s","getStep","getStepNum","GetStepProper","properU","checkStep","info","oList","filter","botMsg","msg","properL","multi","multiple","controls","nextTrig","GetStepTrigger","prevTrig","nextName","prevName","content","ProgressBar","arrowRight","width","height","viewBox","className","fill","xmlns","fillRule","d","role","style","aria-valuenow","aria-valuemin","aria-valuemax","href","onClick","console","log","React","Component","StyledBadge","withStyles","theme","badge","right","top","border","palette","background","paper","padding","Badge","HtmlTooltip","tooltip","backgroundColor","color","maxWidth","fontSize","typography","pxToRem","Tooltip","getModalStyle","display","alignItems","justifyContent","useStyles","makeStyles","position","boxShadow","shadows","spacing","PizzaCartIcon","classes","useState","modalStyle","open","setOpen","body","title","Fragment","Typography","arrow","placement","enterDelay","IconButton","aria-label","badgeContent","Modal","onClose","aria-labelledby","aria-describedby","Header","locObj","appState","order","state","set","setState","prevProps","updateAppState","PizzaCount","selectedStore","curStoreID","storeName","curStoreInfo","storeHours","hours","storeChange","alt","GeoIcon","preserveAspectRatio","version","transform","defaultProps","StoreSearchMenu","MakeGeoDialog","updateLoc","MakeUserDialog","forwardedRef","MakePrevDialog","hasErr","geoErr","capStr","geoErrMsg","geoZip","clsStr","userErr","userErrMsg","onKeyDown","event","key","preventDefault","ref","cur","storeInfo","StoreSelectMenu","searchLoc","storeList","storeID","store","sel","dist","StoreLoc","loc","resetLoc","method","usrStr","current","storeSearch","storeLoc","locMode","searchStep","bind","to","path","component","show","single","pizzaID","sum","stepList","getUserMsg","Random","pizzaMsg","specRow","colSpan","specInst","itemMenu","size","GetCaption","crust","hasHalf","hID","GetDescription","replace","sort","b","toString","Summary","PizzaInfo","msg1","msg2","tables","finalO","ConfirmationPage","oSum","OrderSummary","finalS","out","MainArea","pizzaImage","dispComp","appValues","appDisplay","hexToRgb","hex","r","g","result","exec","parseInt","rgba","alpha","loading","keyframes","scale","invalidInput","LoadingStep","styled","span","delay","Loading","ChatStepContainer","div","CustomStep","renderComponent","steps","previousStep","triggerNextStep","cloneElement","speak","previousValue","waitAction","setTimeout","rendered","CustomStepContainer","Option","li","fontFamily","headerBgColor","headerFontColor","headerFontSize","botBubbleColor","botFontColor","userBubbleColor","userFontColor","OptionElement","button","defaultTheme","ul","OptionsStepContainer","OptionsStep","onOptionClick","renderOption","option","bubbleOptionStyle","user","label","options","Object","keys","Bubble","isFirst","isLast","showAvatar","Image","img","ImageContainer","TextStepContainer","TextStep","getMessage","message","renderMessage","isComponentWatingUser","avatarStyle","bubbleStyle","hideBotAvatar","hideUserAvatar","avatar","botName","imageAltText","types","required","schema","parse","parser","userSchema","textSchema","optionsSchema","customSchema","update","Error","stringify","updateSchema","len","indexOf","join","error","checkInvalidIds","triggerId","trigger","optionsTriggerIds","optionTriggerId","ChatBotContainer","floating","floatingStyle","bottom","left","opened","transformOrigin","Content","hideInput","HeaderTitle","h2","HeaderIcon","FloatButton","FloatingIcon","Footer","Input","input","invalid","css","disabled","hasButton","SubmitButton","speaking","instance","noop","Recognition","onChange","onEnd","onStop","lang","inputValue","onResult","setup","window","interimTranscript","finalTranscript","recognition","stop","force","resultIndex","results","isFinal","transcript","onFinal","nextState","assign","isSupported","webkitSpeechRecognition","continuous","interimResults","onresult","onend","start","ChatIcon","CloseIcon","SubmitIcon","points","MicIcon","isMobile","test","navigator","userAgent","isString","speakFn","speechSynthesisOptions","voice","enable","SpeechSynthesisUtterance","speechSynthesis","text","metadata","getSpeakText","ChatBot","onNodeInserted","target","currentTarget","enableSmoothScroll","supportsScrollBehavior","scroll","scrollHeight","behavior","scrollTop","onResize","onRecognitionChange","onRecognitionEnd","handleSubmitButton","onRecognitionStop","onValueChange","getTriggeredStep","generateRenderedStepsById","getStepMessage","previousSteps","lastStepIndex","data","enableMobileAutoFocus","defaultUserSettings","renderedSteps","currentStep","isEnd","end","hideExtraControl","handleEnd","pop","push","stepMsg","preserveMsg","defaultBotSettings","botAvatar","thisStepMsg","nextS","usrMsg","nextStep","updateStep","focus","cache","cacheName","cachedData","localStorage","setItem","storage","isInputValueEmpty","isLastPosition","stepIndex","asMessage","isFirstPosition","lastStep","handleKeyPress","submitUserMessage","recognitionEnable","validator","checkInvalidInput","blur","inputInvalid","toggleChatBot","toggleFloating","renderStep","index","customStyle","setContentRef","element","setInputRef","botDelay","customDelay","userAvatar","chatSteps","userDelay","defaultCustomSettings","settings","firstStep","recognitionLang","document","documentElement","addEventListener","params","callback","unParsedCache","getItem","renderedStep","removeItem","removeEventListener","customControl","contentStyle","extraControl","controlStyle","floatingIcon","footerStyle","headerComponent","headerTitle","hideHeader","hideSubmitButton","inputStyle","placeholder","inputAttributes","recognitionPlaceholder","submitButtonStyle","header","icon","inputPlaceholder","inputAttributesOverride","onKeyPress","ToolTipComponent","itemKey","liClass","btnClass","comp","itemCaption","itemDescription","itemClass","itemValue","onSelect","iClass","MenuArray","hasStep","selected","vals","components","rowKey","componentType","rowTitle","rowbtns","bCap","bDes","bVal","outerClass","rowtitle","MenuComponent","stepKey","c","StepFactory","refProps","appBotStepClass","CurrentID","isSaved","IsSaved","ordername","prevStep","onTrigger","StepObject","itemList","PizzaList","CurrentPizza","btns","trigVal","usr","MenuStep","EditMenuStep","EditStep","ReviewPizzaStep","iBtns","ReviewOrderStep","RemoveStep","CancelStep","CompleteStep","Step","ContentType","ContentFactory","ItemSelect","private","privateSelect","selection","updateType","curArray","updateItem","curItem","updItem","select","MakeItem","itemArray","SelectionArray","substring","y","opt","optStr","z","getOpt","arrayReduce","arrayBuild","array","slice","itemID","oID","str","shift","itemInfo","curitem","newItem","hasOpt","itemValues","forEach","e","OrderStep","action","stepname","GetSelected","GetCurrentItems","itemSelect","selectedItems","triggerNext","prevState","checkUp","appUpdateBot","appSetName","appSetInst","setOrderName","setSpecInst","nextProps","bot","genericStep","pizzabuilder","isuser","stepmsg","usermsg","SaveSelected","trig","processTrigger","botStepClass","userMsg","CurrentItems","isNaN","SavePizzaToOrder","CreateNewPizza","RemovePizza","BotTrigger","status","triggerRet","onTriggerBot","v","checkPrev","SliceBot","onAppUpdate","showBot","marginTop","AppState","setName","setInst","updateBot","botStepType","BotAlertMsg","handleClose","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","autoFocus","appOrder","Order","menuStep","App","appBotStepType","locChng","ChangeLoc","locSet","appClass","appType","alert","onTriggerSpecial","createRef","reset","botClass","stateVal","onTriggerLoc","page","Boolean","location","hostname","match","Location","initLoc","resolveGeoLoc","isResolved","entryErr","errMsg","zip","cityState","previous","search","didChange","stores","then","city","locOpt","timeout","maximumAge","Promise","resolve","reject","geolocation","getCurrentPosition","lat","coords","latitude","long","longitude","tZip","lookupByCoords","code","trim","cs","l","lookup","searchErr","res","err","userZip","userCityState","geoCityState","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.2732ca47.chunk.js","sourcesContent":["import { isNull } from \"lodash\";\r\n\r\nclass Pizza {\r\n  constructor(id){\r\n    this.id = id;\r\n    this.items = {};       \r\n    this.specinst=null;   \r\n  }\r\n\r\n  set PizzaItems(props) {\r\n    const t = props.type;\r\n    const values = props.values    \r\n    if(values.length===0&&this.items.hasOwnProperty(t)) {\r\n      delete this.items[t];\r\n    } else {\r\n      this.items[t]=values;\r\n    }        \r\n  }\r\n  GetPizzaItems(type){\r\n    if(this.items===null||!this.items.hasOwnProperty(type)) {\r\n      return {id: ''};\r\n    }\r\n    return this.items[type];\r\n  }     \r\n  get Pizza(){\r\n    return this;\r\n  }\r\n  set SpecialInstructions(value){\r\n    this.specinst=value;\r\n  }\r\n  get SpecialInstructions(){\r\n    if(isNull(this.specinst)){\r\n      return false;\r\n    } else {\r\n      return this.specinst;\r\n    }\r\n  }  \r\n  get PizzaID(){\r\n    return this.id;\r\n  }\r\n  get PizzaInfo(){    \r\n    return ({\r\n      id: this.id,\r\n      items: this.items,\r\n      specinst: this.specinst,      \r\n    });\r\n  } \r\n} \r\n\r\nexport default Pizza;","import Pizza from './Pizza';\r\nclass PizzaOrder {\r\n  constructor() {\r\n    this.orderName= false;\r\n    this.pizzas= [];    \r\n    this.lastID = 0;\r\n    this.currentPizza = null;\r\n    this.saved=false;                \r\n  }\r\n  set ordername(val){\r\n    this.orderName = val;\r\n  } \r\n  get ordername(){\r\n    return this.orderName;\r\n  }\r\n  CreateNewPizza(){    \r\n    this.currentPizza = new Pizza(this.lastID+1);\r\n    this.saved=false;               \r\n  }  \r\n  SavePizzaToOrder(){    \r\n    if(this.currentPizza===null) return null;\r\n    const pizza = this.currentPizza;    \r\n    const id = pizza.PizzaID;\r\n    const i = this.pizzas.findIndex(p => p.PizzaID === id);\r\n    if(i!==-1){\r\n      //Override existing pizza\r\n      this.pizzas.splice(i,1,pizza);\r\n    }\r\n    else {\r\n      this.lastID = pizza.PizzaID;\r\n      this.pizzas = this.pizzas.concat(pizza);\r\n    }\r\n    this.saved=true;\r\n  }\r\n  get SpecialInstructions(){\r\n    if(this.currentPizza!==null){\r\n      return this.currentPizza.SpecialInstructions;\r\n    } else {\r\n      return false;\r\n    }\r\n  } \r\n  set SpecialInstructions(val){\r\n    if(this.currentPizza!==null){\r\n      this.currentPizza.SpecialInstructions = val;\r\n    }    \r\n  }  \r\n  GetCurrentItems(type){\r\n    return [].concat(this.currentPizza.GetPizzaItems(type));\r\n  }\r\n  set CurrentItems(props){\r\n    if(props){\r\n      this.currentPizza.PizzaItems = props;\r\n    }    \r\n  }\r\n  set CurrentPizza(id){\r\n    const i = this.pizzas.findIndex(p => p.PizzaID === id);\r\n    if(i!==-1){\r\n      this.currentPizza =this.pizzas[i];      \r\n    } \r\n  }\r\n  RemovePizza(id){    \r\n    const chk = id==='cur'?(this.currentPizza!==null?this.currentPizza.PizzaID:false):id;\r\n    const i = chk?this.pizzas.findIndex(p => p.PizzaID === chk):-1;    \r\n    if(i!==-1){\r\n      this.pizzas.splice(i,1);      \r\n    }\r\n    if(this.currentPizza.PizzaID===chk){\r\n      this.currentPizza=null;\r\n    }\r\n  }\r\n  get CurrentID(){\r\n    if(this.currentPizza!==null){\r\n      return this.currentPizza.PizzaID;\r\n    } else {\r\n      return -1\r\n    }        \r\n  }\r\n  get IsSaved(){\r\n    if(this.currentPizza!==null&&this.currentPizza.PizzaID===this.lastID){\r\n      return false;\r\n    } else {\r\n      return this.saved;\r\n    }    \r\n  }   \r\n  get PizzaCount(){\r\n    return this.pizzas.length;\r\n  }\r\n  get CurrentPizza(){\r\n    return this.currentPizza;\r\n  }\r\n  get PizzaList(){\r\n    return this.pizzas.map((p)=> {return p.PizzaID})\r\n  }\r\n  get OrderSummary(){\r\n    return {name:this.orderName, pizzas:this.pizzas, cnt:this.pizzas.length}\r\n  }\r\n}\r\nexport default PizzaOrder;\r\n","import Items from './menuItems.json';\r\nimport Options from './menuOptions.json';\r\nclass ItemMenu{\r\n  constructor(){    \r\n    const arr = function(obj) {      \r\n      let x;\r\n      let ret = [];\r\n      for (x in obj){\r\n        ret = ret.concat(x); \r\n      }\r\n      return ret;\r\n    };    \r\n    this.items = arr(Items);\r\n    this.optList = arr(Options);\r\n    this.stepNum=-1;\r\n    this.outOfScope=false;         \r\n  }\r\n  set step(val){\r\n    if(val==='none')\r\n    {this.outOfScope=true;\r\n    } else {\r\n    this.outOfScope=false;\r\n    this.stepNum=this.getStepNum(val);\r\n    }\r\n\r\n  }\r\n  get step(){\r\n    if(this.outOfScope) {return 'none';}\r\n    return this.getStep(this.stepNum);\r\n  }\r\n  GetCaption(src,type,id){\r\n    const item = (m,t,id)=>{\r\n      switch(m){\r\n        case 'items':\r\n        const i = (t)=>{\r\n          switch(t){\r\n            case 'type':\r\n              return Items.type.values;\r\n            case 'sauces':\r\n              return Items.sauces.values;\r\n            case 'cheeses':\r\n              return Items.cheeses.values\r\n            case 'meats':\r\n               return Items.meats.values;\r\n            case 'nonmeats':\r\n              return Items.nonmeats.values;\r\n            default:\r\n              return null;\r\n          }\r\n        }\r\n        const item= i(t);\r\n        const f = item.find((i)=>i.id===id);\r\n        const cap = f===undefined?'':f.caption;  \r\n        return cap\r\n        case 'opts':\r\n          const o = (t)=>{\r\n            switch(t){\r\n              case 'crusts':\r\n                return Options.crusts;\r\n              case 'sizes':\r\n                return Options.sizes;\r\n              case 'qty':\r\n                return Options.qty;\r\n              case 'half':\r\n                 return Options.half;\r\n              case 'allergy':\r\n                return Options.allergy;\r\n              default:\r\n                return null;\r\n            }\r\n          }\r\n          const opt= o(t);\r\n          const a = opt.find((i)=>i.id===id);\r\n          const oc = a===undefined?'':a.caption; \r\n          return oc\r\n        default:\r\n          return null;}}   \r\n    return item(src,type,id);\r\n  }\r\n  GetDescription(src,type,id){\r\n    const item = (m,t,id)=> {\r\n      switch(m) {\r\n        case 'items':\r\n          const i = (t)=>{\r\n            switch(t){\r\n              case 'type':\r\n                return Items.type.values;\r\n              case 'sauces':\r\n                return Items.sauces.values;\r\n              case 'cheeses':\r\n                return Items.cheeses.values\r\n              case 'meats':\r\n                 return Items.meats.values;\r\n              case 'nonmeats':\r\n                return Items.nonmeats.values;\r\n              default:\r\n                return null;\r\n            }\r\n          }\r\n          const item= i(t);\r\n          const f = item.find((i)=>i.id===id);\r\n          const cap = f===undefined?'':f.description;  \r\n          return cap\r\n          case 'opts':\r\n            const o = (t)=>{\r\n              switch(t){\r\n                case 'crusts':\r\n                  return Options.crusts;\r\n                case 'sizes':\r\n                  return Options.sizes;\r\n                case 'qty':\r\n                  return Options.qty;\r\n                case 'half':\r\n                   return Options.half;\r\n                case 'allergy':\r\n                  return Options.allergy;\r\n                default:\r\n                  return null;\r\n              }\r\n            }\r\n            const opt= o(t);\r\n            const a = opt.find((i)=>i.id===id);\r\n            const oc = a===undefined?'':a.description; \r\n            return oc\r\n      default:\r\n        return null;\r\n      }\r\n    }\r\n    return item(src,type,id);\r\n  }\r\n  GetStepProper(step){\r\n    if(this.outOfScope) {return 'none';}\r\n    if(step==='specialinstmsg'){\r\n      return 'Special Instructions'\r\n    } else if(step==='ordername'){\r\n      return 'Name'\r\n    } else {     \r\n      const s = this.getStep(this.getStepNum(step))\r\n      if(s==='specialinstmsg'||s==='ordername'){return this.GetStepProper(s)}\r\n      return Items[s].properU\r\n    }\r\n  }\r\n  GetStepTrigger(step){\r\n    if(this.outOfScope) {return 'none';}\r\n    const s = this.getStep(this.getStepNum(step)) \r\n    if(this.checkStep(s)){\r\n      return 'pizzabuilder'\r\n    } else {\r\n      return s\r\n    }\r\n  }\r\n  get StepObject(){\r\n    if(this.outOfScope) {return null;}\r\n    const step = this.step;\r\n    if(!this.checkStep(step)){return false};\r\n    const info = Items[step];\r\n    const oList = this.optList.filter((o)=>{\r\n      return info[o]\r\n    })\r\n    return {\r\n      name: step,\r\n      botMsg:info.msg,\r\n      properU:info.properU,\r\n      properL:info.properL,\r\n      multi:info.multiple,\r\n      controls: {\r\n        nextTrig:this.GetStepTrigger('next'),\r\n        prevTrig:this.GetStepTrigger('prev'),\r\n        nextName:this.GetStepProper('next'),\r\n        prevName:this.GetStepProper('prev'),\r\n      },\r\n      content: {\r\n        optList:oList,\r\n        sizes:info.sizes?Options.sizes:false,\r\n        crusts:info.crusts?Options.crusts:false,\r\n        half:info.half?Options.half:false,\r\n        qty:info.qty?Options.qty:false,\r\n        values:info.values,\r\n        allergy:Options.allergy,\r\n      }\r\n    };\r\n  }  \r\n  checkStep(step){\r\n    const i = this.items.findIndex(s => s === step)\r\n    return i!==-1\r\n  }\r\n  getStep(i){\r\n    if(i>=this.items.length){      \r\n      return 'specialinstmsg';\r\n    } else if(i<0){\r\n      return 'ordername';\r\n    } else {     \r\n      return this.items[i];      \r\n    }   \r\n  }\r\n  getStepNum(val){\r\n    const i = this.stepNum;\r\n    switch (val){\r\n      case 'next':               \r\n        return i+1;        \r\n      case 'prev':\r\n        return i-1;        \r\n      case 'new':\r\n        return 0;        \r\n      default:\r\n        const s = this.items.findIndex(s => s === val);\r\n        return s<0?this.stepNum:s;        \r\n    }\r\n  }  \r\n  get stepList(){\r\n    return this.items.map((i)=>{\r\n      const name = this.GetStepProper(i);\r\n      return {val:i, name:name}\r\n    });\r\n  } \r\n}\r\nexport default ItemMenu;","import React from 'react';\r\n\r\nclass ProgressBar extends React.Component{\r\nrender(){\r\n  const arrowRight = <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-arrow-right\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\"/>\r\n   </svg>;\r\n  return (\r\n    <div className=\"container\">\r\n        <div className=\"progress\">\r\n          <div className=\"progress-bar bg-warning progress-bar-striped progress-bar-animated\" role=\"progressbar\" style={{width: '25%'}} aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n        </div>\r\n        <ul className=\"nav justify-content-center info\">\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link active\" href=\"/pizza-chatbot\">Search for location</a>\r\n          </li>\r\n          {arrowRight}\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link\" href=\"/pizza-chatbot\" onClick={()=> console.log('Hello!')}>Select location</a>\r\n          </li>\r\n          {arrowRight}\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link\" href=\"/slicebot\">Order pizzas</a>\r\n          </li>\r\n          {arrowRight}\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link disabled\" href=\"/review\">Review order</a>\r\n          </li>\r\n          {arrowRight}\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link disabled\" href=\"/summary\">Payment \t&amp; Confirmation</a>\r\n          </li>\r\n        </ul>\r\n        </div>\r\n  )\r\n}\r\n}\r\nexport default ProgressBar;","import React from 'react';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport {Badge,Modal,Typography,Tooltip,IconButton} from '@material-ui/core/';\r\nimport { withStyles,makeStyles } from '@material-ui/core/styles';\r\n\r\nconst StyledBadge = withStyles((theme) => ({\r\n  badge: {\r\n    right: -3,\r\n    top: 0,\r\n    border: `2px solid ${theme.palette.background.paper}`,\r\n    padding: '0 4px',\r\n  },\r\n}))(Badge);\r\nconst HtmlTooltip = withStyles((theme) => ({\r\n  tooltip: {\r\n    backgroundColor: '#f5f5f9',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 400,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: '1px solid #dadde9',\r\n  },\r\n}))(Tooltip);\r\nfunction getModalStyle() {\r\n  return {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  };\r\n}\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: 'absolute',\r\n    width: 400,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: '2px solid #000',\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n}));\r\nfunction PizzaCartIcon(props){\r\n  const cnt = props.cnt;\r\n  const classes = useStyles();  \r\n  const [modalStyle] = React.useState(getModalStyle);\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <h2 id=\"simple-modal-title\">Cart</h2>\r\n      <p id=\"simple-modal-description\">\r\n        Your cart is empty.\r\n      </p>\r\n      <PizzaCartIcon />\r\n    </div>\r\n  );  \r\n  return (\r\n    <>\r\n    <HtmlTooltip title={\r\n        <React.Fragment><Typography color=\"inherit\">Pizza Cart</Typography>Click here to view your pizza cart</React.Fragment>}\r\n        arrow placement=\"bottom-end\" enterDelay={100}>\r\n      <IconButton aria-label=\"cart\">\r\n        <StyledBadge badgeContent={cnt} color=\"secondary\">\r\n          <ShoppingCartIcon onClick={handleOpen}/>\r\n        </StyledBadge>\r\n      </IconButton>\r\n    </HtmlTooltip>\r\n    <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n      </>\r\n  )\r\n}\r\nexport default PizzaCartIcon;","import React from 'react';\r\nimport ProgressBar from './ProgressBar';\r\nimport PizzaCartIcon from './PizzaCartIcon';\r\nimport logo from '../resources/SliceLogo.png';\r\n\r\nclass Header extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    const locObj = this.props.appState.locObj;\r\n    const order = this.props.appState.order;\r\n    this.state = {\r\n      locObj:locObj,\r\n      order:order,\r\n      set:false,\r\n    }\r\n  }\r\n  componentDidMount(){    \r\n    this.setState({set:this.state.order?true:false});\r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if(this.props.appState!==prevProps.appState){\r\n      const locObj = this.props.appState.locObj;\r\n      const order = this.props.appState.order;\r\n      this.setState({locObj:locObj, order:order, set:order?true:false});\r\n    }\r\n  }\r\n  render(){\r\n    if(!this.state.set){return null}\r\n    const updateAppState = this.props.updateAppState;\r\n    const locObj = this.state.locObj;\r\n    const cnt = this.state.order.PizzaCount;    \r\n    const selectedStore = locObj.curStoreID;          \r\n    const storeName = selectedStore!=='0'?locObj.curStoreInfo.name:'Please select a Store';\r\n    const storeHours = selectedStore!=='0'?locObj.curStoreInfo.hours:'';\r\n    const storeChange = selectedStore!=='0'?'Change Location':'';\r\n      \r\n    return (\r\n      <header>\r\n        <a href=\"/pizza-chatbot\"><img src={logo} alt=\"Logo\"></img>\r\n        <h1>Slice</h1></a>\r\n        <PizzaCartIcon cnt={cnt} />\r\n        <div className=\"bannerHead\">\r\n          <div className=\"bannerName\">{storeName}</div>\r\n          <div className=\"bannerHours\">{storeHours}</div>\r\n          <div className=\"bannerChange\" onClick={() => {return updateAppState({type:'change', values:''})}}>{storeChange}</div>\r\n        </div>\r\n        <ProgressBar/>                \r\n      </header>\r\n    );\r\n  } \r\n}\r\nexport default Header;","export default \"data:image/png;base64,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\"","\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction GeoIcon({className, fill, viewBox}) {\r\n  return (\r\n    <svg width=\"15%\" height=\"15%\" viewBox={viewBox} className={className} preserveAspectRatio=\"xMidYMid meet\" version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <g fill={fill} transform=\"translate(0.000000,670.000000) scale(0.100000,-0.100000)\">\r\n      <path d=\"M2847 6654 c-931 -135 -1617 -925 -1617 -1862 0 -583 266 -1292 776 -2069 283 -432 655 -901 1014 -1280 l88 -92 84 87 c409 422 845 984 1150 1482 378 617 586 1166 638 1679 100 1004 -599 1904 -1595 2052 -155 23 -391 24 -538 3z m506 -898 c170 -44 321 -132 452 -265 118 -120 204 -269 246 -428 32 -119 37 -320 11 -445 -33 -160 -105 -306 -211 -431 -297 -350 -799 -447 -1199 -230 -234 126 -399 330 -479 590 -25 81 -27 102 -27 263 -1 154 2 184 22 255 111 383 416 653 808 715 97 15 267 4 377 -24z\"/>\r\n      <path d=\"M1699 2095 c-888 -178 -1471 -496 -1574 -859 -13 -42 -16 -84 -13 -147 4 -78 9 -97 46 -172 121 -244 442 -456 947 -623 412 -136 861 -220 1430 -266 242 -20 979 -17 1215 5 561 52 974 131 1365 261 516 172 838 387 957 642 43 92 50 219 18 314 -114 340 -639 639 -1426 814 -183 40 -343 70 -348 65 -11 -14 -186 -261 -186 -264 0 -1 24 -5 53 -9 92 -12 389 -75 494 -105 302 -87 526 -204 598 -313 38 -58 45 -130 17 -184 -147 -285 -1046 -484 -2187 -484 -1017 0 -1877 167 -2124 412 -56 56 -73 90 -73 149 1 84 48 146 175 229 162 107 430 197 789 265 106 20 203 39 215 41 20 4 14 15 -70 134 -84 118 -95 130 -122 129 -16 0 -105 -15 -196 -34z\"/>\r\n    </g>\r\n    </svg>\r\n  );\r\n}\r\nGeoIcon.propTypes= {\r\n  className: PropTypes.string,\r\n  fill: PropTypes.string,\r\n  viewBox: PropTypes.string,\r\n};\r\nGeoIcon.defaultProps = {\r\n  className: undefined,\r\n  fill: \"#000000\",\r\n  viewBox: \"0 0 620.000000 670.000000\",\r\n};\r\nexport default GeoIcon","import React from 'react';\r\nimport {Route,Redirect} from 'react-router-dom';\r\nimport GeoIcon from '../resources/GeoIcon.jsx';\r\nimport '../css/StoreLoc.css';\r\n\r\nclass StoreLoc extends React.Component {\r\n  constructor(props){\r\n    super(props);    \r\n    this.state = {\r\n      locMode:this.props.appState.locObj.searchStep,           \r\n    };\r\n    this.updateLoc = this.updateLoc.bind(this);   \r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if(this.props.appState!==prevProps.appState){\r\n      this.setState({     \r\n        locMode:this.props.appState.locObj.searchStep,              \r\n      });\r\n    }\r\n  }\r\n  updateLoc = (p)=>{\r\n    const loc = this.props.appState.locObj\r\n    switch(p.type){\r\n      case 'reset':\r\n        loc.resetLoc();\r\n        break;\r\n      case 'search':\r\n        const obj = {method: p.values,\r\n          usrStr: p.values==='User Entry'?this.props.forwardedRef.current.value:''};\r\n        loc.storeSearch = obj;\r\n        break;\r\n      case 'select':\r\n        loc.storeLoc = p.values;\r\n      break;\r\n      default:\r\n    }\r\n    this.setState({locMode:loc.searchStep}, ()=> {\r\n      this.props.updateAppState({type:'location',values:loc})\r\n    });\r\n  }  \r\n  render(){    \r\n    const show= (type)=>{\r\n      switch(type){\r\n        case 'search':\r\n          return <StoreSearchMenu locObj={this.props.appState.locObj} forwardedRef={this.props.forwardedRef} updateLoc={(p)=>{return this.updateLoc(p)}}/>\r\n        case 'select':\r\n          return <><Redirect to=\"/pizza-chatbot/locations\" /><Route path=\"/pizza-chatbot/locations\" component={() => <StoreSelectMenu locObj={this.props.appState.locObj} updateLoc={(p)=>{return this.updateLoc(p)}}/>}/></>\r\n        default:\r\n          return null;\r\n      }\r\n    }    \r\n    return(\r\n      <>{show(this.state.locMode)}</>\r\n    )\r\n  }\r\n}\r\n\r\nfunction StoreSearchMenu(props) {\r\n  const locObj = props.locObj;\r\n  return (\r\n    <>\r\n    <div className=\"searchPage\">\r\n    <div className=\"searchGreeting\">Find your Slice</div>\r\n    <div className=\"srchGrtCaption\">Available Menu Items, Special Offers, and Pricing can vary by location.</div>\r\n    <div className=\"searchContentWrapper\">\r\n    <div className=\"searchBox\">\r\n      <div className=\"searchBoxBanner\">Find Locations</div>\r\n      <div className=\"searchOptions\">\r\n        <MakeGeoDialog locObj={locObj} updateLoc={props.updateLoc}/>\r\n        <MakeUserDialog locObj={locObj} updateLoc={props.updateLoc} forwardedRef={props.forwardedRef} />\r\n      </div>\r\n    </div>              \r\n      <MakePrevDialog locObj={locObj} updateLoc={props.updateLoc}/>\r\n    </div>\r\n    </div> \r\n    </>\r\n  );\r\n}\r\nfunction MakeGeoDialog(props) {\r\n  const locObj = props.locObj;\r\n  const hasErr = locObj.geoErr;\r\n  const capStr = hasErr?locObj.geoErrMsg:'Locations near ' + locObj.geoZip;    \r\n  const clsStr = hasErr?\"geoSearchFail\": \"geoSearchBtn\";  \r\n  const ret = {type:'search', values:'Geo Locate'};\r\n  return (\r\n    <div className=\"geoSearchArea\">\r\n      <button className={clsStr} onClick={() => props.updateLoc(ret)}>\r\n        <GeoIcon fill=\"#000000\" className=\"geoSearchIcon\"/>\r\n        <div className=\"geoSearchBtnCapt\">{capStr}</div>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\nfunction MakeUserDialog(props) {\r\n  const locObj = props.locObj;\r\n  const hasErr = locObj.userErr;\r\n  const capStr = hasErr?locObj.userErrMsg:null;    \r\n  const ret = {type:'search', values:'User Entry'};\r\n  return (\r\n    <>\r\n    <div className=\"userSearchArea\">\r\n    <div className=\"userSearchLabel\">Enter a Zip Code</div>\r\n    <form className=\"searchForm\" onKeyDown={(event, i) => {\r\n      if(event.key === 'Enter') {\r\n        props.updateLoc(ret); \r\n        event.preventDefault();}}}>\r\n      <input className=\"userInputString\" type=\"text\" ref={props.forwardedRef}/>\r\n      {capStr}\r\n    </form>\r\n      <button className=\"userSearchBtn\" type=\"button\" onClick={() => props.updateLoc(ret)}>\r\n      Submit</button>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\nfunction MakePrevDialog(props) {\r\n  const locObj = props.locObj;\r\n  const cur = locObj.curStoreID;              \r\n  if (cur==='0'){\r\n    return null;\r\n  }\r\n  const ret = {type:'select', values:cur};\r\n  const storeInfo = locObj.curStoreInfo;    \r\n  return(\r\n    <>\r\n    <div className=\"searchOrPrev\">Or</div>\r\n    <div className=\"prevLocBox\">    \r\n      <div className=\"prevLocBanner\">Keep this location</div>        \r\n      <div className=\"prevLocName\">{storeInfo.name}</div>\r\n      <div className=\"prevLocHours\">{storeInfo.hours}</div>\r\n      <button className=\"prevLocConfirm\" onClick={() => props.updateLoc(ret)}>Select</button>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\nfunction StoreSelectMenu(props){\r\n  const locObj = props.locObj;  \r\n  const searchLoc = locObj.searchLoc;    \r\n  const storeIDs = ['1','2','3'];\r\n  const ret = {type:'reset', values:false};\r\n  const storeList = storeIDs.map((storeID) => {\r\n    const store = locObj.storeInfo(storeID);\r\n    const sel = {type:'select', values:storeID};\r\n    return (\r\n      <li key={storeID} className=\"resultElement\"> \r\n        <div className=\"store\">\r\n        <div className=\"storeAddress\">{store.name}</div>\r\n        <div className=\"storeDetails\">Store is {store.hours}, and is located {store.dist} miles away</div>\r\n        </div>\r\n        <div>\r\n        <button className=\"selectBtn\" onClick={() => {\r\n          props.updateLoc(sel)\r\n          }}>Select</button> \r\n        </div>\r\n      </li> \r\n      );\r\n    });\r\n  return (\r\n    <>\r\n    <div className=\"storeSelect\">\r\n    <div className=\"storeSelectBanner\">\r\n      <h2>Results</h2>\r\n      <div className=\"resultsCapt\">Showing results near: {searchLoc}</div>\r\n      <div className=\"resultsChange\" onClick={() => props.updateLoc(ret)}>Change Location</div>\r\n      </div>\r\n      <ul className=\"resultsList\">\r\n        {storeList}\r\n      </ul>\r\n    </div>\r\n    </>\r\n  );  \r\n}\r\nexport default StoreLoc;","export default __webpack_public_path__ + \"static/media/pizza-main-area.90296f53.jpg\";","import React from 'react';\r\nimport ItemMenu from './itemMenu';\r\nimport Random from 'random-id';\r\n\r\nfunction Summary(props){  \r\n  switch (props.type){\r\n    case 'reviewPizza':\r\n      return single(props.content.PizzaInfo);\r\n    case 'reviewOrder':\r\n      return finalO(props.content);\r\n    default:\r\n      return null;\r\n  }\r\n}\r\nfunction single(props){  \r\n  const pizzaID = props.id\r\n  const sum = `Pizza #${pizzaID} Summary`  \r\n  const items = pizzaMsg(props.items);\r\n  const specInst = props.specinst;\r\n  const specRow = specInst===''?<tr className=\"specialInstHead\"><td colSpan=\"2\">No Special Instructions</td></tr>:\r\n        (<><tr className=\"specialInstHead\"><td colSpan=\"2\">Special Instructions:</td></tr>\r\n        <tr className=\"specialInstRow\"><td colSpan=\"2\">{props.specInst}</td></tr></>);  \r\n  return(\r\n    <table>\r\n      <thead className=\"pizza-sum\"><tr><th colSpan=\"2\">{sum}</th></tr></thead>\r\n      <tbody className=\"sum-table-body\">\r\n        {items}\r\n        {specRow}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\nfunction finalO(props){  \r\n  const name = props.name;\r\n  const cnt = props.cnt;  \r\n  const msg1 = <div className=\"reviewH\">{`Order summary for ${name}`}</div>;\r\n  const msg2 = <div className=\"reviewH\">{`There are ${cnt} pizzas in this order`}</div>;\r\n  const tables = props.pizzas.map((p)=>{\r\n    return <div className=\"reviewTable\">{single(p.PizzaInfo)}</div>});\r\n  return (<>{msg1}{msg2}{tables}</>)\r\n}\r\nfunction pizzaMsg(items){\r\n  const itemMenu = new ItemMenu();\r\n  const list = itemMenu.stepList;\r\n  const rows = list.map((i)=>{\r\n    const chk = items.hasOwnProperty(i.val)?items[i.val]:false;\r\n    const item = {type:i.val, name:i.name, sel:chk}\r\n    return item;\r\n  })  \r\n  const ret = rows.map((i)=> {\r\n    return(<tr className=\"sum-row\" key={Random(8)}><td>{i.name}</td><td>{getUserMsg(i)}</td></tr>)\r\n  })\r\n  return ret;\r\n}\r\nexport function getUserMsg(props){\r\n  if(!props.sel){return `No ${props.name} selected`}\r\n  const itemMenu = new ItemMenu();\r\n  if(props.type==='type'){\r\n    if(!props.sel[0].hasOwnProperty('sizes')&&!props.sel[0].hasOwnProperty('crusts')){\r\n      return 'Invalid pizza type';\r\n    }\r\n    const size = itemMenu.GetCaption('opts','sizes',props.sel[0].sizes);\r\n    const crust = itemMenu.GetCaption('opts','crusts',props.sel[0].crusts);\r\n    return `This pizza is a ${size} with ${crust} crust`;\r\n  } else {\r\n    let hasHalf=false;\r\n    const items = props.sel.map((i)=>{\r\n      const id = i.hasOwnProperty('id')?i.id:'0';\r\n      const qty = i.hasOwnProperty('qty')?i.qty:'1';\r\n      const half = i.hasOwnProperty('half')?(i.half===0?'2':i.half):'2';\r\n      if(id==='0'||id.length<1||qty==='0'){\r\n        return {hID:'3',item:false};\r\n      } else {\r\n        if(half!=='2'){hasHalf=true};\r\n        const ret =  {hID:half, item:itemMenu.GetCaption('items',props.type,id),\r\n                  qty:itemMenu.GetCaption('opts','qty',qty),\r\n                  half:itemMenu.GetDescription('opts','half',half)};\r\n        ret.half.replace('{i}',ret.item);\r\n        return ret;\r\n      }\r\n    })\r\n    items.filter((i)=>{return i.item});\r\n    if(items.length>1){items.sort((a,b)=>{return a.hID-b.hID});};\r\n    if(items.length===0){return `No ${props.name} selected`};\r\n    const retArray = items.map((i)=>{\r\n      if(!i.item) {return ''};\r\n      return `${i.qty} ${i.item}${hasHalf?` ${i.half}`:''}`\r\n    })\r\n    return retArray.toString();    \r\n  }  \r\n}\r\nexport default Summary;","import { render } from '@testing-library/react';\r\nimport React from 'react';\r\nimport Summary from './Summary';\r\n\r\nclass ConfirmationPage extends React.Component{\r\n  render(){\r\n    const order = this.props.appState.order;\r\n    const oSum = order.OrderSummary;\r\n    const finalS = Summary({type:'reviewOrder',content:oSum})\r\n    const out = finalS?finalS:'This is the final order summary and confimation page';\r\n    return (\r\n      <div>{out}</div>\r\n    )\r\n  }\r\n\r\n}\r\nexport default ConfirmationPage;\r\n    \r\n","import React from 'react';\r\nimport StoreLoc from './StoreLoc';\r\nimport pizzaImage from '../resources/pizza-main-area.jpg';\r\nimport ConfirmationPage from './ConfirmationPage';\r\nclass MainArea extends React.Component{  \r\n    \r\n  render(){\r\n    const dispComp = (type)=>{      \r\n      switch(type){\r\n        case 'Location':\r\n          return <StoreLoc appState={this.props.appState} updateAppState={this.props.updateAppState} forwardedRef={this.props.forwardedRef}/>;\r\n        case 'NonMenuStep':\r\n          return <div><img className=\"pizza-bgImg img-fluid\" src={pizzaImage} alt=\"pizzaImage\"/>This step doesnt have a menu item</div>;\r\n        case 'Main':\r\n          return <div><img className=\"pizza-bgImg img-fluid\" src={pizzaImage} alt=\"pizzaImage\"/>Something to display while waiting for the user to enter their name</div>;\r\n        case 'Final':\r\n          return <ConfirmationPage appState={this.props.appState}/>;      \r\n        case 'Menu':\r\n          return <div><img className=\"pizza-bgImg img-fluid\" src={pizzaImage} alt=\"pizzaImage\" />Filtered menu displaying only relevant items</div>\r\n        default:\r\n          return <div><img className=\"pizza-bgImg img-fluid\" src={pizzaImage} alt=\"pizzaImage\"/>Default items?</div>\r\n      }\r\n    }\r\n    const dis =this.props.appState.appValues===null?'Location':this.props.appState.appValues.appDisplay     \r\n    return (dispComp(dis));\r\n  }\r\n}\r\nexport default MainArea;","const hexToRgb = hex => {\r\n  // http://stackoverflow.com/a/5624139\r\n  const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n  hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);\r\n\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return result\r\n    ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16)\r\n      }\r\n    : null;\r\n};\r\n\r\n/**\r\n * Transform hex+alpha to rgba\r\n * @param {string} hex hex color code\r\n * @param {number} [alpha=1]\r\n * @returns {string} the rgba as string\r\n */\r\nconst rgba = (hex, alpha = 1) => {\r\n  const color = hexToRgb(hex);\r\n  return `rgba(${color.r}, ${color.g}, ${color.b}, ${alpha})`;\r\n};\r\n\r\nexport default rgba;\r\n","import { keyframes } from 'styled-components';\r\nimport rgba from './rgba';\r\n\r\nconst loading = keyframes`\r\n  0% { opacity: .2; }\r\n  20% { opacity: 1; }\r\n  100% { opacity: .2; }\r\n`;\r\n\r\nconst scale = keyframes`\r\n  100% { transform: scale(1); }\r\n`;\r\n\r\nconst invalidInput = keyframes`\r\n  25% { transform: rotate(-1deg); }\r\n  100% { transform: rotate(1deg); }\r\n`;\r\n\r\nconst pulse = color => keyframes`\r\n  0% { box-shadow: 0 0 0 0 ${rgba(color, 0.4)}; }\r\n  70% { box-shadow: 0 0 0 10px ${rgba(color, 0)}; }\r\n  100% { box-shadow: 0 0 0 0 ${rgba(color, 0)}; }\r\n`;\r\n\r\nexport { loading, scale, invalidInput, pulse };\r\n","import styled from 'styled-components';\r\nimport { loading } from '../../common/animations';\r\n\r\nconst LoadingStep = styled.span`\r\n  animation: ${loading} 1.4s infinite both;\r\n  animation-delay: ${props => props.delay};\r\n`;\r\n\r\nexport default LoadingStep;\r\n","import React from 'react';\r\nimport LoadingStep from './LoadingStep';\r\n\r\nconst Loading = () => (\r\n  <span className=\"rsc-loading\">\r\n    <LoadingStep delay=\"0s\">.</LoadingStep>\r\n    <LoadingStep delay=\".2s\">.</LoadingStep>\r\n    <LoadingStep delay=\".4s\">.</LoadingStep>\r\n  </span>\r\n);\r\n\r\nexport default Loading;\r\n","import styled from 'styled-components';\r\n\r\nconst ChatStepContainer = styled.div`\r\n  background: #fff;\r\n  border-radius: 5px;\r\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 0 6px 10px 6px;\r\n  padding: 16px;\r\n`;\r\n\r\nexport default ChatStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loading from '../common/Loading';\r\nimport CustomStepContainer from './CustomStepContainer';\r\n\r\nclass CustomStep extends Component {\r\n  state = {\r\n    loading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { speak, step, previousValue, triggerNextStep } = this.props;\r\n    const { delay, waitAction } = step;\r\n\r\n    setTimeout(() => {\r\n      this.setState({ loading: false }, () => {\r\n        if (!waitAction && !step.rendered) {\r\n          triggerNextStep();\r\n        }\r\n        speak(step, previousValue);\r\n      });\r\n    }, delay);\r\n  }\r\n\r\n  renderComponent = () => {\r\n    const { step, steps, previousStep, triggerNextStep } = this.props;\r\n    const { component } = step;\r\n\r\n    return React.cloneElement(component, {\r\n      step,\r\n      steps,\r\n      previousStep,\r\n      triggerNextStep\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { loading } = this.state;\r\n    const { style } = this.props;\r\n\r\n    return (\r\n      <CustomStepContainer className=\"rsc-cs\" style={style}>\r\n        {loading ? <Loading /> : this.renderComponent()}\r\n      </CustomStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nCustomStep.propTypes = {\r\n  previousStep: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  previousValue: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.bool,\r\n    PropTypes.number,\r\n    PropTypes.object,\r\n    PropTypes.array\r\n  ]),\r\n  speak: PropTypes.func,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  steps: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  style: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\nCustomStep.defaultProps = {\r\n  previousValue: '',\r\n  speak: () => {}\r\n};\r\n\r\nexport default CustomStep;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\n\r\nconst Option = styled.li`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  margin: 2px;\r\n  transform: scale(0);\r\n`;\r\n\r\nexport default Option;\r\n","export default {\r\n  background: '#f5f8fb',\r\n  fontFamily: 'monospace',\r\n  headerBgColor: '#6e48aa',\r\n  headerFontColor: '#fff',\r\n  headerFontSize: '16px',\r\n  botBubbleColor: '#6E48AA',\r\n  botFontColor: '#fff',\r\n  userBubbleColor: '#fff',\r\n  userFontColor: '#4a4a4a'\r\n};\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../../theme';\r\n\r\nconst OptionElement = styled.button`\r\n  background: ${({ theme }) => theme.botBubbleColor};\r\n  border: 0;\r\n  border-radius: 22px;\r\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\r\n  color: ${({ theme }) => theme.botFontColor};\r\n  display: inline-block;\r\n  font-size: 14px;\r\n  padding: 12px;\r\n\r\n  &:hover {\r\n    opacity: 0.7;\r\n  }\r\n  &:active,\r\n  &:hover:focus {\r\n    outline:none;\r\n  }\r\n`;\r\n\r\nOptionElement.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default OptionElement;\r\n","import styled from 'styled-components';\r\n\r\nconst Options = styled.ul`\r\n  margin: 2px 0 12px 0;\r\n  padding: 0 6px;\r\n`;\r\n\r\nexport default Options;\r\n","import styled from 'styled-components';\r\n\r\nconst OptionsStepContainer = styled.div``;\r\n\r\nexport default OptionsStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Option from './Option';\r\nimport OptionElement from './OptionElement';\r\nimport Options from './Options';\r\nimport OptionsStepContainer from './OptionsStepContainer';\r\n\r\nclass OptionsStep extends Component {\r\n  onOptionClick = ({ value }) => {\r\n    const { triggerNextStep } = this.props;\r\n\r\n    triggerNextStep({ value });\r\n  };\r\n\r\n  renderOption = option => {\r\n    const { bubbleOptionStyle, step } = this.props;\r\n    const { user } = step;\r\n    const { value, label } = option;\r\n\r\n    return (\r\n      <Option key={value} className=\"rsc-os-option\">\r\n        <OptionElement\r\n          className=\"rsc-os-option-element\"\r\n          style={bubbleOptionStyle}\r\n          user={user}\r\n          onClick={() => this.onOptionClick({ value })}\r\n        >\r\n          {label}\r\n        </OptionElement>\r\n      </Option>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { step } = this.props;\r\n    const { options } = step;\r\n\r\n    return (\r\n      <OptionsStepContainer className=\"rsc-os\">\r\n        <Options className=\"rsc-os-options\">\r\n          {Object.keys(options).map(key => options[key]).map(this.renderOption)}\r\n        </Options>\r\n      </OptionsStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nOptionsStep.propTypes = {\r\n  bubbleOptionStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\n\r\nexport default OptionsStep;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\nimport defaultTheme from '../../theme';\r\n\r\nconst Bubble = styled.div`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  background: ${props => (props.user ? props.theme.userBubbleColor : props.theme.botBubbleColor)};\r\n  border-radius: ${props => {\r\n    const { isFirst, isLast, user } = props;\r\n\r\n    if (!isFirst && !isLast) {\r\n      return user ? '18px 0 0 18px' : '0 18px 18px 0px';\r\n    }\r\n\r\n    if (!isFirst && isLast) {\r\n      return user ? '18px 0 18px 18px' : '0 18px 18px 18px';\r\n    }\r\n\r\n    return props.user ? '18px 18px 0 18px' : '18px 18px 18px 0';\r\n  }};\r\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\r\n  color: ${props => (props.user ? props.theme.userFontColor : props.theme.botFontColor)};\r\n  display: inline-block;\r\n  font-size: 14px;\r\n  max-width: 50%;\r\n  margin: ${props => {\r\n    const { isFirst, showAvatar, user } = props;\r\n\r\n    if (!isFirst && showAvatar) {\r\n      return user ? '-8px 46px 10px 0' : '-8px 0 10px 46px';\r\n    }\r\n\r\n    if (!isFirst && !showAvatar) {\r\n      return user ? '-8px 0px 10px 0' : '-8px 0 10px 0px';\r\n    }\r\n\r\n    return '0 0 10px 0';\r\n  }};\r\n  overflow: hidden;\r\n  position: relative;\r\n  padding: 12px;\r\n  transform: scale(0);\r\n  transform-origin: ${props => {\r\n    const { isFirst, user } = props;\r\n\r\n    if (isFirst) {\r\n      return user ? 'bottom right' : 'bottom left';\r\n    }\r\n\r\n    return user ? 'top right' : 'top left';\r\n  }};\r\n`;\r\n\r\nBubble.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default Bubble;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\n\r\nconst Image = styled.img`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  border-radius: ${props => (props.user ? '50% 50% 50% 0' : '50% 50% 0 50%')};\r\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\r\n  height: 40px;\r\n  min-width: 40px;\r\n  padding: 3px;\r\n  transform: scale(0);\r\n  transform-origin: ${props => (props.user ? 'bottom left' : 'bottom right')};\r\n  width: 40;\r\n`;\r\n\r\nexport default Image;\r\n","import styled from 'styled-components';\r\n\r\nconst ImageContainer = styled.div`\r\n  display: inline-block;\r\n  order: ${props => (props.user ? '1' : '0')};\r\n  padding: 6px;\r\n`;\r\n\r\nexport default ImageContainer;\r\n","import styled from 'styled-components';\r\n\r\nconst TextStepContainer = styled.div`\r\n  align-items: flex-end;\r\n  display: flex;\r\n  justify-content: ${props => (props.user ? 'flex-end' : 'flex-start')};\r\n`;\r\n\r\nexport default TextStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Bubble from './Bubble';\r\nimport Image from './Image';\r\nimport ImageContainer from './ImageContainer';\r\nimport Loading from '../common/Loading';\r\nimport TextStepContainer from './TextStepContainer';\r\n\r\nclass TextStep extends Component {\r\n  /* istanbul ignore next */\r\n  state = {\r\n    loading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { step, speak, previousValue, triggerNextStep } = this.props;\r\n    const { component, delay, waitAction } = step;\r\n    const isComponentWatingUser = component && waitAction;\r\n\r\n    setTimeout(() => {\r\n      this.setState({ loading: false }, () => {\r\n        if (!isComponentWatingUser && !step.rendered) {\r\n          triggerNextStep();\r\n        }\r\n        speak(step, previousValue);\r\n      });\r\n    }, delay);\r\n  }\r\n\r\n  getMessage = () => {\r\n    const { previousValue, step } = this.props;    \r\n    const { message } = step;      \r\n    return message ? message.replace(/{previousValue}/g, previousValue) : '';\r\n  };\r\n\r\n  renderMessage = () => {\r\n    const { step, steps, previousStep, triggerNextStep } = this.props;\r\n    const { component } = step;\r\n\r\n    if (component) {      \r\n      return React.cloneElement(component, {\r\n        step,\r\n        steps,\r\n        previousStep,\r\n        triggerNextStep\r\n      });\r\n    }    \r\n    return this.getMessage();\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      step,\r\n      isFirst,\r\n      isLast,\r\n      avatarStyle,\r\n      bubbleStyle,\r\n      hideBotAvatar,\r\n      hideUserAvatar\r\n    } = this.props;\r\n    const { loading } = this.state;\r\n    const { avatar, user, botName } = step;\r\n\r\n    const showAvatar = user ? !hideUserAvatar : !hideBotAvatar;\r\n\r\n    const imageAltText = user ? \"Your avatar\" : `${botName}'s avatar`;\r\n    return (\r\n      <TextStepContainer className={`rsc-ts ${user ? 'rsc-ts-user' : 'rsc-ts-bot'}`} user={user}>\r\n        <ImageContainer className=\"rsc-ts-image-container\" user={user}>\r\n          {isFirst && showAvatar && (\r\n            <Image\r\n              className=\"rsc-ts-image\"\r\n              style={avatarStyle}\r\n              showAvatar={showAvatar}\r\n              user={user}\r\n              src={avatar}\r\n              alt={imageAltText}\r\n            />\r\n          )}\r\n        </ImageContainer>\r\n        <Bubble\r\n          className=\"rsc-ts-bubble\"\r\n          style={bubbleStyle}\r\n          user={user}\r\n          showAvatar={showAvatar}\r\n          isFirst={isFirst}\r\n          isLast={isLast}\r\n        >\r\n          {loading ? <Loading /> : this.renderMessage()}\r\n        </Bubble>\r\n      </TextStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nTextStep.propTypes = {\r\n  avatarStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  isFirst: PropTypes.bool.isRequired,\r\n  isLast: PropTypes.bool.isRequired,\r\n  bubbleStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  hideBotAvatar: PropTypes.bool.isRequired,\r\n  hideUserAvatar: PropTypes.bool.isRequired,\r\n  previousStep: PropTypes.objectOf(PropTypes.any),\r\n  previousValue: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.bool,\r\n    PropTypes.number,\r\n    PropTypes.object,\r\n    PropTypes.array\r\n  ]),\r\n  speak: PropTypes.func,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  steps: PropTypes.objectOf(PropTypes.any),\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\n\r\nTextStep.defaultProps = {\r\n  previousStep: {},\r\n  previousValue: '',\r\n  speak: () => {},\r\n  steps: {}\r\n};\r\n\r\nexport default TextStep;\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'user',\r\n    types: ['boolean'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'validator',\r\n    types: ['function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'message',\r\n    types: ['string', 'function'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'avatar',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'delay',\r\n    types: ['number'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'options',\r\n    types: ['object'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'component',\r\n    types: ['any'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'avatar',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'replace',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'waitAction',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'asMessage',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'delay',\r\n    types: ['number'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'update',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","import userSchema from './userSchema';\r\nimport textSchema from './textSchema';\r\nimport optionsSchema from './optionsSchema';\r\nimport customSchema from './customSchema';\r\nimport updateSchema from './updateSchema';\r\nimport { stringify } from 'flatted/cjs';\r\n\r\nconst schema = {\r\n  parse(step) {\r\n    let parser = [];\r\n\r\n    if (step.user) {\r\n      parser = userSchema;\r\n    } else if (step.message) {\r\n      parser = textSchema;\r\n    } else if (step.options) {\r\n      parser = optionsSchema;\r\n    } else if (step.component) {\r\n      parser = customSchema;\r\n    } else if (step.update) {\r\n      parser = updateSchema;\r\n    } else {\r\n      throw new Error(`The step ${stringify(step)} is invalid`);\r\n    }\r\n\r\n    for (let i = 0, len = parser.length; i < len; i += 1) {\r\n      const { key, types, required } = parser[i];\r\n\r\n      if (!step[key] && required) {\r\n        throw new Error(`Key '${key}' is required in step ${stringify(step)}`);\r\n      } else if (step[key]) {\r\n        if (types[0] !== 'any' && types.indexOf(typeof step[key]) < 0) {\r\n          throw new Error(\r\n            `The type of '${key}' value must be ${types.join(' or ')} instead of ${typeof step[\r\n              key\r\n            ]}`\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    const keys = parser.map(p => p.key);\r\n\r\n    for (const key in step) {\r\n      if (keys.indexOf(key) < 0) {\r\n        console.error(`Invalid key '${key}' in step '${step.id}'`);\r\n        delete step[key];\r\n      }\r\n    }\r\n\r\n    return step;\r\n  },\r\n\r\n  checkInvalidIds(steps) {\r\n    for (const key in steps) {\r\n      const step = steps[key];\r\n      const triggerId = steps[key].trigger;\r\n\r\n      if (typeof triggerId !== 'function') {\r\n        if (step.options) {\r\n          const triggers = step.options.filter(option => typeof option.trigger !== 'function');\r\n          const optionsTriggerIds = triggers.map(option => option.trigger);\r\n\r\n          for (let i = 0, len = optionsTriggerIds.length; i < len; i += 1) {\r\n            const optionTriggerId = optionsTriggerIds[i];\r\n            if (optionTriggerId && !steps[optionTriggerId]) {\r\n              throw new Error(\r\n                `The id '${optionTriggerId}' triggered by option ${i + 1} in step '${\r\n                  steps[key].id\r\n                }' does not exist`\r\n              );\r\n            }\r\n          }\r\n        } else if (triggerId && !steps[triggerId]) {\r\n          throw new Error(\r\n            `The id '${triggerId}' triggered by step '${steps[key].id}' does not exist`\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default schema;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst ChatBotContainer = styled.div`\r\n  background: ${({ theme }) => theme.background};\r\n  border-radius: 10px;\r\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\r\n  font-family: ${({ theme }) => theme.fontFamily};\r\n  overflow: hidden;\r\n  position: ${({ floating }) => (floating ? 'fixed' : 'relative')};\r\n  bottom: ${({ floating, floatingStyle }) =>\r\n    floating ? floatingStyle.bottom || '32px' : 'initial'};\r\n  top: ${({ floating, floatingStyle }) => (floating ? floatingStyle.top || 'initial' : 'initial')};\r\n  right: ${({ floating, floatingStyle }) => (floating ? floatingStyle.right || '32px' : 'initial')};\r\n  left: ${({ floating, floatingStyle }) =>\r\n    floating ? floatingStyle.left || 'initial' : 'initial'};\r\n  width: ${({ width }) => width};\r\n  height: ${({ height }) => height};\r\n  z-index: 999;\r\n  transform: ${({ opened }) => (opened ? 'scale(1)' : 'scale(0)')};\r\n  transform-origin: ${({ floatingStyle }) => floatingStyle.transformOrigin || 'bottom right'};\r\n  transition: transform 0.3s ease;\r\n\r\n  @media screen and (max-width: 568px) {\r\n    border-radius: ${({ floating }) => (floating ? '0' : '')};\r\n    bottom: 0 !important;\r\n    left: initial !important;\r\n    height: 100%;\r\n    right: 0 !important;\r\n    top: initial !important;\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nChatBotContainer.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default ChatBotContainer;\r\n","import styled from 'styled-components';\r\n\r\nconst Content = styled.div`\r\n  height: calc(${props => props.height} - ${props => (props.hideInput ? '56px' : '112px')});\r\n  overflow-y: scroll;\r\n  margin-top: 2px;\r\n  padding-top: 6px;\r\n\r\n  @media screen and (max-width: 568px) {\r\n    height: ${props => (props.floating ? 'calc(100% - 112px)' : '')};\r\n  }\r\n`;\r\n\r\nexport default Content;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst Header = styled.div`\r\n  align-items: center;\r\n  background: ${({ theme }) => theme.headerBgColor};\r\n  color: ${({ theme }) => theme.headerFontColor};\r\n  display: flex;\r\n  fill: ${({ theme }) => theme.headerFontColor};\r\n  height: 56px;\r\n  justify-content: space-between;\r\n  padding: 0 10px;\r\n`;\r\n\r\nHeader.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default Header;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst HeaderTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: ${({ theme }) => theme.headerFontSize};\r\n`;\r\n\r\nHeaderTitle.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default HeaderTitle;\r\n","import styled from 'styled-components';\r\n\r\nconst HeaderIcon = styled.a`\r\n  cursor: pointer;\r\n`;\r\n\r\nexport default HeaderIcon;\r\n","import styled from 'styled-components';\r\n\r\nconst FloatButton = styled.a`\r\n  align-items: center;\r\n  cursor: pointer;\r\n  background: ${({ theme }) => theme.headerBgColor};\r\n  bottom: 32px;\r\n  border-radius: 100%;\r\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\r\n  display: flex;\r\n  fill: ${({ theme }) => theme.headerFontColor};\r\n  height: 56px;\r\n  justify-content: center;\r\n  position: fixed;\r\n  right: 32px;\r\n  transform: ${props => (props.opened ? 'scale(0)' : 'scale(1)')};\r\n  transition: transform 0.3s ease;\r\n  width: 56px;\r\n  z-index: 999;\r\n`;\r\n\r\nFloatButton.defaultProps = {\r\n  theme: {\r\n    headerBgColor: '#6e48aa',\r\n    headerFontColor: '#fff'\r\n  }\r\n};\r\n\r\nexport default FloatButton;\r\n","import styled from 'styled-components';\r\n\r\nconst FloatingIcon = styled.img`\r\n  height: 24px;\r\n  width: 24px;\r\n`;\r\n\r\nexport default FloatingIcon;\r\n","import styled from 'styled-components';\r\n\r\nconst Footer = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nexport default Footer;\r\n","import { invalidInput } from '../common/animations';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst Input = styled.input`\r\n  animation: ${props =>\r\n    props.invalid\r\n      ? css`\r\n          ${invalidInput} .2s ease\r\n        `\r\n      : ''};\r\n  border: 0;\r\n  border-radius: 0;\r\n  border-bottom-left-radius: 10px;\r\n  border-bottom-right-radius: 10px;\r\n  border-top: ${props => (props.invalid ? '0' : '1px solid #eee')};\r\n  box-shadow: ${props => (props.invalid ? 'inset 0 0 2px #E53935' : 'none')};\r\n  box-sizing: border-box;\r\n  color: ${props => (props.invalid ? '#E53935' : '')};\r\n  font-size: 16px;\r\n  opacity: ${props => (props.disabled && !props.invalid ? '.5' : '1')};\r\n  outline: none;\r\n  padding: ${props => (props.hasButton ? '16px 52px 16px 10px' : '16px 10px')};\r\n  width: 100%;\r\n  -webkit-appearance: none;\r\n\r\n  &:disabled {\r\n    background: #fff;\r\n  }\r\n\r\n  @media screen and (max-width: 568px) {\r\n    border-bottom-left-radius: ${props => (props.floating ? '0' : '10px')};\r\n    border-bottom-right-radius: ${props => (props.floating ? '0' : '10px')};\r\n  }\r\n`;\r\n\r\nexport default Input;\r\n","import styled, { css } from 'styled-components';\r\nimport defaultTheme from '../theme';\r\nimport { pulse } from '../common/animations';\r\n\r\nconst fillFunc = props => {\r\n  const { speaking, invalid, theme } = props;\r\n\r\n  if (speaking) {\r\n    return theme.headerBgColor;\r\n  }\r\n  return invalid ? '#E53935' : '#4a4a4a';\r\n};\r\n\r\nconst SubmitButton = styled.button`\r\n  background-color: transparent;\r\n  border: 0;\r\n  border-bottom-right-radius: 10px;\r\n  box-shadow: none;\r\n  cursor: ${props => (props.disabled ? 'default' : 'pointer')};\r\n  fill: ${fillFunc};\r\n  opacity: ${props => (props.disabled && !props.invalid ? '.5' : '1')};\r\n  outline: none;\r\n  padding: 14px 16px 12px 16px;\r\n  &:before {\r\n    content: '';\r\n    position: absolute;\r\n    width: 23px;\r\n    height: 23px;\r\n    border-radius: 50%;\r\n    animation: ${({ theme, speaking }) =>\r\n      speaking\r\n        ? css`\r\n            ${pulse(theme.headerBgColor)} 2s ease infinite\r\n          `\r\n        : ''};\r\n  }\r\n  &:not(:disabled):hover {\r\n    opacity: 0.7;\r\n  }\r\n`;\r\n\r\nSubmitButton.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default SubmitButton;\r\n","let instance = null;\r\n\r\nconst noop = () => {};\r\n\r\nexport default class Recognition {\r\n  static isSupported() {\r\n    return 'webkitSpeechRecognition' in window;\r\n  }\r\n\r\n  /**\r\n   * Creates an instance of Recognition.\r\n   * @param {function} [onChange] callback on change\r\n   * @param {function} [onEnd]  callback on and\r\n   * @param {function} [onStop]  callback on stop\r\n   * @param {string} [lang='en'] recognition lang\r\n   * @memberof Recognition\r\n   * @constructor\r\n   */\r\n  constructor(onChange = noop, onEnd = noop, onStop = noop, lang = 'en') {\r\n    if (!instance) {\r\n      instance = this;\r\n    }\r\n    this.state = {\r\n      inputValue: '',\r\n      lang,\r\n      onChange,\r\n      onEnd,\r\n      onStop\r\n    };\r\n\r\n    this.onResult = this.onResult.bind(this);\r\n    this.onEnd = this.onEnd.bind(this);\r\n\r\n    this.setup();\r\n\r\n    return instance;\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition change event\r\n   * @param {string} interimTranscript\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onChange(interimTranscript) {\r\n    const { onChange } = this.state;\r\n    this.setState({\r\n      inputValue: interimTranscript\r\n    });\r\n    onChange(interimTranscript);\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition change event when its final\r\n   * @param {string} finalTranscript\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onFinal(finalTranscript) {\r\n    this.setState({\r\n      inputValue: finalTranscript\r\n    });\r\n    this.recognition.stop();\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition end event\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onEnd() {\r\n    const { onStop, onEnd, force } = this.state;\r\n    this.setState({ speaking: false });\r\n    if (force) {\r\n      onStop();\r\n    } else {\r\n      onEnd();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition result event\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onResult(event) {\r\n    let interimTranscript = '';\r\n    let finalTranscript = '';\r\n\r\n    for (let i = event.resultIndex; i < event.results.length; i += 1) {\r\n      if (event.results[i].isFinal) {\r\n        finalTranscript += event.results[i][0].transcript;\r\n        this.onFinal(finalTranscript);\r\n      } else {\r\n        interimTranscript += event.results[i][0].transcript;\r\n        this.onChange(interimTranscript);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * method for updating the instance state\r\n   * @param {object} nextState\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  setState(nextState) {\r\n    this.state = Object.assign({}, this.state, nextState);\r\n  }\r\n\r\n  /**\r\n   * setup the browser recognition\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  setup() {\r\n    if (!Recognition.isSupported()) {\r\n      return this;\r\n    }\r\n\r\n    const { webkitSpeechRecognition } = window;\r\n\r\n    this.recognition = new webkitSpeechRecognition();\r\n    this.recognition.continuous = true;\r\n    this.recognition.interimResults = true;\r\n    this.recognition.lang = this.state.lang;\r\n    this.recognition.onresult = this.onResult;\r\n    this.recognition.onend = this.onEnd;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * change the recognition lang and resetup\r\n   * @param {string} lang the new lang\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  setLang(lang) {\r\n    this.setState({ lang });\r\n    this.setup();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * toggle the recognition\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  speak() {\r\n    if (!Recognition.isSupported()) {\r\n      return this;\r\n    }\r\n    const { speaking } = this.state;\r\n    if (!speaking) {\r\n      this.recognition.start();\r\n      this.setState({\r\n        speaking: true,\r\n        inputValue: ''\r\n      });\r\n    } else {\r\n      this.setState({\r\n        force: true\r\n      });\r\n      this.recognition.stop();\r\n    }\r\n    return this;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst ChatIcon = () => (\r\n  <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z\" />\r\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n  </svg>\r\n);\r\n\r\nexport default ChatIcon;\r\n","import React from 'react';\r\n\r\nconst CloseIcon = () => (\r\n  <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path\r\n      d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12\r\n      13.41 17.59 19 19 17.59 13.41 12z\"\r\n    />\r\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n  </svg>\r\n);\r\n\r\nexport default CloseIcon;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst SubmitIcon = ({ size }) => (\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width={size}\r\n    height={size}\r\n    viewBox=\"0 0 500 500\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <polygon points=\"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75\" />\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nSubmitIcon.propTypes = {\r\n  size: PropTypes.number\r\n};\r\n\r\nSubmitIcon.defaultProps = {\r\n  size: 20\r\n};\r\n\r\nexport default SubmitIcon;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst MicIcon = ({ size }) => (\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width={size}\r\n    height={size}\r\n    viewBox=\"0 0 400 400\"\r\n  >\r\n    <g>\r\n      <path d=\"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z\" />\r\n      <path d=\"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z\" />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nMicIcon.propTypes = {\r\n  size: PropTypes.number\r\n};\r\n\r\nMicIcon.defaultProps = {\r\n  size: 20\r\n};\r\n\r\nexport default MicIcon;\r\n","export const isMobile = () => /iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent);\r\n\r\nexport const isString = value => typeof value === 'string';\r\n","import { isString } from './utils';\r\n\r\nexport const getSpeakText = step => {\r\n  const { message, metadata = {} } = step;\r\n  if (isString(metadata.speak)) {\r\n    return metadata.speak;\r\n  }\r\n  if (isString(message)) {\r\n    return message;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const speakFn = speechSynthesisOptions => (step, previousValue) => {\r\n  const { lang, voice, enable } = speechSynthesisOptions;\r\n  const { user } = step;\r\n\r\n  if (!window.SpeechSynthesisUtterance || !window.speechSynthesis) {\r\n    return;\r\n  }\r\n  if (user) {\r\n    return;\r\n  }\r\n  if (!enable) {\r\n    return;\r\n  }\r\n  const text = getSpeakText(step);\r\n  const msg = new window.SpeechSynthesisUtterance();\r\n  msg.text = text.replace(/{previousValue}/g, previousValue);\r\n  msg.lang = lang;\r\n  msg.voice = voice;\r\n  window.speechSynthesis.speak(msg);\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Random from 'random-id';\r\nimport { CustomStep, OptionsStep, TextStep } from './steps_components';\r\nimport schema from './schemas/schema';\r\nimport * as storage from './storage';\r\nimport {\r\n  ChatBotContainer,\r\n  Content,\r\n  Header,\r\n  HeaderTitle,\r\n  HeaderIcon,\r\n  FloatButton,\r\n  FloatingIcon,\r\n  Footer,\r\n  Input,\r\n  SubmitButton\r\n} from './components';\r\nimport Recognition from './recognition';\r\nimport { ChatIcon, CloseIcon, SubmitIcon, MicIcon } from './icons';\r\nimport { isMobile } from './utils';\r\nimport { speakFn } from './speechSynthesis';\r\nimport { isNull } from 'lodash';\r\n\r\nclass ChatBot extends Component {\r\n  /* istanbul ignore next */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.content = null;\r\n    this.input = null;\r\n\r\n    this.supportsScrollBehavior = false;\r\n\r\n    this.setContentRef = element => {\r\n      this.content = element;\r\n    };\r\n\r\n    this.setInputRef = element => {\r\n      this.input = element;\r\n    };\r\n\r\n    this.state = {\r\n      renderedSteps: [],\r\n      previousSteps: [],\r\n      currentStep: {},\r\n      previousStep: {},\r\n      steps: {},\r\n      disabled: true,\r\n      opened: props.opened || !props.floating,\r\n      inputValue: '',\r\n      inputInvalid: false,\r\n      speaking: false,\r\n      recognitionEnable: props.recognitionEnable && Recognition.isSupported(),\r\n      defaultUserSettings: {}\r\n    };\r\n\r\n    this.speak = speakFn(props.speechSynthesis);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { steps } = this.props;\r\n    const {\r\n      botDelay,\r\n      botAvatar,\r\n      botName,\r\n      cache,\r\n      cacheName,\r\n      customDelay,\r\n      enableMobileAutoFocus,\r\n      userAvatar,\r\n      userDelay\r\n    } = this.props;\r\n    const chatSteps = {};\r\n\r\n    const defaultBotSettings = { delay: botDelay, avatar: botAvatar, botName };\r\n    const defaultUserSettings = {\r\n      delay: userDelay,\r\n      avatar: userAvatar,\r\n      hideInput: false,\r\n      hideExtraControl: false\r\n    };\r\n    const defaultCustomSettings = { delay: customDelay };\r\n\r\n    for (let i = 0, len = steps.length; i < len; i += 1) {\r\n      const step = steps[i];\r\n      let settings = {};\r\n\r\n      if (step.user) {\r\n        settings = defaultUserSettings;\r\n      } else if (step.message || step.asMessage) {\r\n        settings = defaultBotSettings;\r\n      } else if (step.component) {\r\n        settings = defaultCustomSettings;\r\n      }\r\n\r\n      chatSteps[step.id] = Object.assign({}, settings, schema.parse(step));\r\n    }\r\n\r\n    schema.checkInvalidIds(chatSteps);\r\n\r\n    const firstStep = steps[0];\r\n\r\n    if (firstStep.message) {\r\n      const { message } = firstStep;\r\n      firstStep.message = typeof message === 'function' ? message() : message;\r\n      chatSteps[firstStep.id].message = firstStep.message;\r\n    }\r\n\r\n    const { recognitionEnable } = this.state;\r\n    const { recognitionLang } = this.props;\r\n\r\n    if (recognitionEnable) {\r\n      this.recognition = new Recognition(\r\n        this.onRecognitionChange,\r\n        this.onRecognitionEnd,\r\n        this.onRecognitionStop,\r\n        recognitionLang\r\n      );\r\n    }\r\n\r\n    this.supportsScrollBehavior = 'scrollBehavior' in document.documentElement.style;\r\n\r\n    if (this.content) {\r\n      this.content.addEventListener('DOMNodeInserted', this.onNodeInserted);\r\n      window.addEventListener('resize', this.onResize);\r\n    }\r\n\r\n    const { currentStep, previousStep, previousSteps, renderedSteps } = storage.getData(\r\n      {\r\n        cacheName,\r\n        cache,\r\n        firstStep,\r\n        steps: chatSteps\r\n      },\r\n      () => {\r\n        // focus input if last step cached is a user step\r\n        this.setState({ disabled: false }, () => {\r\n          if (enableMobileAutoFocus || !isMobile()) {\r\n            if (this.input) {\r\n              this.input.focus();\r\n            }\r\n          }\r\n        });\r\n      }\r\n    );\r\n\r\n    this.setState({\r\n      currentStep,\r\n      defaultUserSettings,\r\n      previousStep,\r\n      previousSteps,\r\n      renderedSteps,\r\n      steps: chatSteps\r\n    });\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { opened, toggleFloating } = props;\r\n    if (toggleFloating !== undefined && opened !== undefined && opened !== state.opened) {\r\n      return {\r\n        ...state,\r\n        opened\r\n      };\r\n    }\r\n    return state;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.content) {\r\n      this.content.removeEventListener('DOMNodeInserted', this.onNodeInserted);\r\n      window.removeEventListener('resize', this.onResize);\r\n    }\r\n  }\r\n\r\n  onNodeInserted = event => {\r\n    const { currentTarget: target } = event;\r\n    const { enableSmoothScroll } = this.props;\r\n\r\n    if (enableSmoothScroll && this.supportsScrollBehavior) {\r\n      target.scroll({\r\n        top: target.scrollHeight,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    } else {\r\n      target.scrollTop = target.scrollHeight;\r\n    }\r\n  };\r\n\r\n  onResize = () => {\r\n    this.content.scrollTop = this.content.scrollHeight;\r\n  };\r\n\r\n  onRecognitionChange = value => {\r\n    this.setState({ inputValue: value });\r\n  };\r\n\r\n  onRecognitionEnd = () => {\r\n    this.setState({ speaking: false });\r\n    this.handleSubmitButton();\r\n  };\r\n\r\n  onRecognitionStop = () => {\r\n    this.setState({ speaking: false });\r\n  };\r\n\r\n  onValueChange = event => {\r\n    this.setState({ inputValue: event.target.value });\r\n  };\r\n\r\n  getTriggeredStep = (trigger, value) => {\r\n    const steps = this.generateRenderedStepsById();\r\n    return typeof trigger === 'function' ? trigger({ value, steps }) : trigger;\r\n  };\r\n\r\n  getStepMessage = message => {\r\n    const { previousSteps } = this.state;\r\n    const lastStepIndex = previousSteps.length > 0 ? previousSteps.length - 1 : 0;\r\n    const steps = this.generateRenderedStepsById();\r\n    const previousValue = previousSteps[lastStepIndex].value;\r\n    return typeof message === 'function' ? message({ previousValue, steps }) : message;\r\n  };\r\n\r\n  generateRenderedStepsById = () => {\r\n    const { previousSteps } = this.state;\r\n    const steps = {};\r\n\r\n    for (let i = 0, len = previousSteps.length; i < len; i += 1) {\r\n      const { id, message, value, metadata } = previousSteps[i];\r\n\r\n      steps[id] = {\r\n        id,\r\n        message,\r\n        value,\r\n        metadata\r\n      };\r\n    }\r\n\r\n    return steps;\r\n  };\r\n\r\n  triggerNextStep = data => {\r\n    const { enableMobileAutoFocus } = this.props;\r\n    const { defaultUserSettings, previousSteps, renderedSteps, steps } = this.state;\r\n\r\n    let { currentStep, previousStep } = this.state;\r\n    const isEnd = currentStep.end;\r\n\r\n    if (data && data.value) {\r\n      currentStep.value = data.value;\r\n    }\r\n    if (data && data.hideInput) {\r\n      currentStep.hideInput = data.hideInput;\r\n    }\r\n    if (data && data.hideExtraControl) {\r\n      currentStep.hideExtraControl = data.hideExtraControl;\r\n    }\r\n    if (data && data.trigger) {\r\n      currentStep.trigger = this.getTriggeredStep(data.trigger, data.value);\r\n    }\r\n\r\n    if (isEnd) {\r\n      this.handleEnd();\r\n    } else if (currentStep.options && data) {\r\n      const option = currentStep.options.filter(o => o.value === data.value)[0];\r\n      const trigger = this.getTriggeredStep(option.trigger, currentStep.value);\r\n      delete currentStep.options;\r\n      \r\n      // replace choose option for user message\r\n      currentStep = Object.assign({}, currentStep, option, defaultUserSettings, {\r\n        user: true,\r\n        message: option.label,\r\n        trigger\r\n      });     \r\n      renderedSteps.pop();\r\n      previousSteps.pop();\r\n      renderedSteps.push(currentStep);\r\n      previousSteps.push(currentStep);\r\n\r\n      this.setState({\r\n        currentStep,\r\n        renderedSteps,\r\n        previousSteps\r\n      });\r\n    } else if (currentStep.trigger && currentStep.replace && data) {\r\n        const trigger = this.getTriggeredStep(currentStep.trigger, currentStep.value);      \r\n        const val = currentStep.value;\r\n        const msg = data.msg;\r\n        const stepMsg = data.stepMsg;\r\n\r\n        delete currentStep.component;  \r\n        if(data.preserveMsg){\r\n          const defaultBotSettings = { delay: 0, avatar: this.props.botAvatar, botName: this.props.botName };\r\n         \r\n          const thisStepMsg = {id:currentStep.id, key: currentStep.key, msg: stepMsg, trigger: ''};\r\n          const nextS = Object.assign({}, thisStepMsg, 0, defaultBotSettings, {\r\n            user: false,\r\n            message: stepMsg,\r\n            rendered:true,\r\n            \r\n          }); \r\n          delete currentStep.component;\r\n          delete currentStep.trigger;\r\n\r\n          currentStep = Object.assign({}, currentStep, val, defaultUserSettings, {\r\n            user: true,\r\n            message: msg,\r\n            trigger: trigger,            \r\n          });\r\n          renderedSteps.pop();\r\n          previousSteps.pop();\r\n          renderedSteps.push(nextS);\r\n          previousSteps.push(nextS);\r\n          renderedSteps.push(currentStep);\r\n          previousSteps.push(currentStep);\r\n          this.setState({\r\n            currentStep,\r\n            renderedSteps,\r\n            previousSteps\r\n          });\r\n        } else {\r\n          delete currentStep.component;    \r\n          const usrMsg = !isNull(msg);\r\n          const out = usrMsg?msg:stepMsg;\r\n          currentStep = Object.assign({}, currentStep, val, defaultUserSettings, {\r\n            user: usrMsg,\r\n            message: out,\r\n            trigger\r\n          }); \r\n          \r\n          renderedSteps.pop();\r\n          previousSteps.pop();\r\n          renderedSteps.push(currentStep);\r\n          previousSteps.push(currentStep);\r\n          \r\n          this.setState({\r\n            currentStep,\r\n            renderedSteps,\r\n            previousSteps\r\n          });\r\n        }\r\n      } else if (currentStep.trigger) {      \r\n      \r\n       const trigger = this.getTriggeredStep(currentStep.trigger, currentStep.value);  \r\n        let nextStep = Object.assign({}, steps[trigger]);\r\n     \r\n      if (nextStep.message) {\r\n        nextStep.message = this.getStepMessage(nextStep.message);\r\n      } else if (nextStep.update) {\r\n        const updateStep = nextStep;\r\n        nextStep = Object.assign({}, steps[updateStep.update]);\r\n\r\n        if (nextStep.options) {\r\n          for (let i = 0, len = nextStep.options.length; i < len; i += 1) {\r\n            nextStep.options[i].trigger = updateStep.trigger;\r\n          }\r\n        } else {\r\n          nextStep.trigger = updateStep.trigger;\r\n        }\r\n      }\r\n\r\n      nextStep.key = Random(24);\r\n\r\n      previousStep = currentStep;\r\n      currentStep = nextStep;\r\n\r\n      this.setState({ renderedSteps, currentStep, previousStep }, () => {\r\n        if (nextStep.user) {\r\n          this.setState({ disabled: false }, () => {\r\n            if (enableMobileAutoFocus || !isMobile()) {\r\n              if (this.input) {\r\n                this.input.focus();\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          renderedSteps.push(nextStep);\r\n          previousSteps.push(nextStep);\r\n\r\n          this.setState({ renderedSteps, previousSteps });\r\n        }\r\n      });\r\n    }\r\n\r\n    const { cache, cacheName } = this.props;\r\n    if (cache) {\r\n      setTimeout(() => {\r\n        storage.setData(cacheName, {\r\n          currentStep,\r\n          previousStep,\r\n          previousSteps,\r\n          renderedSteps\r\n        });\r\n      }, 300);\r\n    }\r\n  };\r\n\r\n  handleEnd = () => {\r\n    const { handleEnd } = this.props;\r\n\r\n    if (handleEnd) {\r\n      const { previousSteps } = this.state;\r\n\r\n      const renderedSteps = previousSteps.map(step => {\r\n        const { id, message, value, metadata } = step;\r\n\r\n        return {\r\n          id,\r\n          message,\r\n          value,\r\n          metadata\r\n        };\r\n      });\r\n\r\n      const steps = [];\r\n\r\n      for (let i = 0, len = previousSteps.length; i < len; i += 1) {\r\n        const { id, message, value, metadata } = previousSteps[i];\r\n\r\n        steps[id] = {\r\n          id,\r\n          message,\r\n          value,\r\n          metadata\r\n        };\r\n      }\r\n\r\n      const values = previousSteps.filter(step => step.value).map(step => step.value);\r\n\r\n      handleEnd({ renderedSteps, steps, values });\r\n    }\r\n  };\r\n\r\n  isInputValueEmpty = () => {\r\n    const { inputValue } = this.state;\r\n    return !inputValue || inputValue.length === 0;\r\n  };\r\n\r\n  isLastPosition = step => {\r\n    const { renderedSteps } = this.state;\r\n    const { length } = renderedSteps;\r\n    const stepIndex = renderedSteps.map(s => s.key).indexOf(step.key);\r\n\r\n    if (length <= 1 || stepIndex + 1 === length) {\r\n      return true;\r\n    }\r\n\r\n    const nextStep = renderedSteps[stepIndex + 1];\r\n    const hasMessage = nextStep.message || nextStep.asMessage;\r\n\r\n    if (!hasMessage) {\r\n      return true;\r\n    }\r\n\r\n    const isLast = step.user !== nextStep.user;\r\n    return isLast;\r\n  };\r\n\r\n  isFirstPosition = step => {\r\n    const { renderedSteps } = this.state;\r\n    const stepIndex = renderedSteps.map(s => s.key).indexOf(step.key);\r\n\r\n    if (stepIndex === 0) {\r\n      return true;\r\n    }\r\n\r\n    const lastStep = renderedSteps[stepIndex - 1];\r\n    const hasMessage = lastStep.message || lastStep.asMessage;\r\n\r\n    if (!hasMessage) {\r\n      return true;\r\n    }\r\n\r\n    const isFirst = step.user !== lastStep.user;\r\n    return isFirst;\r\n  };\r\n\r\n  handleKeyPress = event => {\r\n    if (event.key === 'Enter') {\r\n      this.submitUserMessage();\r\n    }\r\n  };\r\n\r\n  handleSubmitButton = () => {\r\n    const { speaking, recognitionEnable } = this.state;\r\n\r\n    if ((this.isInputValueEmpty() || speaking) && recognitionEnable) {\r\n      this.recognition.speak();\r\n      if (!speaking) {\r\n        this.setState({ speaking: true });\r\n      }\r\n      return;\r\n    }\r\n\r\n    this.submitUserMessage();\r\n  };\r\n\r\n  submitUserMessage = () => {\r\n    const { defaultUserSettings, inputValue, previousSteps, renderedSteps } = this.state;\r\n    let { currentStep } = this.state;\r\n\r\n    const isInvalid = currentStep.validator && this.checkInvalidInput();\r\n\r\n    if (!isInvalid) {\r\n      const step = {\r\n        message: inputValue,\r\n        value: inputValue\r\n      };\r\n\r\n      currentStep = Object.assign({}, defaultUserSettings, currentStep, step);\r\n\r\n      renderedSteps.push(currentStep);\r\n      previousSteps.push(currentStep);\r\n\r\n      this.setState(\r\n        {\r\n          currentStep,\r\n          renderedSteps,\r\n          previousSteps,\r\n          disabled: true,\r\n          inputValue: ''\r\n        },\r\n        () => {\r\n          if (this.input) {\r\n            this.input.blur();\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  checkInvalidInput = () => {\r\n    const { enableMobileAutoFocus } = this.props;\r\n    const { currentStep, inputValue } = this.state;\r\n    const result = currentStep.validator(inputValue);\r\n    const value = inputValue;\r\n\r\n    if (typeof result !== 'boolean' || !result) {\r\n      this.setState(\r\n        {\r\n          inputValue: result.toString(),\r\n          inputInvalid: true,\r\n          disabled: true\r\n        },\r\n        () => {\r\n          setTimeout(() => {\r\n            this.setState(\r\n              {\r\n                inputValue: value,\r\n                inputInvalid: false,\r\n                disabled: false\r\n              },\r\n              () => {\r\n                if (enableMobileAutoFocus || !isMobile()) {\r\n                  if (this.input) {\r\n                    this.input.focus();\r\n                  }\r\n                }\r\n              }\r\n            );\r\n          }, 2000);\r\n        }\r\n      );\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  toggleChatBot = opened => {\r\n    const { toggleFloating } = this.props;\r\n\r\n    if (toggleFloating) {\r\n      toggleFloating({ opened });\r\n    } else {\r\n      this.setState({ opened });\r\n    }\r\n  };\r\n\r\n  renderStep = (step, index) => {\r\n    const { renderedSteps } = this.state;\r\n    const {\r\n      avatarStyle,\r\n      bubbleStyle,\r\n      bubbleOptionStyle,\r\n      customStyle,\r\n      hideBotAvatar,\r\n      hideUserAvatar,\r\n      speechSynthesis\r\n    } = this.props;\r\n    const { options, component, asMessage } = step;\r\n    const steps = this.generateRenderedStepsById();\r\n    const previousStep = index > 0 ? renderedSteps[index - 1] : {};\r\n\r\n    if (component && !asMessage) {\r\n      return (\r\n        <CustomStep\r\n          key={index}\r\n          speak={this.speak}\r\n          step={step}\r\n          steps={steps}\r\n          style={customStyle}\r\n          previousStep={previousStep}\r\n          previousValue={previousStep.value}\r\n          triggerNextStep={this.triggerNextStep}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (options) {\r\n      return (\r\n        <OptionsStep\r\n          key={index}\r\n          step={step}\r\n          previousValue={previousStep.value}\r\n          triggerNextStep={this.triggerNextStep}\r\n          bubbleOptionStyle={bubbleOptionStyle}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <TextStep\r\n        key={index}\r\n        step={step}\r\n        steps={steps}\r\n        speak={this.speak}\r\n        previousStep={previousStep}\r\n        previousValue={previousStep.value}\r\n        triggerNextStep={this.triggerNextStep}\r\n        avatarStyle={avatarStyle}\r\n        bubbleStyle={bubbleStyle}\r\n        hideBotAvatar={hideBotAvatar}\r\n        hideUserAvatar={hideUserAvatar}\r\n        speechSynthesis={speechSynthesis}\r\n        isFirst={this.isFirstPosition(step)}\r\n        isLast={this.isLastPosition(step)}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      currentStep,\r\n      disabled,\r\n      inputInvalid,\r\n      inputValue,\r\n      opened,\r\n      renderedSteps,\r\n      speaking,\r\n      recognitionEnable\r\n    } = this.state;\r\n    const {\r\n      className,\r\n      contentStyle,\r\n      extraControl,\r\n      controlStyle,\r\n      floating,\r\n      floatingIcon,\r\n      floatingStyle,\r\n      footerStyle,\r\n      headerComponent,\r\n      headerTitle,\r\n      hideHeader,\r\n      hideSubmitButton,\r\n      inputStyle,\r\n      placeholder,\r\n      inputAttributes,\r\n      recognitionPlaceholder,\r\n      style,\r\n      submitButtonStyle,\r\n      width,\r\n      height\r\n    } = this.props;\r\n\r\n    const header = headerComponent || (\r\n      <Header className=\"rsc-header\">\r\n        <HeaderTitle className=\"rsc-header-title\">{headerTitle}</HeaderTitle>\r\n        {floating && (\r\n          <HeaderIcon className=\"rsc-header-close-button\" onClick={() => this.toggleChatBot(false)}>\r\n            <CloseIcon />\r\n          </HeaderIcon>\r\n        )}\r\n      </Header>\r\n    );\r\n\r\n    let customControl;\r\n    if (extraControl !== undefined) {\r\n      customControl = React.cloneElement(extraControl, {\r\n        disabled,\r\n        speaking,\r\n        invalid: inputInvalid\r\n      });\r\n    }\r\n\r\n    const icon =\r\n      (this.isInputValueEmpty() || speaking) && recognitionEnable ? <MicIcon /> : <SubmitIcon />;\r\n\r\n    const inputPlaceholder = speaking\r\n      ? recognitionPlaceholder\r\n      : currentStep.placeholder || placeholder;\r\n\r\n    const inputAttributesOverride = currentStep.inputAttributes || inputAttributes;\r\n\r\n    return (\r\n      <div className={`rsc ${className}`}>\r\n        {floating && (\r\n          <FloatButton\r\n            className=\"rsc-float-button\"\r\n            style={floatingStyle}\r\n            opened={opened}\r\n            onClick={() => this.toggleChatBot(true)}\r\n          >\r\n            {typeof floatingIcon === 'string' ? <FloatingIcon src={floatingIcon} /> : floatingIcon}\r\n          </FloatButton>\r\n        )}\r\n        <ChatBotContainer\r\n          className=\"rsc-container\"\r\n          floating={floating}\r\n          floatingStyle={floatingStyle}\r\n          opened={opened}\r\n          style={style}\r\n          width={width}\r\n          height={height}\r\n        >\r\n          {!hideHeader && header}\r\n          <Content\r\n            className=\"rsc-content\"\r\n            ref={this.setContentRef}\r\n            floating={floating}\r\n            style={contentStyle}\r\n            height={height}\r\n            hideInput={currentStep.hideInput}\r\n          >\r\n            {renderedSteps.map(this.renderStep)}\r\n          </Content>\r\n          <Footer className=\"rsc-footer\" style={footerStyle}>\r\n            {!currentStep.hideInput && (\r\n              <Input\r\n                type=\"textarea\"\r\n                style={inputStyle}\r\n                ref={this.setInputRef}\r\n                className=\"rsc-input\"\r\n                placeholder={inputInvalid ? '' : inputPlaceholder}\r\n                onKeyPress={this.handleKeyPress}\r\n                onChange={this.onValueChange}\r\n                value={inputValue}\r\n                floating={floating}\r\n                invalid={inputInvalid}\r\n                disabled={disabled}\r\n                hasButton={!hideSubmitButton}\r\n                {...inputAttributesOverride}\r\n              />\r\n            )}\r\n            <div style={controlStyle} className=\"rsc-controls\">\r\n              {!currentStep.hideInput && !currentStep.hideExtraControl && customControl}\r\n              {!currentStep.hideInput && !hideSubmitButton && (\r\n                <SubmitButton\r\n                  className=\"rsc-submit-button\"\r\n                  style={submitButtonStyle}\r\n                  onClick={this.handleSubmitButton}\r\n                  invalid={inputInvalid}\r\n                  disabled={disabled}\r\n                  speaking={speaking}\r\n                >\r\n                  {icon}\r\n                </SubmitButton>\r\n              )}\r\n            </div>\r\n          </Footer>\r\n        </ChatBotContainer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChatBot.propTypes = {\r\n  avatarStyle: PropTypes.objectOf(PropTypes.any),\r\n  botAvatar: PropTypes.string,\r\n  botName: PropTypes.string,\r\n  botDelay: PropTypes.number,\r\n  bubbleOptionStyle: PropTypes.objectOf(PropTypes.any),\r\n  bubbleStyle: PropTypes.objectOf(PropTypes.any),\r\n  cache: PropTypes.bool,\r\n  cacheName: PropTypes.string,\r\n  className: PropTypes.string,\r\n  contentStyle: PropTypes.objectOf(PropTypes.any),\r\n  customDelay: PropTypes.number,\r\n  customStyle: PropTypes.objectOf(PropTypes.any),\r\n  controlStyle: PropTypes.objectOf(PropTypes.any),\r\n  enableMobileAutoFocus: PropTypes.bool,\r\n  enableSmoothScroll: PropTypes.bool,\r\n  extraControl: PropTypes.objectOf(PropTypes.element),\r\n  floating: PropTypes.bool,\r\n  floatingIcon: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\r\n  floatingStyle: PropTypes.objectOf(PropTypes.any),\r\n  footerStyle: PropTypes.objectOf(PropTypes.any),\r\n  handleEnd: PropTypes.func,\r\n  headerComponent: PropTypes.element,\r\n  headerTitle: PropTypes.string,\r\n  height: PropTypes.string,\r\n  hideBotAvatar: PropTypes.bool,\r\n  hideHeader: PropTypes.bool,\r\n  hideSubmitButton: PropTypes.bool,\r\n  hideUserAvatar: PropTypes.bool,\r\n  inputAttributes: PropTypes.objectOf(PropTypes.any),\r\n  inputStyle: PropTypes.objectOf(PropTypes.any),\r\n  opened: PropTypes.bool,\r\n  toggleFloating: PropTypes.func,\r\n  placeholder: PropTypes.string,\r\n  recognitionEnable: PropTypes.bool,\r\n  recognitionLang: PropTypes.string,\r\n  recognitionPlaceholder: PropTypes.string,\r\n  speechSynthesis: PropTypes.shape({\r\n    enable: PropTypes.bool,\r\n    lang: PropTypes.string,\r\n    voice:\r\n      typeof window !== 'undefined'\r\n        ? PropTypes.instanceOf(window.SpeechSynthesisVoice)\r\n        : PropTypes.any\r\n  }),\r\n  steps: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  style: PropTypes.objectOf(PropTypes.any),\r\n  submitButtonStyle: PropTypes.objectOf(PropTypes.any),\r\n  userAvatar: PropTypes.string,\r\n  userDelay: PropTypes.number,\r\n  width: PropTypes.string\r\n};\r\n\r\nChatBot.defaultProps = {\r\n  avatarStyle: {},\r\n  botDelay: 1000,\r\n  botName: 'The bot',\r\n  bubbleOptionStyle: {},\r\n  bubbleStyle: {},\r\n  cache: false,\r\n  cacheName: 'rsc_cache',\r\n  className: '',\r\n  contentStyle: {},\r\n  customStyle: {},\r\n  controlStyle: { position: 'absolute', right: '0', top: '0' },\r\n  customDelay: 1000,\r\n  enableMobileAutoFocus: false,\r\n  enableSmoothScroll: false,\r\n  extraControl: undefined,\r\n  floating: false,\r\n  floatingIcon: <ChatIcon />,\r\n  floatingStyle: {},\r\n  footerStyle: {},\r\n  handleEnd: undefined,\r\n  headerComponent: undefined,\r\n  headerTitle: 'Chat',\r\n  height: '520px',\r\n  hideBotAvatar: false,\r\n  hideHeader: false,\r\n  hideSubmitButton: false,\r\n  hideUserAvatar: false,\r\n  inputStyle: {},\r\n  opened: undefined,\r\n  placeholder: 'Type the message ...',\r\n  inputAttributes: {},\r\n  recognitionEnable: false,\r\n  recognitionLang: 'en',\r\n  recognitionPlaceholder: 'Listening ...',\r\n  speechSynthesis: {\r\n    enable: false,\r\n    lang: 'en',\r\n    voice: null\r\n  },\r\n  style: {},\r\n  submitButtonStyle: {},\r\n  toggleFloating: undefined,\r\n  userDelay: 1000,\r\n  width: '350px',\r\n  botAvatar:\r\n    \"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e\",\r\n  userAvatar:\r\n    \"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e\"\r\n};\r\n\r\nexport default ChatBot;\r\n","import { stringify, parse } from 'flatted/cjs'\r\n\r\n/* istanbul ignore next */\r\nconst getData = (params, callback) => {\r\n  const { cacheName, cache, firstStep, steps } = params;\r\n  const currentStep = firstStep;\r\n  const renderedSteps = [steps[currentStep.id]];\r\n  const previousSteps = [steps[currentStep.id]];\r\n  const previousStep = {};\r\n  const unParsedCache = localStorage.getItem(cacheName);\r\n\r\n  if (cache && unParsedCache) {\r\n    try {\r\n      const data = parse(unParsedCache);\r\n      const lastStep = data.renderedSteps[data.renderedSteps.length - 1];\r\n\r\n      if (lastStep && lastStep.end) {\r\n        localStorage.removeItem(cacheName);\r\n      } else {\r\n        for (let i = 0, len = data.renderedSteps.length; i < len; i += 1) {\r\n          const renderedStep = data.renderedSteps[i];\r\n          // remove delay of cached rendered steps\r\n          data.renderedSteps[i].delay = 0;\r\n          // flag used to avoid call triggerNextStep in cached rendered steps\r\n          data.renderedSteps[i].rendered = true;\r\n\r\n          // an error is thrown when render a component from localStorage.\r\n          // So it's necessary reassing the component\r\n          if (renderedStep.component) {\r\n            const { id } = renderedStep;\r\n            data.renderedSteps[i].component = steps[id].component;\r\n          }\r\n        }\r\n\r\n        const { trigger, end, options } = data.currentStep;\r\n        const { id } = data.currentStep;\r\n\r\n        if (options) {\r\n          delete data.currentStep.rendered;\r\n        }\r\n\r\n        // add trigger function to current step\r\n        if (!trigger && !end) {\r\n          if (options) {\r\n            for (let i = 0; i < options.length; i += 1) {\r\n              data.currentStep.options[i].trigger = steps[id].options[i].trigger;\r\n            }\r\n          } else {\r\n            data.currentStep.trigger = steps[id].trigger;\r\n          }\r\n        }\r\n\r\n        // execute callback function to enable input if last step is\r\n        // waiting user type\r\n        if (data.currentStep.user) {\r\n          callback();\r\n        }\r\n\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.info(`Unable to parse cache named:${cacheName}. \\nThe cache where probably created with an older version of react-simple-chatbot.\\n`, error);\r\n    }\r\n  }\r\n\r\n  return {\r\n    currentStep,\r\n    previousStep,\r\n    previousSteps,\r\n    renderedSteps\r\n  };\r\n};\r\n\r\n/* istanbul ignore next */\r\nconst setData = (cacheName, cachedData) => {\r\n  const data = parse(stringify(cachedData));\r\n  // clean components\r\n  for (const key in data) {\r\n    for (let i = 0, len = data[key].length; i < len; i += 1) {\r\n      if (data[key][i].component) {\r\n        data[key][i].component = data[key][i].id;\r\n      }\r\n    }\r\n  }\r\n\r\n  localStorage.setItem(cacheName, stringify(data));\r\n};\r\n\r\nexport { getData, setData };\r\n","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { withStyles} from '@material-ui/core/styles';\r\nimport df from \"../resources/dairyfree.svg\";\r\nimport gf from \"../resources/glutenfree.svg\";\r\nimport veggie from \"../resources/vegetarian.svg\";\r\nimport vegan from \"../resources/vegan.svg\";\r\n\r\nconst HtmlTooltip = withStyles((theme) => ({\r\n  tooltip: {\r\n    backgroundColor: '#f5f5f9',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 400,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: '1px solid #dadde9',\r\n  },\r\n}))(Tooltip);\r\n\r\nexport default function MenuComponent(props) {\r\n  const componentType = props.componentType;\r\n  switch(componentType){\r\n    case 'botmenu':\r\n      return {\r\n        componentType:componentType,\r\n        rowKey:props.rowKey,\r\n        rowtitle:ToolTipComponent(props.rowTitle),\r\n        rowbtns:props.rowbtns.map((b)=>{\r\n          const val = b;\r\n          val.onSelect = props.onSelect\r\n          return ToolTipComponent(val)})\r\n      };\r\n    case 'cart':\r\n      return 'Cart Component';\r\n    case 'summary':\r\n      return 'Summary Component';\r\n    default:\r\n      return 'Default Component';\r\n  };  \r\n}\r\nfunction ToolTipComponent(props){\r\n  const comp = (props) => {\r\n    const type = props.itemClass;\r\n    switch (type){\r\n      case 'rowTitle':\r\n        return <div className={type}>{props.itemCaption}</div>;\r\n      case 'menuBtn':\r\n        const sel = {type:'select', values:props.itemValue};      \r\n      return <button className={type} onClick={()=>{return props.onSelect(sel)}}>{props.itemCaption}</button>;\r\n      default:\r\n        return <div className='default'>Default Component</div>;\r\n    }\r\n  }\r\n  const key =props.hasOwnProperty('itemKey')?props.itemKey:false;\r\n  const liClass = props.hasOwnProperty('btnClass')?props.btnClass:false;\r\n  const tip = (      \r\n    <HtmlTooltip title={<React.Fragment><Typography color=\"inherit\">{props.itemCaption}</Typography>{props.itemDescription}</React.Fragment>} arrow placement=\"bottom-end\" enterDelay={1500}>\r\n      {comp(props)}\r\n    </HtmlTooltip>)\r\n\r\n  return {comp:tip, key:key, iClass:liClass}\r\n}\r\n/*\r\nfunction MenuImage(){\r\n\r\n}*/\r\n\r\n","export default __webpack_public_path__ + \"static/media/dairyfree.7818ce5f.svg\";","export default __webpack_public_path__ + \"static/media/glutenfree.59fff2ae.svg\";","export default __webpack_public_path__ + \"static/media/vegetarian.a2184bd4.svg\";","export default __webpack_public_path__ + \"static/media/vegan.8cd65f03.svg\";","import React from 'react';\r\nimport MenuComponent from './MenuComponent';\r\nimport Random from 'random-id';\r\n\r\nfunction MenuArray(props){\r\n  if(!props.hasStep){return null};  \r\n  const sel = props.selected;  \r\n  const step = props.name;  \r\n  const content = props.content;\r\n  const vals = content.values;\r\n  const qty = content.qty;\r\n  const half = content.half;\r\n  const rows = vals.map((i)=>{\r\n    const itemCaption = i.caption;\r\n    const itemDescription = i.description;\r\n    const rowKey = Random(8);\r\n    const title = {itemClass:'rowTitle', itemCaption:itemCaption, itemDescription:itemDescription};\r\n    const btns = i.hasOwnProperty('type')?content[i.type]:half?half.concat(qty):qty;\r\n    const rowbtns = btns.map((b)=>{\r\n      const bCap = b.caption;\r\n      const bDes = b.description;\r\n      const bVal = `${step}:${i.id}:${b.type}:${b.id}`;\r\n      const isSel = sel.findIndex(p=>p===bVal)!==-1;\r\n      const outerClass = isSel?'btn-select':'btn-item';\r\n      return {\r\n        itemClass:'menuBtn',\r\n        itemCaption:bCap,\r\n        itemDescription:bDes,\r\n        itemValue:bVal,\r\n        itemKey:Random(8),\r\n        btnClass:outerClass,        \r\n      }\r\n    });    \r\n    return {\r\n      componentType:'botmenu',\r\n      rowTitle:title,\r\n      rowbtns:rowbtns,\r\n      rowKey:rowKey,\r\n    }\r\n  })\r\n  const components = rows.map((r)=>{\r\n    const val = r;\r\n    val.onSelect= props.onSelect;\r\n    return MenuComponent(val)});\r\n  const stepKey = Random(8);\r\n  return (\r\n    <div className={components.componentType} key={stepKey}>\r\n      <ul>\r\n        {components.map((c)=>{\r\n          return (\r\n            <li key={c.rowKey} className=\"menuRow\">\r\n              <div>{c.rowtitle.comp}</div>\r\n              <ul>\r\n                {c.rowbtns.map((r)=>{ return (\r\n                <li key={r.key} className={r.iClass}>\r\n                  {r.comp}\r\n                </li>)                  \r\n                })}\r\n              </ul>\r\n            </li>  \r\n          )\r\n        })}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\nexport default MenuArray;","import React from 'react';\r\nimport Summary from './Summary';\r\nimport MenuArray from './MenuArray';\r\nimport Random from 'random-id';\r\n\r\n\r\nfunction StepFactory(props){  \r\n  const appState = props.refProps;\r\n  if(appState===null||appState===undefined){return null};\r\n  const type =appState.appValues.appBotStepClass;\r\n  if(type===''){return null};  \r\n  const ref = {\r\n    type:type,     \r\n    pizzaID:appState.order.CurrentID,\r\n    isSaved:appState.order.IsSaved,\r\n    ordername:appState.order.ordername,\r\n    prevStep:appState.prevStep,\r\n    onTrigger:props.onTrigger,\r\n    onSelect:props.onSelect,\r\n  };\r\n  if(type==='menu'||type==='editItem'){      \r\n    const s = appState.step.StepObject;      \r\n    if(s){\r\n      ref.name=s.name;\r\n      ref.botMsg = s.botMsg;\r\n      ref.multi=s.multi;\r\n      ref.nextTrig = s.controls.nextTrig;\r\n      ref.prevTrig = s.controls.prevTrig;\r\n      ref.nextName = s.controls.nextName;\r\n      ref.prevName = s.controls.prevName;\r\n      ref.selected = props.selected;\r\n      ref.content = s.content;\r\n      ref.hasStep=true;      \r\n    } else {\r\n      ref.hasStep=false;\r\n    }\r\n  } else {\r\n    ref.itemList=type==='editPizza'?appState.step.stepList:type==='reviewOrder'?appState.order.PizzaList:false;\r\n    if(type==='reviewPizza'){\r\n      ref.content = appState.order.CurrentPizza;\r\n    } else if(type==='reviewOrder'){\r\n      ref.content = appState.order.OrderSummary;\r\n    }\r\n  }  \r\n  const step = Step(ref)\r\n  const content = ContentFactory(ref);\r\n  const btns = step.btns.map((b)=>{\r\n    return (\r\n      <li key={Random(8)} className=\"stepButton\">\r\n         <button className={b.className} onClick={()=> b.onTrigger(b.trigVal)}>{b.caption}</button>\r\n      </li>     \r\n    )\r\n  })\r\n  return (\r\n    <div className=\"slicebotStepClass\">\r\n      <div className=\"stepMessage\">{step.msg}</div>\r\n      {content}\r\n      <ul className=\"stepButtons\">{btns}</ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Step(props){\r\n  const type = props.type  \r\n  switch(type){\r\n    case 'menu': \r\n      return MenuStep(props);\r\n    case 'editItem':\r\n      return EditMenuStep(props);\r\n    case 'editPizza':\r\n      return EditStep(props);\r\n    case 'reviewPizza':\r\n      return ReviewPizzaStep(props);\r\n    case 'reviewOrder':\r\n      return ReviewOrderStep(props);\r\n    case 'remove':\r\n      return RemoveStep(props);\r\n    case 'cancel':\r\n      return CancelStep(props);\r\n    case 'complete':\r\n      return CompleteStep(props);\r\n    default:\r\n      return null;\r\n  } \r\n}\r\nfunction ContentFactory(props){  \r\n  const ContentType = (props) => {\r\n    const type = props.type  \r\n    switch(type){\r\n      case 'menu':      \r\n      case 'editItem':\r\n        if(props.hasStep){\r\n          return MenuArray(props);\r\n        } else {\r\n          return null\r\n        }            \r\n      case 'reviewPizza':\r\n      case 'reviewOrder':\r\n        return Summary(props);        \r\n      default:\r\n        return null;\r\n    }\r\n  }  \r\n  return (ContentType(props))\r\n}\r\nfunction MenuStep(props){\r\n  const {botMsg, prevName, onTrigger}= props;\r\n  const btns = [\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'menu', value:'next', msg:botMsg, usr:\"{r}\"},caption:`Next`},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'menu', value:'prev', msg:botMsg, usr:`Go back to ${prevName}`},caption:`Back`},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'remove', value:'', msg:botMsg, usr:\"Remove this pizza\"},caption:\"Remove\"},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'cancel', value:'', msg:botMsg, usr:\"Cancel this order\"},caption:\"Cancel\"},\r\n  ];\r\n  return {msg:botMsg, btns:btns}\r\n}\r\nfunction EditMenuStep(props){\r\n  const {name,botMsg, onTrigger}= props;         \r\n  const btns = [\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'editPizza', value:'next', msg:botMsg, usr:`Update ${name} to {r}`},caption:`Save Changes`},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'editPizza', value:'prev', msg:botMsg, usr:\"Discard changes\"},caption:`Discard Changes`},    \r\n  ];\r\n  return {msg:botMsg, btns:btns}\r\n}\r\nfunction EditStep(props){\r\n  const {itemList, pizzaID, onTrigger}= props;     \r\n  const msg = `Please select an item to change for this pizza`;\r\n  const iBtns = itemList.map((i)=>{\r\n    return {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'editItem', value:i.val, msg:msg, usr:`Edit ${i.name}`},caption:`Edit ${i.name}`}\r\n  })  \r\n  const btns = iBtns.concat(\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'spec', value:'specialinstentry', msg:msg, usr:\"Edit Special Instructions\"},caption:`Edit Special Instructions`},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'remove', value:pizzaID, msg:msg, usr:\"Remove this pizza\"},caption:\"Remove Pizza\"},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'reviewPizza', value:'', msg:msg, usr:\"Finished with edits\"},caption:`Continue`},    \r\n  );\r\n  return {msg:msg, btns:btns}                    \r\n}\r\nfunction ReviewPizzaStep(props){\r\n  const {ordername, onTrigger}= props;    \r\n  const msg = `${ordername}, Please review this pizza and then select an option below`;\r\n  const btns = [\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'reviewOrder', value:'save', msg:msg, usr:\"Go to final review\"},caption:`Continue`},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'add', value:'save', msg:msg, usr:\"Add another pizza to this order\"},caption:`Add another pizza`},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'editPizza', value:'', msg:msg, usr:\"Edit this pizza\"},caption:`Edit Pizza`},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'remove', value:'', msg:msg, usr:\"Remove this pizza\"},caption:\"Remove Pizza\"},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'cancel', value:'', msg:msg, usr:\"Cancel this order\"},caption:\"Cancel Order\"}    \r\n  ];\r\n  return {msg:msg, btns:btns}\r\n}\r\nfunction ReviewOrderStep(props){\r\n  const {itemList, ordername, onTrigger}= props;     \r\n  const msg = `${ordername}, Please review your order and then select an option below`;\r\n  const iBtns = itemList.map((i)=>{\r\n    return {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'editPizza', value:i, msg:msg, usr:`Edit Pizza ${i}`},caption:`Edit Pizza ${i}`}\r\n  })  \r\n  const start = [\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'complete', value:'', msg:msg, usr:\"Complete this order\"},caption:`Complete Order`},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'add', value:'', msg:msg, usr:\"Add another pizza to this order\"},caption:`Add another pizza`}];\r\n  const end = [\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'spec', value:'ordername', msg:msg, usr:\"Change the name for this order\"},caption:\"Change Name\"},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'cancel', value:'', msg:msg, usr:\"Cancel this order\"},caption:\"Cancel Order\"}];\r\n  const btns = start.concat(iBtns).concat(end); \r\n  return {msg:msg, btns:btns}\r\n}\r\nfunction RemoveStep(props){\r\n  const {pizzaID,isSaved, onTrigger}= props;  \r\n  const msg = !isSaved?\r\n    'Do you want to discard this pizza?':'Do you want to remove this pizza?';\r\n  const res = !isSaved?[{className:\"warn\",onTrigger:onTrigger,trigVal:{type:'remove', value:'cur', msg:msg, usr:\"Yes, and start a new pizza\"},caption:\"Yes, and start a new pizza\"}]:[];\r\n  const btns = res.concat(\r\n    {className:\"warn\",onTrigger:onTrigger,trigVal:{type:'remove', value:pizzaID, msg:msg, usr:\"Yes, Remove this pizza\"},caption:\"Yes, Remove this pizza\"},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'remove', value:'no', msg:msg, usr:\"No, go back\"},caption:\"No, go back\"},\r\n  );\r\n  return {msg:msg, btns:btns}\r\n}\r\nfunction CancelStep(props){\r\n  const {onTrigger}= props;\r\n  const msg ='Do you really want to cancel this order?';\r\n  const btns = [\r\n    {className:\"warn\",onTrigger:onTrigger,trigVal:{type:'cancel', value:'main', msg:msg, usr:\"Yes, go to main page\"},caption:\"Yes, go to main page\"},\r\n    {className:\"warn\",onTrigger:onTrigger,trigVal:{type:'cancel', value:'select', msg:msg, usr:\"Yes, go to the store selection page\"},caption:\"Yes, go to the store selection page\"},\r\n    {className:\"warn\",onTrigger:onTrigger,trigVal:{type:'cancel', value:'restart', msg:msg, usr:\"Yes, restart this order\"},caption:\"Yes, restart this order\"},\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'cancel', value:'no', msg:msg, usr:\"No, go back\"},caption:\"No, go back\"},\r\n  ];\r\n  return {msg:msg, btns:btns}\r\n}\r\nfunction CompleteStep(props){\r\n  const {onTrigger}= props;\r\n  const msg ='Complete this order and go to payment & confirmation?';\r\n  const btns = [\r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'complete', value:'yes', msg:msg, usr:\"Yes\"},caption:\"Yes\"},    \r\n    {className:\"reg\",onTrigger:onTrigger,trigVal:{type:'complete', value:'no', msg:msg, usr:\"No, go back\"},caption:\"No, go back\"},\r\n  ];\r\n  return {msg:msg, btns:btns}\r\n}\r\n\r\nexport default StepFactory;","class ItemSelect {\r\n  constructor(type, items, multi, optList){\r\n    this.itemList = [].concat(items);   \r\n    this.type = type;\r\n    this.multi = multi; \r\n    this.private=new privateSelect(optList);   \r\n  }\r\n  set selected(value){\r\n    const item = this.private.MakeItem(value);\r\n    const select = (item)=>{\r\n      if(this.type==='type'){\r\n        const cur = this.itemList.length>0?this.itemList[0]:-1\r\n        return [].concat(this.private.updateType(item, cur))\r\n      }\r\n      if(this.multi){\r\n        const curArray = [].concat(this.itemList);\r\n        if(curArray.length===1&&curArray[0].id===''){\r\n          return [].concat(this.private.updateItem(item,curArray[0]))\r\n        }\r\n        const index = curArray.findIndex((i)=>i.id===item.id);\r\n        if(index===-1){\r\n          return curArray.concat(this.private.updateItem(item,index))\r\n        }\r\n        const curItem = curArray[index];\r\n        const updItem = this.private.updateItem(item, curItem);\r\n        if(updItem.id===''){\r\n          curArray.splice(index,1);\r\n        } else {\r\n          curArray.splice(index,1,updItem);\r\n        }\r\n        return curArray;\r\n      } else{\r\n        const cur = this.itemList.length>0?this.itemList[0]:-1\r\n        return [].concat(this.private.updateItem(item, cur))\r\n      }\r\n    }\r\n    const selection = select(item);\r\n    this.itemList = selection;\r\n  }\r\n  get selected(){\r\n    const itemArray = this.itemList;\r\n    const type = this.type;\r\n    return this.private.SelectionArray(type,itemArray);\r\n  }\r\n  SaveSelected(){\r\n    return {type:this.type, values:this.itemList}\r\n  }\r\n\r\n}\r\nclass privateSelect{ \r\n  optList=null;\r\n  constructor(optList){ \r\n    this.optList=optList;   \r\n  }\r\n  MakeItem(value){\r\n    const x = value.indexOf(':');\r\n    const type = value.substring(0,x);  \r\n    const id = value.substring(x+1,x+2);  \r\n    const y = value.indexOf(':',x+1);\r\n    const getOpt = (i)=> {\r\n      if(i===-1) {return false}\r\n      const optStr = value.substring(y+1);\r\n      const z = optStr.indexOf(':');\r\n      const oType = optStr.substring(0,z);\r\n      const oID = optStr.substring(z+1);\r\n      return {type:oType, id:oID};\r\n    } \r\n    const opt = getOpt(y);\r\n    const ret = {id:0};\r\n    ret.id = type!=='type'?id:'1';\r\n    if(opt){\r\n      ret[opt.type]=opt.id;\r\n    }\r\n    return ret;\r\n  }\r\n  SelectionArray(type, items){\r\n    \r\n    const select = this.arrayReduce(type,items);    \r\n    return this.arrayBuild(type, select);\r\n  }\r\n  arrayReduce(type,array){\r\n    if(array.length===0||array[0].id===''){\r\n      return [];\r\n    }\r\n    const item = array.slice(0,1)[0];\r\n    const out = array.slice(1)\r\n    const arr = this.optList.map((o)=>{\r\n      const itemID = type==='type'?(o==='crusts'?1:2):item.id;\r\n      if(item.hasOwnProperty(o)) {\r\n        const oID = item[o]\r\n        return `${itemID}:${o}:${oID}`\r\n      }\r\n      return `${itemID}:${o}:0`\r\n    })\r\n    return arr.concat(this.arrayReduce(type,out))\r\n  }\r\n  arrayBuild(type,array){\r\n    if(array.length===0||array===null||array===undefined){\r\n      return [];\r\n    }\r\n    const str = array.shift();  \r\n    if(str===''||str==='0'||str.indexOf(':0')!==-1){\r\n      return [].concat(this.arrayBuild(type,array));\r\n    }\r\n    const out = `${type}:${str}`;\r\n    return [out].concat(this.arrayBuild(type,array))\r\n  }\r\n  updateType(itemInfo, curitem){\r\n    const newItem = itemInfo;\r\n    newItem.id = '1';\r\n    return this.updateItem(newItem,curitem);\r\n  }\r\n  updateItem(itemInfo, curitem){        \r\n    const hasOpt = this.optList.map((o)=>{\r\n      return itemInfo.hasOwnProperty(o)\r\n    });    \r\n    const updItem = {id: ''};\r\n    const itemValues = {id:itemInfo.id};\r\n    this.optList.forEach((e,index) => {\r\n      updItem[e]='0';\r\n      itemValues[e]=hasOpt[index]?itemInfo[e]:'0'\r\n    });      \r\n    if((curitem===-1||curitem.id===''||itemInfo.id!==curitem.id)&&(itemValues!==curitem)){\r\n      //no current item or change to current item\r\n      updItem.id = itemValues.id;\r\n      this.optList.forEach((e) => {\r\n        updItem[e]=itemValues[e]\r\n      })           \r\n    } else if(itemValues!==curitem){\r\n      //same item, changing options      \r\n      updItem.id = itemValues.id;\r\n      this.optList.forEach((e,index) => {\r\n        if(hasOpt[index]){updItem[e]=itemValues[e]\r\n        } else {\r\n          updItem[e]=curitem.hasOwnProperty(e)?curitem[e]:'0';\r\n        }        \r\n      })\r\n    } else {\r\n      //items are identical - remove\r\n      updItem.id ='';\r\n      this.optList.forEach((e) => {\r\n        updItem[e]='';\r\n      })\r\n    } \r\n    return updItem;   \r\n  }\r\n}\r\nexport default ItemSelect;","import React from 'react';\r\nimport '../css/OrderStyle.css';\r\nimport StepFactory from './StepFactory';\r\nimport BotTrigger from './BotTrigger';\r\nimport ItemSelect from './ItemSelect';\r\n\r\n\r\nclass OrderStep extends React.Component {\r\n  constructor(props){\r\n    super(props);    \r\n    this.state={\r\n      renderStep:true,                  \r\n      itemSelect:null,      \r\n      trigger: false,\r\n      selectedItems:[],      \r\n    }           \r\n    this.triggerNext = this.triggerNext.bind(this);\r\n    this.onTrigger = this.onTrigger.bind(this);\r\n    this.update = this.update.bind(this);\r\n                \r\n  }\r\n  update = action=>()=>{  \r\n    switch(action.type){\r\n      case 'initial':        \r\n        const show = (this.props.appState.step.StepObject&&this.props.appState.order.ordername)?true:false;\r\n        if(!show||!this.props.appState.step.StepObject){\r\n          return{renderStep:false, itemSelect:null}\r\n        } else {\r\n          const name = this.props.appState.step.StepObject.name\r\n          const value={\r\n            items:this.props.appState.order.GetCurrentItems(name),\r\n            stepname:name,\r\n            multi:this.props.appState.step.StepObject.multi,\r\n            optList:this.props.appState.step.StepObject.content.optList};\r\n          const s= GetSelected(value)\r\n          const sel = s.selected;\r\n          return{renderStep:true, itemSelect:s, selectedItems:sel}  \r\n        }    \r\n      case 'select':\r\n        const sel = this.state.itemSelect;\r\n        sel.selected = action.values;\r\n        return{renderStep:true, itemSelect:sel};\r\n      default:\r\n        return null\r\n    }\r\n  }  \r\n  componentDidUpdate(prevProps,prevState){    \r\n    if(this.props.previousStep.id==='ordername'||this.props.previousStep.id==='specialinstques'||this.props.previousStep.id==='specialinstentry'){\r\n      //handle updates to order from user name or special instructions\r\n      const checkUp = (this.props.appState.appValues.appUpdateBot)||(this.props.appState.appValues.appSetName&&this.props.appState.appValues.appSetInst)?true:false;\r\n      if(checkUp&&this.props.previousStep.id==='ordername'){            \r\n        if(!prevState.renderStep){\r\n          this.setState({renderStep:this.props.appState.appValues.appUpdateBot},\r\n            ()=>{this.setOrderName(this.props.steps.ordername.value)});        \r\n        }      \r\n      } else if(checkUp&&(this.props.previousStep.id==='specialinstques'||this.props.previousStep.id==='specialinstentry')){            \r\n        if(!prevState.renderStep){\r\n          this.setState({renderStep:this.props.appState.appValues.appUpdateBot},\r\n            ()=>{this.setSpecInst()});        \r\n        }      \r\n      } \r\n    }    \r\n  }\r\n  shouldComponentUpdate(nextProps,nextState){    \r\n    if((!nextState.renderStep&&this.state.renderStep)||(!this.state.renderStep&&nextState.renderStep)){            \r\n      return false\r\n    } else if (nextState.trigger){\r\n      return false\r\n    } else {      \r\n      return true\r\n    }\r\n  }\r\n  onSelect(values){\r\n    const sel = this.state.itemSelect;\r\n    sel.selected = values.values;\r\n    const s = sel.selected;\r\n    this.setState({itemSelect:sel, selectedItems:s})\r\n  }\r\n  componentDidMount(){   \r\n    if(this.props.previousStep.id==='ordername'){\r\n      this.setState({\r\n        renderStep:false,\r\n      }, ()=>{this.props.updateAppState({type:'setName', values:this.props.steps.ordername.value})})\r\n    } else if(this.props.previousStep.id==='specialinstques'||this.props.previousStep.id==='specialinstentry'){\r\n      const val = this.props.previousStep.id==='specialinstentry'?this.props.previousStep.value:''      \r\n      this.setState({\r\n        renderStep:false,\r\n      }, ()=>{this.props.updateAppState({type:'setInst', values:val})})\r\n    } else {\r\n      const a = {type:'initial'}\r\n      this.setState(this.update(a));\r\n    }\r\n  }\r\n  triggerNext(props){\r\n    const bot = `${props.bot}=>(id=${this.props.step.key.substring(0,5)})`;\r\n    const genericStep = this.props.steps.pizzabuilder;\r\n    this.props.step.id = bot;\r\n    genericStep.id = bot;\r\n    delete genericStep.metadata;\r\n    this.props.steps[bot] = genericStep;\r\n    this.props.step.trigger = props.trigger;\r\n    const data = {\r\n      preserveMsg:props.isuser,\r\n      stepMsg: props.stepmsg,      \r\n      type:bot,\r\n      msg:props.usermsg,\r\n    }    \r\n    this.setState({trigger: true,}, () => {\r\n      this.props.triggerNextStep(data);\r\n    });  \r\n  }\r\n  onTrigger(props){\r\n    const selected = this.state.itemSelect?this.state.itemSelect.SaveSelected():false;            \r\n    const trig = props;\r\n    trig.selected = selected;        \r\n    const processTrigger = BotTrigger({trigger:trig, order:this.props.appState.order, step:this.props.appState.step});\r\n    if(!processTrigger){\r\n      const msgTitle = 'Alert'\r\n      const msg = 'You must select a valid crust type and size before continuing.'\r\n      const status = true;\r\n      const val ={status:status,title:msgTitle,msg:msg};\r\n      this.setState({\r\n        renderStep:true,\r\n      }, ()=>{this.props.updateAppState({type:'alert', values:val})})\r\n      return null;\r\n    }\r\n    const triggerRet ={\r\n      botStepClass:processTrigger.botStepClass,\r\n      order:processTrigger.order,\r\n      step:processTrigger.step,\r\n    }\r\n    trig.triggerRet= triggerRet\r\n    this.props.onTriggerBot(trig);\r\n    if(!processTrigger) {return null;}\r\n    const ret = {bot:`(${props.type})=>${props.value}`};    \r\n    ret.stepmsg = processTrigger.stepMsg;\r\n    ret.usermsg = processTrigger.userMsg;\r\n    ret.isuser = true;   \r\n    ret.trigger = processTrigger.trigger;\r\n    //change current step info to with new 'key'\r\n    this.triggerNext(ret);\r\n  }  \r\n  setOrderName(v){\r\n    const ret = {bot:'(ordername)=>menusteps'}        \r\n    if(this.props.appState.appValues.appBotStepClass==='edit'){\r\n      ret.stepmsg =`Thank you, ${v}, I've updated the order name`;\r\n    } else {\r\n      ret.stepmsg = `Thank you, ${v}, Let's create our first pizza for this order.`;\r\n    }    \r\n    ret.usermsg = null;\r\n    ret.isuser = false;    \r\n    ret.trigger = 'pizzabuilder'\r\n    this.triggerNext(ret);\r\n  }\r\n  setSpecInst(){\r\n    const ret = {bot:'(Special Instructions)=>Review Pizza'}        \r\n    ret.stepmsg = `Okay, Let's review your pizza.`;\r\n    ret.usermsg = null;\r\n    ret.isuser = false;    \r\n    ret.trigger = 'pizzabuilder'\r\n    this.triggerNext(ret);\r\n  }     \r\n  render(){\r\n    const checkPrev= this.props.previousStep.id==='ordername'||this.props.previousStep.id==='specialinstques'||this.props.previousStep.id==='specialinstentry';    \r\n    if(this.state.renderStep&&!this.state.trigger&&!checkPrev){\r\n      const selected = this.state.selectedItems;            \r\n      return <StepFactory refProps={this.props.appState} selected={selected} onTrigger={this.onTrigger} onSelect={(a)=>{return this.onSelect(a)}}/>;\r\n    } else {\r\n      return null;\r\n    }       \r\n  }  \r\n}\r\nfunction GetSelected(props){\r\n  return new ItemSelect(props.stepname,props.items,props.multi,props.optList);\r\n}  \r\nexport default OrderStep;","import {getUserMsg}  from './Summary';\r\n\r\nexport default function BotTrigger(props){  \r\n  const type = props.trigger.type;\r\n  const value = props.trigger.value;\r\n  const order = props.order;\r\n  const step = props.step;\r\n  const ret = {\r\n    botStepClass:type,\r\n    order:null,\r\n    step:null,\r\n    trigger:'pizzabuilder',\r\n    stepMsg:props.trigger.msg,\r\n    userMsg:props.trigger.usr,\r\n  };\r\n  if(value==='next'){    \r\n    const s = props.trigger.selected.type;\r\n    if(s==='type'){\r\n      const a = props.trigger.selected.values[0];\r\n      const chk = a.hasOwnProperty('sizes')&&a.hasOwnProperty('crusts');\r\n      const pass = chk&&a.sizes!==0&&a.crusts!==0;\r\n      if(!pass){return false}\r\n    }\r\n    order.CurrentItems = props.trigger.selected;    \r\n    const n = step.GetStepProper(s);\r\n    const item = {type:s, name:n, sel:order.GetCurrentItems(s)};\r\n    ret.userMsg = ret.userMsg.replace('{r}',getUserMsg(item))\r\n    ret.trigger = type==='menu'?step.StepObject.controls.nextTrig:'pizzabuilder';\r\n  } else if(value==='prev'){\r\n    ret.trigger = type==='menu'?step.StepObject.controls.prevTrig:'pizzabuilder';\r\n  }      \r\n  switch(type){\r\n    case 'menu':      \r\n    case 'editItem':      \r\n      if(ret.trigger==='specialinstmsg'||ret.trigger==='ordername') {        \r\n        step.step='none';\r\n        if(ret.trigger==='specialinstmsg'){\r\n          ret.botStepClass = 'reviewPizza';          \r\n        } else if(ret.trigger==='ordername'){\r\n          ret.botStepClass = '';          \r\n        }\r\n      } else {                \r\n        step.step = value;\r\n        ret.botStepClass=type;\r\n      }\r\n      break;\r\n    case 'editPizza':\r\n      ret.botStepClass=type;  \r\n      if(!isNaN(value)){order.CurrentPizza=value}\r\n      break;      \r\n    case 'reviewPizza':\r\n    case 'reviewOrder':            \r\n    case 'add':\r\n      ret.botStepClass=type;  \r\n      if(value==='save'){\r\n        order.SavePizzaToOrder();\r\n      }\r\n      if(type==='add'){\r\n        order.CreateNewPizza();\r\n        step.step = 'new'; \r\n      }      \r\n      break;\r\n    case 'spec':\r\n      if(value==='specialinstentry'){\r\n        ret.botStepClass = 'editPizza';\r\n      } else if(value==='ordername'){\r\n        ret.botStepClass = 'reviewOrder';\r\n      }\r\n      ret.trigger=value;\r\n      break;      \r\n    case 'remove':     \r\n    case 'cancel':      \r\n    case 'complete':\r\n      if(value==='no'){\r\n        //ret.botStepClass = props.trigger.prevStep;\r\n      } else if(value!=='') {\r\n        if(type==='complete'){\r\n          ret.trigger='endmsg1';\r\n        } else if(type==='remove'){\r\n          order.RemovePizza(value);\r\n          if(value==='cur'){\r\n            ret.botStepClass = 'menu';            \r\n            order.CreateNewPizza();\r\n            step.step = 'new';\r\n          } else {            \r\n            ret.botStepClass = 'reviewOrder';\r\n          }\r\n        } \r\n      }\r\n      break;\r\n    default:      \r\n  }\r\n  ret.order = order;\r\n  ret.step = step;\r\n  return ret; \r\n}\r\n\r\n","import React from 'react';\r\nimport ChatBot from './chatbot/ChatBot';\r\nimport { ThemeProvider } from 'styled-components';\r\nimport OrderStep from './OrderStep';\r\nclass SliceBot extends React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    \r\n    this.handleEnd = this.handleEnd.bind(this);\r\n      }   \r\n\r\n  handleEnd(){\r\n    //load order summary page    \r\n    this.props.onAppUpdate({val:'complete'});\r\n  }\r\n  render(){\r\n    if(this.props.appState.appValues===null||this.props.appState.appValues===undefined){return null}\r\n    const showBot=this.props.appState.appValues.showBot;        \r\n    if(!showBot){return (null)}\r\n    return (   \r\n      <div className=\"chatBot\" >\r\n        <ThemeProvider theme={{\r\n              background: '#f5f5f5',\r\n              fontFamily: 'Montserrat',\r\n              headerBgColor: '#DD841F',\r\n              headerFontColor: '#fff',\r\n              headerFontSize: '15px',\r\n              botBubbleColor: '#DD841F',\r\n              botFontColor: '#fff',\r\n              userBubbleColor: '#fff',\r\n              userFontColor: '#4a4a4a',\r\n              marginTop: '60px',\r\n          }}>\r\n      <ChatBot headerTitle=\"Slice Bot\"\r\n        handleEnd = {this.handleEnd}\r\n        steps={[\r\n          {\r\n            id: '1',\r\n            message: 'Welcome to Slice!',            \r\n            trigger: '2',            \r\n          },\r\n          {\r\n            id: '2',\r\n            message: 'Please enter a name for the order',\r\n            trigger: 'ordername',            \r\n          },\r\n          {\r\n            id: 'ordername',\r\n            user:true,\r\n            placeholder: 'Please enter a name...',\r\n            trigger: 'pizzabuilder',   \r\n          },\r\n          {\r\n            id: 'pizzabuilder',\r\n            placeholder: 'Choose an option',\r\n            component: <OrderStep appState={this.props.appState} onTriggerBot={this.props.onTriggerBot} updateAppState={(p)=>{return this.props.updateAppState(p)}}/>,              \r\n            waitAction: true, \r\n            replace: true,            \r\n            trigger: 'pizzabuilder',           \r\n          },\r\n          {\r\n            id:'specialinstmsg',\r\n            message:'Would you like to add any special instructions?',\r\n            trigger: 'specialinstques',\r\n          },\r\n          {\r\n            id:'specialinstques',\r\n            options: [\r\n              {value: 'yes', label:'Yes', trigger:'specialinstentry'},\r\n              {value: 'no', label:'No, Lets review this pizza', trigger:'pizzabuilder'},\r\n              ],\r\n          },\r\n          {\r\n            id:'specialinstentry',\r\n            user:true,\r\n            trigger: 'pizzabuilder',\r\n          },\r\n          {\r\n            id: 'endmsg1',         \r\n            message: 'Thank you for using Slice!',\r\n            trigger: 'endmsg2',            \r\n          },\r\n          {\r\n            id: 'endmsg2',         \r\n            message: 'Your order is confirmed. Please click OK to continue.',\r\n            trigger: 'endmsg3',            \r\n          },\r\n          {\r\n            id: 'endmsg3',         \r\n            options: [{value: 'endbot', label:'OK', trigger:'endbot'}],                        \r\n          },\r\n          {\r\n            id: 'endbot',         \r\n            message: 'Good bye',\r\n            end: true,            \r\n          },\r\n          ]}\r\n          floating={false}\r\n        />\r\n          </ThemeProvider>\r\n      </div>   \r\n    );   \r\n  }\r\n\r\n}\r\n/*        <Redirect to=\"/pizza-chatbot/slicebot\" />\r\n        <Route path=\"/pizza-chatbot/slicebot\" component={() => \r\n          ....\r\n        }/>\r\n\r\n          */\r\nexport default SliceBot;","class AppState {\r\n  constructor(){\r\n    this.display='Location';\r\n    this.showBot=false;\r\n    this.setName=false;\r\n    this.setInst=false;\r\n    this.updateBot=false;\r\n    this.botStepClass='';\r\n    this.botStepType='';    \r\n  }\r\n  set appBotStepType(val){\r\n    switch(val){\r\n      case 'name':\r\n        this.display='Menu';\r\n        this.setName=true;\r\n        this.updateBot=val;\r\n        this.showBot=true;\r\n        break;\r\n      case 'inst':\r\n        this.display='NonMenuStep';        \r\n        this.setInst=true;\r\n        this.updateBot=val;\r\n        this.showBot=true;  \r\n        break;\r\n      case 'final':\r\n        this.display='Final';\r\n        this.setName=false;\r\n        this.setInst=false;\r\n        this.updateBot=false;\r\n        this.showBot=false;\r\n        break;\r\n      case 'none':\r\n        this.display='NonMenuStep';\r\n        this.setName=false;\r\n        this.setInst=false;\r\n        this.updateBot=false;\r\n        this.showBot=true;\r\n        break;\r\n      case 'loc':\r\n        this.display='Location';\r\n        this.setName=false;\r\n        this.setInst=false;\r\n        this.updateBot=false;\r\n        this.showBot=false;\r\n        break;\r\n      default:\r\n        this.display='Menu';\r\n        this.setName=false;\r\n        this.setInst=false;\r\n        this.updateBot=false;\r\n        this.showBot=true;\r\n      }    \r\n    this.botStepType = val;\r\n  }\r\n  get appBotStepType(){\r\n    return this.botStepType;\r\n  }\r\n  set appDisplay(val){\r\n    \r\n    this.display=val\r\n  }\r\n  get appDisplay(){\r\n    return this.display\r\n  }\r\n  set appShowBot(val){\r\n    this.showBot=val\r\n  }\r\n  get appShowBot(){\r\n    return this.showBot\r\n  }\r\n  set appSetName(val){\r\n    this.setName=val\r\n  }\r\n  get appSetName(){\r\n    return this.setName\r\n  }\r\n  set appSetInst(val){\r\n    this.setInst=val\r\n  }\r\n  get appSetInst(){\r\n    return this.setInst\r\n  }\r\n  set appUpdateBot(val){\r\n    this.updateBot=val\r\n  }\r\n  get appUpdateBot(){\r\n    return this.updateBot\r\n  }\r\n  set appBotStepClass(val){\r\n    this.botStepClass=val\r\n  }\r\n  get appBotStepClass(){\r\n    return this.botStepClass\r\n  }\r\n\r\n}\r\nexport default AppState;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function BotAlertMsg(props) {\r\n  const [open, setOpen] = React.useState(props.values.status);\r\n\r\n  \r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    props.onClose({type:'alert', values:false})\r\n  };\r\n  \r\n  return (\r\n    <div>      \r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{props.values.title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {props.values.msg}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>          \r\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\r\n            Got it!\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport Order from './PizzaOrder';\r\nimport ItemMenu from './itemMenu';\r\nimport {Header, MainArea, SliceBot} from './PageDisplay'\r\nimport '../css/App.css';\r\nimport '../css/DisplayMainArea.css';\r\nimport AppState from './AppState';\r\nimport BotAlertMsg from './BotAlertMsg';\r\n\r\nconst appOrder = new Order();\r\nconst menuStep = new ItemMenu();\r\nconst appValues = new AppState();\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);    \r\n    this.onTriggerBot=this.onTriggerBot.bind(this);        \r\n    this.onTriggerSpecial =this.onTriggerSpecial.bind(this);\r\n    this.updateAppState =this.updateAppState.bind(this);        \r\n    this.state = {\r\n      alert:false,\r\n      appValues:appValues,             \r\n      locObj: this.props.locObj,           \r\n      order: appOrder,\r\n      step: menuStep,\r\n      prevStep:false,                 \r\n    };\r\n    this.input = React.createRef();\r\n            \r\n  }\r\n  updateAppState = (p) => {    \r\n    const type = p.type;\r\n    switch (type) {    \r\n      case 'setName':\r\n        appOrder.ordername = p.values;      \r\n        if(appOrder.appBotStepClass!=='edit'){\r\n          appOrder.CreateNewPizza();      \r\n          menuStep.step = 'new';\r\n          appValues.appBotStepClass='menu';\r\n          appValues.appBotStepType='name'; \r\n        } else {\r\n          menuStep.step = 'none';\r\n          appValues.appBotStepClass='reviewOrder';\r\n          appValues.appBotStepType='none';\r\n        }              \r\n        this.setState((state,props)=>{        \r\n          return {\r\n            appValues:appValues,\r\n            order:appOrder,\r\n            step:menuStep,\r\n          }\r\n        })\r\n        break;\r\n      case 'setInst':\r\n        appOrder.SpecialInstructions = p.values;\r\n        menuStep.step = 'none';\r\n        appValues.appBotStepClass='reviewPizza';\r\n        appValues.appBotStepType='inst';       \r\n        this.setState((state,props)=>{        \r\n          return {\r\n            appValues:appValues,\r\n            order:appOrder,\r\n            step:menuStep,\r\n          }\r\n        })\r\n        break;\r\n      case 'change':\r\n        const locChng = this.state.locObj;\r\n        locChng.ChangeLoc();\r\n        appValues.appBotStepClass='Location';\r\n        appValues.appBotStepType='loc';      \r\n        this.setState((state,props)=>{        \r\n          return{\r\n            locObj:locChng,\r\n            appValues:appValues}});\r\n        break;\r\n      case 'location':\r\n        const locSet = this.state.locObj;\r\n        const appClass = p.values.searchStep==='done'?'menu':'';\r\n        const appType = appClass==='menu'?appClass:'loc';\r\n        appValues.appBotStepClass=appClass;\r\n        appValues.appBotStepType=appType;\r\n        this.setState((state,props)=>{        \r\n          return{\r\n            locObj:locSet,\r\n            appValues:appValues}});\r\n        break;\r\n      case 'alert':\r\n        this.setState((state,props)=>{        \r\n          return{\r\n            alert:p.values}});\r\n        break;\r\n      default:\r\n        return null;\r\n    }    \r\n  };\r\n  onTriggerSpecial(props){\r\n    if(props.val==='Reload') {this.reset()}\r\n    else if(props.val==='complete') {this.setState({display:'Final'})  \r\n    } else {\r\n      this.setState({display:props.val});\r\n    }       \r\n  }\r\n  onTriggerBot(props){\r\n    const trigger = props;\r\n    const type = trigger.type;\r\n    const value = trigger.value;\r\n    const botClass = trigger.triggerRet.botStepClass;\r\n    const stateVal = {\r\n      appValues:new AppState(),\r\n      order:trigger.triggerRet.order,\r\n      step:trigger.triggerRet.step,\r\n      prevStep:false,\r\n    }\r\n    stateVal.appValues = this.state.appValues\r\n    if(value===''&&(type==='cancel'||type==='complete'||type==='remove')){\r\n      stateVal.prevStep = {appValues:this.state.appValues, order:this.state.order, step:this.state.step};\r\n      stateVal.appValues.appBotStepClass=botClass;\r\n      stateVal.appValues.appBotStepType=value;\r\n    } else if(type==='cancel'&&value!=='no'){\r\n      if(value==='main'){\r\n        this.reset();\r\n      } else if(value==='select'){\r\n        this.onTriggerLoc({locObj:this.state.locObj,page:'Location'})\r\n      } else if(value==='restart'){\r\n        \r\n      }\r\n    } else if(type==='remove'&&value!=='no'){      \r\n      stateVal.appValues.appBotStepClass=botClass\r\n      stateVal.appValues.appBotStepType=botClass==='menu'?'menu':'none';      \r\n    } else if(value==='no'){\r\n      stateVal.appValues = this.state.prevStep.appValues\r\n      stateVal.order=this.state.prevStep.order\r\n      stateVal.step=this.state.prevStep.step\r\n      stateVal.prevStep=false;\r\n    } else if(type==='spec'){\r\n      stateVal.appValues.appBotStepClass='edit'\r\n      stateVal.appValues.appBotStepType=type;\r\n    } else if(type==='add'){\r\n      stateVal.appValues.appBotStepClass='menu';\r\n      stateVal.appValues.appBotStepType='name';\r\n      stateVal.step.step='new';\r\n      \r\n    } else {\r\n      stateVal.appValues.appBotStepClass=type\r\n      stateVal.appValues.appBotStepType=value;\r\n    }   \r\n    if(!trigger.triggerRet){return false;}\r\n    this.setState({\r\n      appValues:stateVal.appValues,\r\n      order:stateVal.order,\r\n      step:stateVal.step,\r\n      prevStep:stateVal.prevStep,\r\n    })    \r\n  }\r\n  reset(){\r\n    this.setState({\r\n      display: 'Location',\r\n      showBot:false,             \r\n      locObj: this.props.locObj,      \r\n      botStepClass:'',\r\n      order: new Order(),\r\n      step: new ItemMenu(),            \r\n    });\r\n  }\r\n  \r\n  render(){   \r\n    const alert = this.state.alert?<BotAlertMsg values={this.state.alert} onClose={(p)=>{return this.updateAppState(p)}}/>:null;\r\n    return (\r\n      <div className=\"sliceBot\">\r\n        <Header appState={this.state} updateAppState={(p)=>{return this.updateAppState(p)}}/>\r\n        <MainArea appState={this.state} updateAppState={(p)=>{return this.updateAppState(p)}} forwardedRef={this.input}/>\r\n        <SliceBot appState={this.state} updateAppState={(p)=>{return this.updateAppState(p)}} onTriggerBot={this.onTriggerBot} onAppUpdate={this.onTriggerSpecial}/>\r\n        {alert}\r\n      </div>\r\n    )      \r\n  }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {lookup,lookupByCoords} from 'zipcodes';\r\nimport stores from './stores.json';\r\n\r\nclass Location {\r\n  #geo = null;\r\n  #user = null;\r\n  #store = null;\r\n  #search = null;\r\n  #prevObj = null;\r\n  constructor(){\r\n    this.storeInfo = this.storeInfo.bind(this);\r\n    this.initLoc = this.initLoc.bind(this);\r\n    this.resolveGeoLoc = this.resolveGeoLoc.bind(this);\r\n    this.resetLoc = this.resetLoc.bind(this);    \r\n    this.#geo = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};     \r\n    this.#user = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};  \r\n    this.#store = {\r\n      current: '0',\r\n      previous: '0'};\r\n    this.#search = {\r\n      step:'search',\r\n      method: '',\r\n      searchLoc: '',\r\n      isResolved: false,\r\n      hasErr: false,\r\n      errMsg: '',\r\n    }\r\n  }\r\n  get searchStep(){\r\n    return this.#search.step;\r\n  }\r\n  ChangeLoc(){\r\n    this.#prevObj = {\r\n      user:this.#user,\r\n      store:this.#store,\r\n      search:this.#search,\r\n      }   \r\n    this.#user.isResolved=false;\r\n    this.#user.entryErr=false;\r\n    this.#user.errMsg='';\r\n    this.#user.zip='';\r\n    this.#user.cityState='';            \r\n    this.#store.previous=this.#store.current;     \r\n    this.#search.step='search';\r\n    this.#search.method='';\r\n    this.#search.searchLoc='';\r\n    this.#search.isResolved=false;\r\n    this.#search.hasErr=false;\r\n    this.#search.errMsg='';    \r\n  }\r\n  resetLoc(){\r\n    this.#user = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};  \r\n    this.#store = {\r\n      current: '0',\r\n      previous: '0',      \r\n      didChange: false};\r\n    this.#search = {\r\n      step:'search',\r\n      method: '',\r\n      searchLoc: '',\r\n      isResolved: false,\r\n      hasErr: false,\r\n      errMsg: '',\r\n    } \r\n  }  \r\n  get geoZip() {\r\n    if(this.#geo.isResolved && !this.#geo.entryErr) {\r\n      return this.#geo.zip;\r\n    } else {\r\n      return 'NoGeo';\r\n    }\r\n  } \r\n  get geoCityState(){\r\n    if(this.#geo.isResolved && !this.geoErr) {\r\n      return this.#geo.cityState;\r\n    } else {\r\n      return 'Geo Location Error';\r\n    }   \r\n  }\r\n  get geoErr(){\r\n    return this.#geo.entryErr;\r\n  }\r\n  get geoErrMsg(){\r\n    return this.geoErr?this.#geo.errMsg:'';\r\n  }\r\n  set userZip(val){\r\n    let z = val.trim();    \r\n    let r = false;\r\n    let e = false;\r\n    let m = '';\r\n    let cs = '';\r\n    const l = lookup(z);\r\n    if(typeof l !==\"undefined\"){\r\n      const c = l.city;\r\n      const s = l.state;        \r\n      r = true;        \r\n      cs = c + ', ' + s;\r\n    } else {\r\n      //invalid zip code\r\n      z = '';  \r\n      r = false;\r\n      e = true;\r\n      m = 'Enter a Valid US Zip Code';        \r\n    }   \r\n    this.#user = {\r\n      isResolved: r,\r\n      entryErr: e,\r\n      errMsg: m,\r\n      zip: z,\r\n      cityState: cs,\r\n    };\r\n  }\r\n  get userZip() {\r\n    if(this.#user.isResolved && !this.#user.entryErr) {\r\n      return this.#user.zip;\r\n    } else {\r\n      return 'NoUser';\r\n    }\r\n  } \r\n  get userCityState(){\r\n    if(this.#user.isResolved && !this.userErr) {\r\n      return this.#user.cityState;\r\n    } else {\r\n      return 'User Entry Error';\r\n    }   \r\n  }\r\n  get userErr(){\r\n    return this.#user.entryErr;\r\n  }\r\n  get userErrMsg(){\r\n    return this.userErr?this.#user.errMsg:'';\r\n  }\r\n  set storeLoc(val){\r\n    const c = this.#store.current;\r\n    if(c!==val){\r\n      this.#search.step='done';      \r\n      this.#store.current = val;\r\n    } else {\r\n      this.#search.step='done';\r\n      this.#user=this.#prevObj.user;\r\n      this.#store=this.#prevObj.store;\r\n      this.#search=this.#prevObj.search;\r\n      this.#prevObj=null;\r\n    }    \r\n  }\r\n  get curStoreID(){\r\n    return this.#store.current;\r\n  }\r\n  get prevStoreID(){\r\n    return this.#store.previous;\r\n  }\r\n  get curStoreInfo(){\r\n    const i = this.#store.current; \r\n    return this.storeInfo(i);\r\n  }\r\n  get prevStoreInfo(){\r\n    const i = this.#store.previous; \r\n    return this.storeInfo(i);\r\n  }\r\n  get searchErr(){\r\n    return this.#search.hasErr;    \r\n  }\r\n  get searchErrMsg(){\r\n      return this.searchErr?this.#search.errMsg:'';\r\n  }\r\n  get searchMeth(){\r\n    if(this.#search.isResolved){\r\n      return this.#search.method;\r\n    }\r\n    return 'No Search'\r\n  }\r\n  get searchLoc(){\r\n    if(this.#search.isResolved){\r\n      return this.#search.searchLoc;\r\n    }\r\n    return 'No Search'\r\n  }\r\n  set search(values){\r\n    this.#search.step = values.step;\r\n    this.#search.method = values.method;\r\n    this.#search.searchLoc = values.loc;\r\n    this.#search.isResolved = values.res;\r\n    this.#search.hasErr= values.err;\r\n    this.#search.errMsg= values.errMsg;\r\n  }\r\n  set storeSearch(method){        \r\n    let values ={\r\n      step:'select',\r\n      method: method.method,\r\n      loc: '',\r\n      res: false,\r\n      err: false,\r\n      errMsg: '',\r\n    };\r\n    if(values.method==='User Entry'){\r\n      this.userZip = method.usrStr;\r\n      if(this.userErr){\r\n        values.step ='search';\r\n        values.method = '';\r\n        values.err= true;\r\n        values.errMsg= 'Invalid Zip Entry';\r\n      } else {\r\n        values.loc = this.userCityState;\r\n        values.res = true;\r\n      }\r\n    } else if(values.method==='Geo Locate'){\r\n      if(this.geoErr){\r\n        values.step ='search';\r\n        values.method = '';\r\n        values.err= true;\r\n        values.errMsg= 'Invalid Geo Location';\r\n      } else {\r\n        values.loc = this.geoCityState;\r\n        values.res = true;\r\n      }\r\n    } else {\r\n      values.step ='search';\r\n      values.method = '';\r\n      values.err= true;\r\n      values.errMsg= 'Invalid Search Method';\r\n    }\r\n    this.search = values;    \r\n  }\r\n  storeInfo(i){\r\n    const s = stores.stores.find(\r\n      (r) => {return r.id === i;}\r\n    );\r\n    return s;\r\n  }\r\n  initLoc() {\r\n    return (this.resolveGeoLoc()\r\n      .then(data => {\r\n        if (data!=='GeoFail' && (data!==null||data!=='')) {\r\n          const c = data.city;\r\n          const s = data.state;\r\n          this.#geo = {\r\n            zip: data.zip,\r\n            cityState: c + ', ' + s,\r\n            isResolved: true,\r\n            entryErr: false,\r\n            errMsg: '',\r\n          };      \r\n        } else if (data==='GeoFail') {\r\n          this.#geo = {\r\n            zip: '',\r\n            cityState: '',\r\n            isResolved: true,\r\n            entryErr: true,\r\n            errMsg: 'Geo Location is Disabled',\r\n          };\r\n        } else {\r\n          this.#geo = {\r\n            zip: '',\r\n            cityState: '',\r\n            isResolved: false,\r\n            entryErr: true,\r\n            errMsg: 'Geo Location not resolved',\r\n          };\r\n        }\r\n        return this;\r\n      })\r\n    )\r\n  }  \r\n  resolveGeoLoc(){ \r\n    const locOpt = {\r\n      timeout: 5000,\r\n      maximumAge: 0\r\n    };    \r\n    return (new Promise((resolve, reject) => {\r\n      if(\"geolocation\" in navigator) {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n          let lat = position.coords.latitude;\r\n          let long = position.coords.longitude;\r\n          const tZip = lookupByCoords(lat,long);                  \r\n          resolve(tZip);\r\n        },(error) => {\r\n          console.log('Error getting location');\r\n          console.error(\"Error Code = \" + error.code + \" - \" + error.message);\r\n          const response = 'GeoFail';\r\n\r\n          resolve(response);  \r\n        },locOpt);\r\n      }\r\n    }, ()=>{\r\n      console.log(\"Promise reject\");   \r\n      }\r\n    ))        \r\n  }\r\n}\r\n\r\nexport default Location;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './css/index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'jquery/dist/jquery.js';\r\nimport 'popper.js/dist/umd/popper.js';\r\nimport 'bootstrap/dist/js/bootstrap.js';\r\nimport Location from './components/Location'\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\r\n\r\nLocationFactory().then(obj => {  \r\n /* const obj = LocationFactory();*/\r\n  ReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router>\r\n    <Route component={() => <App locObj={obj}/>}/>\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n  );\r\n})\r\nfunction LocationFactory(){\r\n  let x = new Location();\r\n  return x.initLoc();\r\n}\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}